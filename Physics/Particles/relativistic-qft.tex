\documentclass[hyperref, UTF8, a4paper]{ctexart}

\usepackage{geometry}
\usepackage{titling}
\usepackage{titlesec}
\usepackage{paralist}
\usepackage{footnote}
\usepackage{enumerate}
\usepackage{amsmath, amssymb, amsthm}
\usepackage{simplewick}
\usepackage{cite}
\usepackage{graphicx}
\usepackage{subfigure}
\usepackage{physics}
\usepackage{siunitx}
\usepackage{slashed}
\usepackage{centernot}
\usepackage{tikz}
\usepackage{tikz-feynhand}
\usepackage[colorlinks, linkcolor=black, anchorcolor=black, citecolor=black]{hyperref}
\usepackage{prettyref}

\geometry{left=3.18cm,right=3.18cm,top=2.54cm,bottom=2.54cm}
\titlespacing{\paragraph}{0pt}{1pt}{10pt}[20pt]
\setlength{\droptitle}{-5em}
\preauthor{\vspace{-10pt}\begin{center}}
\postauthor{\par\end{center}}

\DeclareMathOperator{\timeorder}{T}
\DeclareMathOperator{\diag}{diag}
\newcommand*{\ii}{\mathrm{i}}
\newcommand*{\ee}{\mathrm{e}}
\newcommand*{\const}{\mathrm{const}}
\newcommand*{\comment}{\paragraph{注记}}
\newcommand{\fsl}[1]{{\centernot{#1}}}
\newcommand*{\reals}{\mathbb{R}}
\newcommand*{\complexes}{\mathbb{C}}

\newcommand*{\fd}[1]{\mathcal{D} #1}

\newrefformat{sec}{第\ref{#1}节}
\newrefformat{note}{注\ref{#1}}
\renewcommand{\autoref}{\prettyref}

\newenvironment{bigcase}{\left\{\quad\begin{aligned}}{\end{aligned}\right.}

\newcommand{\concept}[1]{\underline{\textbf{#1}}}
\renewcommand{\emph}{\textbf}

\allowdisplaybreaks[4]

\title{相对论性量子场论}
\author{吴晋渊}

\begin{document}

\maketitle

\vspace{2em}

如无特殊说明，本文所谓的本征态指的都是归一化。
希腊字母的指标跑遍所有时空维度，而拉丁字母的指标仅仅跑遍空间维度，也就是$\mu, \nu, \ldots = 0, 1, 2, 3$而$i, j, \ldots = 1, 2, 3$。
常规斜体字母$x, y, p$等若经说明为多分量对象，默认为四维矢量，相应的，$\vb*{x}, \vb*{y}, \vb*{p}$等为它们的空间部分。
常规斜体字母的点乘表示四维矢量乘法，如
\[
    p^2 = \omega^2 - \abs{\vb*{p}}^2, \quad x \cdot y = x^0 y^0 - \vb*{x} \cdot \vb*{y} = t_x t_y - \vb*{x} \cdot \vb*{y}.
\]
指标$a,b,\ldots$也有可能指各种多分量对象的指标，未必正好取$1, 2, 3$。
$T$表示编时算符，$N$表示正规序算符。

张量的分量矩阵默认以排在前面的指标为行指标，以排在后面的指标为列指标。

% 本文将略去所有最为基础的formalism：量子力学的基本框架——包括路径积分和正则形式，无论是关于单粒子的还是关于场的；如何将多粒子态写成场的激发态（即所谓二次量子化）；微扰论

\section{概述}

\subsection{有必要统一狭义相对论和单粒子量子力学}

物理实验表明存在一个时间轴，且存在\concept{粒子}，它的自由度在不考虑引力导致的空间翘曲时包括一个三维欧氏空间，可能还有一些内禀自由度。
狭义相对论还告诉我们，移动参考系，时间和空间的变换是洛伦兹变换，这对应一个$3+1$维闵可夫斯基时空，即度规可以化为
\begin{equation}
    \eta_{\mu\nu} = \diag (1, -1, -1, -1)
\end{equation}
的四维几何。通常使用$t, x, y, z$或者$x^0, x^1, x^2, x^3$来依次标记这4个坐标。
容易看出$x, y, z$或者说$x^1, x^2, x^3$就构成一个三维欧氏几何，它们是\concept{空间维}。
$x^0$则是\concept{时间维}。

在狭义相对论中难以使用哈密顿动力学，因为此时“时间”的概念是不清楚的：应该使用固有时还是坐标时？
因此，简单地将单粒子量子力学移植到相对论时空中不是好的选择。
另一方面，我们还面临另一个问题：将已知在相对论情况下运作良好的场论移植到量子力学中。

进一步的分析展示出，实际上场算符的线性叠加自然给出了一组产生湮灭算符，它们作用在理论的基态上可以覆盖整个希尔伯特空间，而这些产生湮灭算符的标签——如动量、自旋等——正好也是单粒子的标签。
也即，场的希尔伯特空间实际上是多粒子态的Fock空间。这就是\concept{量子场论}的思想。
“量子场论”这个说法实际上会引起一些可能的误解。最广泛地说，它指的是场的量子力学，但是实际上量子场论一般表示“认为场的哈密顿量是谐振子哈密顿量加上相互作用项之后得到的，场是粒子的产生湮灭算符，从而多粒子态可以看成场的激发态”的理论框架。
经典场论中谐振子可以连续变化，而量子的谐振子的能级则是分立的；当有无限多个自由度时，这些分立的能级实际上就给出了多粒子态。
实际上，通常所说的“量子场论”的意义更加局限，指的是满足相对论协变性的量子场论，即高能物理的量子场论；物理中如果需要分析非相对论协变性的量子场论，一般都是在分析凝聚态系统，此时基本的场就是电子场、声子场而相互作用是库仑相互作用，称为\concept{凝聚态场论}。

凝聚态场论实际上已经足够复杂；在高能物理的量子场论中我们通常只分析少数几个粒子的散射过程，基态为真空态，而凝聚态场论中讨论含有大量粒子的基态、讨论束缚态问题都是非常常见的。
另一方面，凝聚态场论不受到相对论协变性约束，因此其中有更多可能性。
很多时候高能物理的量子场论实际上反而更加简单，虽然凝聚态场论背后的基本物理机制实际上只有库仑相互作用。

\subsection{正则量子化的大致手续}\label{sec:canonical-general}

在相对论性量子场论中我们仍然要求自由粒子的拉氏量具有最高的对称性，也就是说，在庞加莱群作用下没有变化，
且拉氏量只含有二次项（从而给出线性的运动方程）。%
\footnote{虽然本文主要分析正则量子化，但写出运动方程还是用的是拉氏量。这是更加方便的做法，因为正则表述在理论框架上将时间和空间分开对待了，因此不容易观察哈密顿量在洛伦兹变化之下是不是给出恒定不变的动力学。}
空间平移不变性意味着拉氏量不能显含坐标；空间各向同性意味着拉氏量中的参数必须是标量，不能出现多分量的参数。

在已经写出额拉氏量之后，我们可以计算三种场的哈密顿量，为正则量子化做好准备。
由于我们通常在欧氏空间中写出哈密顿量而在闵可夫斯基时空中讨论拉氏量，需要格外注意一点：闵可夫斯基时空的度规为$(+, -, -, -)$而欧几里得空间的度规为$(+, +, +)$，因此
\[
    A_\mu A^\mu = (\dot{A}^0)^2 - \vb*{A}^2,
\]
上式左边为闵可夫斯基时空中的表达式，右边为欧几里得空间中的表达式。
换而言之，闵可夫斯基时空中的$A_i A^i$和欧几里得空间中的$A_i A^i$差一个负号。

在得到了场的哈密顿量之后，我们据此执行正则量子化。我们接下来需要对场算符施加正则对易或反对易关系。由于空间平移不变性，我们将在动量表象下工作。此外，为了让公式看起来好看一些，我们忽略算符的$\hat{\ }$帽子。
在处理单粒子量子力学坐标表象下的问题时我们同时需要讨论算符$\hat{\vb*{x}}$和可以随意变动的空间坐标$\vb*{x}$，但是在量子场论中几乎从来不需要讨论场变量的取值，因此忽略帽子并不会造成任何问题。
在对自由场论做量子化时为了突出场的作用，我们采用海森堡绘景，即让场发生时间演化。

场算符做傅里叶变换之后的产生湮灭算符的归一化涉及一个微妙的、和相对论特性有关的地方。
考虑到\eqref{eq:relativity-p}，我们有
\[
    \ket{p, \sigma} = \sqrt{2 \omega_{\vb*{p}}} \ket{\vb*{p}, \sigma},
\]
于是设${a}_{\vb*{p}, \sigma}$和${a}^\dagger_{\vb*{p}, \sigma}$为单粒子态$\ket{\vb*{p}, \sigma}$对应的产生湮灭算符，则有
\[
    ({\alpha}_{\vb*{p}, \sigma})^\dagger = \sqrt{2\omega_{\vb*{p}}} {a}_{\vb*{p}, \sigma}^\dagger,
\]
这样场算符的展开式就是
\[
    {\varphi}(x) \propto \sum_\sigma \int \frac{\dd[3]{\vb*{p}}}{\sqrt{(2\pi)^3 2 \omega_{\vb*{p}}}} \left( {a}^\dagger_{\vb*{p}, \sigma} \ee^{\ii p_\mu x^\mu} + {a}_{\vb*{p}, \sigma} \ee^{- \ii p_\mu x^\mu} \right) e_\sigma,
\]
其中$e_\sigma$标记场$\phi$属于的场表示的有限维部分的基底。
或者，既然我们已经转而在三维空间中讨论问题，即已经不再要求洛伦兹协变性了，可以使用三维矢量更加清晰地写出
\begin{equation}
    {\varphi}(\vb*{x}, t) \propto \sum_\sigma \int \frac{\dd[3]{\vb*{p}}}{\sqrt{(2\pi)^3 2 \omega_{\vb*{p}}}} \left( {a}^\dagger_{\vb*{p}, \sigma} \ee^{- \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} + {a}_{\vb*{p}, \sigma} \ee^{\ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} \right) e_\sigma. 
    \label{eq:expanding-field-operator}
\end{equation}
由于三种场都服从克莱因-高登方程，将\eqref{eq:expanding-field-operator}代入\eqref{eq:klein-gordon-eq}会发现$\omega_{\vb*{p}}$和$\vb*{p}$正好服从质壳关系\eqref{eq:mass-shell}。
另一方面，也可以使用相对论协变的积分测度，写出
\begin{equation}
    {\varphi}(\vb*{x}, t) \propto \sum_\sigma \int \frac{\dd[3]{\vb*{p}}}{2 \omega_{\vb*{p}} (2\pi)^{3/2}} \left( {\alpha}^\dagger_{\vb*{p}, \sigma} \ee^{ \ii p_\mu x^\mu} + {\alpha}_{\vb*{p}, \sigma} \ee^{- \ii \pi_\mu x^\mu} \right) e_\sigma. 
    \label{eq:expanding-field-operator-relativity}
\end{equation}

展开式\eqref{eq:expanding-field-operator-relativity}和\eqref{eq:expanding-field-operator}有各自的好处。
\eqref{eq:expanding-field-operator-relativity}给出的产生湮灭算符以及它们产生的单粒子态是洛伦兹协变的，但是在处理对易关系的时候会略有复杂，因为此时产生湮灭算符的对易关系必定也是协变的，因此必须指定
\[
    \comm*{{\alpha}_{\vb*{p}}}{{\alpha}^\dagger_{\vb*{p}'}} \sim \omega_{\vb*{p}} \delta^3 (\vb*{p} - \vb*{p}')
\]
这样的对易关系，或者类似的反对易关系；当然，因为此时使用的积分测度是$\int \dd[3]{\vb*{p}} / (2 \omega_{\vb*{p}})$，这样的对易关系是正确的——无非是$\delta$函数要修改为某种相对论形式而已。
\eqref{eq:expanding-field-operator}给出的产生湮灭算符以及它们产生的单粒子态不是洛伦兹协变的，但是可以简化对易关系以及归一化时使用的积分测度。
例如在对所有的动量模式求和时如果我们选取积分测度为$\int \dd[3]{\vb*{p}}$，那么就需要指定
\[
    \comm*{{a}_{\vb*{p}}}{{a}^\dagger_{\vb*{p}'}} = \delta^3 (\vb*{p} - \vb*{p}'),
\]
或者类似的反对易关系。而如果指定
\[
    \comm*{{a}_{\vb*{p}}}{{a}^\dagger_{\vb*{p}'}} = (2\pi)^3 \delta^3 (\vb*{p} - \vb*{p}'),
\]
此时只需要始终使用积分测度
\[
    \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3}
\]
对所有动量模式求和即可。
两种展开式都是傅里叶变换，因此都能够消除哈密顿量中的导数。

为了避免引起混乱，这里我们统一指定下面使用的归一化常数和记号。
本文采取Peskin和Quantum Field Theory for the Gifted Amateur的归一化常数和记号的一种混合。
前面的$\ket{p}$和$\ket{\vb*{p}}$的区分是Quantum Field Theory for the Gifted Amateur中使用的记号（Peskin中没有引入$\ket{p}$，Peskin中的$\ket{\vb*{p}}$就是本文的$\ket{p}$），而本文中的归一化常数则保持和Peskin一致。
对傅里叶变换，规定对动量求和时积分测度带因子$1/(2\pi)^3$而对坐标求和时积分测度就是$\dd[3]{\vb*{x}}$。
这样，产生湮灭算符的对易关系就是
\begin{equation}
    \comm*{{a}_{\vb*{p}}}{{a}^\dagger_{\vb*{p}'}} = (2\pi)^3 \delta^3 (\vb*{p} - \vb*{p}'),
\end{equation}
或者将相对论协变的$\alpha$算符转化为差一个常数的$a$算符，即令
\begin{equation}
    \alpha^\dagger_{\vb*{p}, \sigma} = \sqrt{2 \omega_{\vb*{p}}} a^\dagger_{\vb*{p}, \sigma},
\end{equation}
就有
\begin{equation}
    \comm*{{\alpha}_{\vb*{p}}}{{\alpha}^\dagger_{\vb*{p}'}} = (2\pi)^3 2 \omega_{\vb*{p}} \delta^3 (\vb*{p} - \vb*{p}').
\end{equation}
反对易关系只需要将$\comm*{\cdot}{\cdot}$改成$\acomm*{\cdot}{\cdot}$即可。
场算符的展开和\eqref{eq:strange-p-state}遵从一样的习惯，为
\begin{equation}
    \varphi(\vb*{x}, t) = \sum_{\sigma} \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3 2 \omega_{\vb*{p}}} \left( {\alpha}^\dagger_{\vb*{p}, \sigma} \ee^{- \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} + {\alpha}_{\vb*{p}, \sigma} \ee^{\ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} \right) e_\sigma,
\end{equation}
或者
\begin{equation}
    {\varphi}(\vb*{x}, t) = \sum_\sigma \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{\sqrt{2 \omega_{\vb*{p}}}} \left( {a}^\dagger_{\vb*{p}, \sigma} \ee^{- \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} + {a}_{\vb*{p}, \sigma} \ee^{\ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} \right) e_\sigma. 
    \label{eq:field-operator-fourier}
\end{equation}
$\ee$指数中的$\ii \omega t - \ii \vb*{p} \cdot \vb*{x}$也可以写成相对论协变形式$\ii p \cdot x$。

对单粒子态，有
\[
    \ket{p, \sigma} = \sqrt{2 \omega_{\vb*{p}}} {a}^\dagger_{\vb*{p}, \sigma} \ket{0},
\]
从而有
\begin{equation}
    \braket{p, \alpha}{q, \beta} = (2\pi)^3 2 \omega_{\vb*{p}} \delta_{\alpha \beta} \delta^3(\vb*{p} - \vb*{q}).
\end{equation}
在某一个给定的时间，将${\phi}(\vb*{x}, t)$作用在真空态上得到
\[
    \begin{aligned}
        {\varphi}(\vb*{x}, t) \ket{0} &= \sum_\sigma \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{\sqrt{2 \omega_{\vb*{p}}}} {a}^\dagger_{\vb*{p}, \sigma} \ee^{- \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} e_{\sigma} \ket{0} \\
        &= \sum_\sigma \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{2 \omega_{\vb*{p}}} \ee^{- \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} e_{\sigma} \ket{p, \sigma}.
    \end{aligned}
\]

这里说明一下为什么我们采取了上面所说的傅里叶变换，而没有，比如说，改变一下正负号选取。
我们知道
\[
    \varphi^\dagger_\sigma (\vb*{x}, t) \ket{0} \sim \ket{\vb*{x}(t), \sigma},
\]
从而
\[
    \mel{0}{\varphi_\sigma (\vb*{x}, t)}{\psi} \sim \text{single particle wavefunction}.
\]
我们希望\eqref{eq:x-p-trans}成立。可以验证，取上述傅里叶变换，可以得到
\[
    \mel{0}{\varphi_\sigma (\vb*{x}, t)}{\psi} \sim \ee^{-\ii p \cdot x} \propto \ee^{\ii \vb*{p} \cdot \vb*{x}},
\]
这正是\eqref{eq:x-p-trans}。因此本节给出的傅里叶变换是正确的。
表面上看这会导致一个疑难，就是
\[
    \varphi^\dagger_\sigma (\vb*{x}, t) \ket{0} \propto \ee^{\ii \omega t},
\]
但是一个单粒子态的演化应该以$\ee^{-\ii \omega t}$为时间演化因子，但是其实这里没有任何问题：此处的$\varphi$是海森堡绘景中的，$\ket*{\vb*{x}}$以$\ee^{\ii \omega t}$时间演化，而实际的单粒子态是没有时间演化的。
那么，现在我们做一个绘景变换，在所有态上乘以一个因子$\ee^{-\ii \omega t}$，那么$\ket*{\vb*{x}}$就没有时间演化了，而实际的单粒子态以$\ee^{-\ii \omega t}$时间演化，这正是正确的薛定谔绘景。

场算符（对应于湮灭算符的场算符）有时候会被粗略地当成“相对论量子力学中的波函数”。

判断应该使用对易关系来量子化场还是应该使用反对易关系来量子化场应当遵守几个条件：
\begin{itemize}
    \item 非平凡性。哈密顿量不应该给出平凡的结果。
    \item 因果性。在某一个时空点施加相互作用只应该产生局域的影响。特别的，在一个时空点做测量不应该对与之间隔（指的是闵可夫斯基时空中的“距离”）为正的时空点产生影响。
    \item 能量正定性。哈密顿量应该可以写成产生湮灭算符的正定二次型，以避免能量无限下降。
\end{itemize}

以上给出的步骤完全描述了场算符的量子化过程。这种使用傅里叶变换得到对角化的哈密顿量的方式有时也称为\concept{正则量子化}，因为它是算符的正则量子化（即施加对易或反对易关系）之后立刻可以完成的。

关于与场算符配套的真空态要说一句：在自由场下，无论采取哪种绘景，真空态$\ket{0}$或者没有时间演化，或者时间演化只是乘上一个复数因子。这是因为真空态一定是哈密顿算符的本征态。
此外，本节采用的量子化方案也体现出了一个重要的物理图像：具有确定能量$E$的粒子在经典极限下就对应着以圆频率$E$振荡的场。

最后，以上将场做傅里叶变换以消去运动方程中的导数的做法在经典情况下当然也适用。容易看出，动量为$\vb*{p}$的粒子模式的经典极限就是波矢为$\vb*{p}$的平面波；相应的，位置为$\vb*{r}$的粒子模式的经典极限就是
\[
    \phi(\vb*{r}') = \delta(\vb*{r}' - \vb*{r}).
\]
以上两个模式的振幅均不确定；量子情况下振幅是分立的而经典情况下则不是。

即使在经典场中，也存在动量和位置不能同时确定的现象。场的量子化带来的不是动量和位置不能同时确定，而是场的振幅是离散化的——经典情况下，平面波的振幅可以任意变化，而量子情况下，${\phi}$（或者别的场算符）的本征值是离散的，此时才能够良定义“粒子”。

在本节剩下的部分中，我们将会看到，标量场和矢量场只能被量子化为玻色场，而旋量场只能被量子化为费米场。
这是\concept{自旋统计定理}的特例，这个定理说，对满足洛伦兹对称性的系统，半整数自旋对应着费米子，而整数自旋对应着玻色子。
在没有洛伦兹对称性时这个结论不一定成立，实际上，对很多具有实际意义的系统——如格点系统——我们甚至没有旋转对称性，所以也无从讨论自旋。

\subsection{经典近似}

一个相对论性量子场论的退化：
\begin{itemize}
    \item 量子性的单个粒子，即系统的基本自由度是坐标和一些额外的离散标签（自旋等），在这里，近似体现在缺乏粒子生灭，对那些本身缺乏粒子生灭的理论，从量子场论退化到单粒子理论没有任何近似。
    \begin{itemize}
        \item 进一步，相对论性单粒子理论通常并没有什么意义，因此非相对论性近似往往也是必要的。
        \item 退化得到的非相对论性单粒子理论也可以做二次量子化，得到一个非相对论性量子场论。这个理论当然可以通过原本的相对论性量子场论做非相对论近似一口气得到。
        \item 还可以完全忽略量子涨落得到经典单粒子理论。
    \end{itemize}
    \item 经典场论。如果原本的相对论性量子场论能够退化成单粒子理论，则它退化成的经典场论和单粒子理论的波动力学具有一样的形式。这就是“把波函数量子化”能够行得通的原因，也是麦克斯韦方程有时候看起来就好像一个波函数的原因——光子没有特别良定义的坐标表象下的单光子量子力学，但是如果硬是要定义一个，那么大体上就是麦克斯韦方程的样子；经典的麦克斯韦方程中的平面波在量子化之后真的就是动量本征态，可以得到坐标-动量不确定性关系，等等。
    \begin{itemize}
        \item 可以做WKB近似，或者说程函近似，得到的$\vb*{k}$和经典单粒子理论是一致的。
    \end{itemize}
\end{itemize}

\section{洛伦兹群及其表示}\label{sec:symmetry}

粒子物理中底流形是给定的：四维闵可夫斯基时空，因此讨论时空的拓扑没有什么意义；我们将直接开始讨论闵可夫斯基时空的对称性。
对称性可以大致分为两类：一类来自时空坐标变换，可能是平移，也可能是旋转或者推动，此时$\var{x}$不为零，且常常$\var{\phi}$也不为零（注意即使平移时$\var{\phi}$也不为零，这是为了保持$\bar{\var}{\phi}$始终为零）；
另一类为\concept{内禀对称性}，即多分量场内部不同分量之间的“转动”。
无论是时空坐标变换还是内禀对称性实际上都是某些对称群——在本文中通常是一些李群——的表示。
李群的连通分支可以完全用它的李代数加上指数映射
\[
    g = \exp(\ii \theta^i \sigma_i)
\]
描述，其中$g$是任意的李群群元而$\theta^i$为群参数，而不同分支之间的切换则对应某个离散的群，因此我们只需要讨论离散群的表示和李代数的表示就可以。

李代数的表示可以分成有限维表示，即矩阵表示，和无限维表示，通常是把李代数中的生成元写成一些导数算符。
从李代数的有限维表示可以导出其无限维表示以及\concept{场表示}，设$\phi(x)$是一个场，$R(\Lambda)$是李群成员$\Lambda$在坐标上的有限维表示，$M(\Lambda)$是$\Lambda$在$\phi(x)$的场值上的有限维表示，则将$\Lambda$作用在$\phi(x)$上，就有
\[
    \phi'(R(\Lambda) x) = M(\Lambda) \phi(x),
\]
现在让$\Lambda$为无穷小操作，$\theta$为很小的群参数取值，$\sigma$是全体生成元，就得到
\begin{equation}
    \bar{\var}{\phi} = \underbrace{\theta^i M(\sigma_i) \phi}_{{\var{\phi}}} - (\theta^i R(\sigma_i))^\mu \partial_\mu \phi,
\end{equation}
第一项就是李代数的有限维表示作用在了$\phi$的场值上，第二项是有限维表示作用在坐标上而诱导出的无限维表示，两者共同组成了所谓的场表示。

我们通常要求李群的有限维表示是幺正的，因为如前所述场经过量子化后被提升为场算符，而场算符作用在真空态上得到多粒子态，既然多粒子态的变换是幺正的，场算符的变换也必须是幺正的。
这里还有一个对应关系：设$M_\text{state}$是某个群在态空间上的表示（而与此同时不改变与之配套的算符），而$M_\text{field}$是某个群在算符上的场表示（而与此同时不改变量子态），则
\begin{equation}
    \comm*{M_\text{state}}{\psi} = M_\text{field} \psi,
    \label{eq:field-and-state-corr}
\end{equation}
其中$\psi$为任意的场。

\subsection{平移}\label{sec:translation}

平移可能是我们能想到的最简单的变换，但实际上它相当特殊——在实际的物理问题中平移群通常不使用矩阵群表示，因为它无疑不是线性的。%
\footnote{可以在仿射空间中使用矩阵表示平移，但是这对本文没有太大意义。}

生成元$P^\mu$

\begin{equation}
    \comm*{P_\mu}{P_\nu} = 0.
    \label{eq:comm-of-trans}
\end{equation}

接下来讨论平移群的线性表示。非Cartan元素的缺乏意味着平移群的有限维表示中不能够构造其Cartan元素（也就是全体平移生成元）的升降算符，因此平移群的有限维表示一定是平凡的。
因此转而观察其无限维表示。我们考虑
\[
    \phi'(x) = \phi(x - a) = \phi(x) - a^\mu \partial_\mu \phi,
\]
其中$a$是一个小量。于是，平移群的李代数的无穷维表示形如
\[
    P_\mu \propto - \partial_\mu.
\]
不失一般性地我们取幺正表示，并适当选取群参数，那么就有
\begin{equation}
    P_0 = \ii \partial_0, \quad P_i = - \ii \partial_i.
    \label{eq:transition-inf-rep}
\end{equation}
我们特意让时间平移变换的方向和空间平移的方向反过来了。
这是为了和物理中通常的时间演化方程的形式匹配。

\subsection{旋转}\label{sec:rotation}

\subsubsection{三维欧氏空间的旋转矩阵}

本节讨论$\reals^3$中的旋转。所谓旋转，指的是一个可微的（从而可以通过一个物理上的微分方程实现的）等距同构变换。
显然，$\reals^3$中的等距同构变换的全体就是$O(3)$，其中任何一个矩阵的行列式都是$\pm 1$。
另一方面，变换可微意味着，可以找到形如下式的无穷小变换：
\[
    \vb*{r} \longrightarrow \vb*{r}' = \vb*{r} + \dd{\vb*{r}}, \quad \dd{\vb*{r}} = \dd{t} \vb*{A} \cdot \vb*{r},
\]
从而
\[
    \dv{\vb*{r}'}{\vb*{r}} = \vb*{I} + \dd{t} \vb*{A},
\]
\[
    \det \left( \dv{\vb*{r}'}{\vb*{r}} \right) = 1 + \dd{t} \trace \vb*{A} \approx 1.
\]
因此$\reals^3$中的旋转变换的全体就是$SO(3)$，也就是行列式为1的全体$3\times 3$矩阵。

我们来分析$SO(3)$的结构。矩阵$A$在$SO(3)$中，当且仅当
\begin{equation}
    A A^\top = I, \quad \det A = 1.
    \label{eq:def-so3}
\end{equation}
矩阵$A$含有9个分量；$A A^\top = I$是对称的，因此它等价于6个独立的纯数量方程；
$\det A = \pm 1$可以直接从$A A^\top=I$推出，则$\det A = 1$的要求仅仅是去掉了其中的一支，因此对维数没有影响。
这样，$SO(3)$就是$9-6=3$维的，因此它有三个彼此独立的生成元。
注意到绕$x$轴旋转、绕$y$轴旋转、绕$z$轴旋转都是$SO(3)$的子群，这三者的表达式分别为
\begin{equation}
    R_x = \pmqty{1 & 0 & 0 \\ 0 & \cos \theta & -\sin \theta \\ 0 & \sin \theta & \cos \theta}, 
    R_y = \pmqty{\cos \theta & 0 & \sin \theta \\ 0 & 1 & 0 \\ - \sin \theta & 0 & \cos \theta}, 
    R_z = \pmqty{\cos \theta & - \sin \theta & 0 \\ \sin \theta & \cos \theta & 0 \\ 0 & 0 & 1}.
    \label{eq:rotation-with-axis}
\end{equation}
\eqref{eq:rotation-with-axis}自然导出三个生成元：
\begin{equation}
    J_1 = \ii \pmqty{0 & 0 & 0 \\ 0 & 0 & -1 \\ 0 & 1 & 0}, 
    J_2 = \ii \pmqty{0 & 0 & 1 \\ 0 & 0 & 0 \\ -1 & 0 & 0}, \\
    J_3 = \ii \pmqty{0 & -1 & 0 \\ 1 & 0 & 0 \\ 0 & 0 & 0}.
    \label{eq:generators-of-so3}
\end{equation}
注意到各个生成元都是厄米的，因为$SO(3)$在此处的矩阵表示是幺正的。
\eqref{eq:generators-of-so3}也可以直接通过分析$SO(3)$的抽象性质得到。
对无穷小变换$A = I + \theta J$（$\theta$是小量），\eqref{eq:def-so3}中的两个方程分别代表
\[
    (I+\theta J) (I + \theta J^\top) = I, \quad \det (1 + \theta J) = 1 + \theta \trace J = 1,
\]
也就是
\[
    J + J^\top = 0, \quad \trace J = 0.
\]
上式描述了一个三阶方阵构成的向量空间，容易看出\eqref{eq:generators-of-so3}正是它的一组基。
通过显式表达式\eqref{eq:generators-of-so3}可以导出
\begin{equation}
    [J_i, J_j] = \ii \epsilon_{ijk} J_k.
    \label{eq:lie-algebra-so3}
\end{equation}
% TODO：这里好像正负号有问题？
这就得到了旋转群的李代数的对易关系，从而我们刻画了$SO(3)$的李代数的结构。

\subsubsection{$SU(2)$群}

然而，能够实施空间旋转的并不只有$SO(3)$。实际上，$SU(2)$也能做到这件事。
下面我们引入$SU(2)$群。$SU(2)$是由二阶复方阵组成的矩阵群，由
\begin{equation}
    A^\dagger A = I, \quad \det A = 1
    \label{eq:def-su2}
\end{equation}
定义。
二阶复数方阵一共有$4 \times 2 = 8$个自由度。矩阵方程$A^\dagger A = I$含有4个复数方程，
但是因为它是厄米的，因此它只含有2个独立的复数方程，从而它含有4个独立的实数方程，也即它将总自由度降到了4。
从$A^\dagger A = I$只能够推出$\abs{\det A} = 1$，$\det A$仍然可以连续变化；
$\det A = 1$则将$\det A$确定到一个点上面，因此它将总自由度降到了3。
因此$SU(2)$的维度为3。
可以证明，$SU(2)$中的每一个元素均形如
\begin{equation}
    A = a \mathbf{1} + b \mathbf{i} + c \mathbf{j} + d \mathbf{k}, \quad a^2 + b^2 + c^2 + d^2 = 1,
    \label{eq:su2-expression}
\end{equation}
其中
\begin{equation}
    \mathbf{1} = \pmqty{1 & 0 \\ 0 & 1}, \; \mathbf{i} = \pmqty{0 & -1 \\ 1 & 0}, \; 
    \mathbf{j} = \pmqty{0 & \ii \\ \ii & 0}, \; \mathbf{k} = \pmqty{\ii & 0 \\ 0 & -\ii},
    \label{eq:quad-basis}
\end{equation}
它们实际上就是四元数。
可以直接使用以上两式计算出$SU(2)$的生成元，但是这样比较繁琐。
使用$SU(2)$的一般定义\eqref{eq:def-su2}，套用到无穷小变换
\[
    A = I + \ii \epsilon \sigma
\]
上，可以发现$\sigma$是幺正、无迹的矩阵；幺正、无迹的矩阵的一组基（通常称为\concept{泡利矩阵}）为
\begin{equation}
    \sigma_1 = \pmqty{0 & 1 \\ 1 & 0}, \; \sigma_2 = \pmqty{0 & -\ii \\ \ii & 0}, \; \sigma_3 = \pmqty{1 & 0 \\ 0 & -1}.
    \label{eq:sigma-matrix}
\end{equation}
它们也是厄米的。这正好是三个线性独立的矩阵，从而它们就是$SU(2)$的一组彼此独立的生成元。
我们有
\begin{equation}
    \comm{\frac{\sigma_i}{2}}{\frac{\sigma_j}{2}} = \ii \epsilon_{ijk} \frac{\sigma_k}{2},
\end{equation}
这表明$SU(2)$和$SO(3)$的李代数是一致的。

然而，$SU(2)$和$SO(3)$是两个不同的群。%
\footnote{当我们说两个群相同时我们是指它们在群论中同构，也就是说，我们所谓的“群”指的是抽象的群结构而不是具体的矩阵集合。
如果$SU(2)$和$SO(3)$中的元素可以一一对应，且在这个对应下相应的乘法关系不变，
那么这两个群——虽然使用了不同阶数的矩阵来表述——还是相同的。
然而正如我们马上要看到的那样，$SO(3)$中的一个元素可以和$SU(2)$中的两个元素相对应，且这种对应保持相应的乘法关系不变。
因此这两个群不同。}%
要看出这是为什么，考虑$SU(2)$在由\eqref{eq:quad-basis}的所有线性组合形成的空间上的表示。
记
\[
    q = a \mathbf{1} + b \mathbf{i} + c \mathbf{j} + d \mathbf{k}, \quad a^2 + b^2 + c^2 + d^2 = 1,
\]
显然它是$SU(2)$在二维复数空间上的矩阵表示。
可以验证
\[
    q^{-1} = a \mathbf{1} - b \mathbf{i} - c \mathbf{j} - d \mathbf{k},
\]
则$SU(2)$在\eqref{eq:quad-basis}的所有线性组合形成的空间上的作用可写成
\begin{equation}
    x \longrightarrow q x q^{-1}.
    \label{eq:su2-rotation}
\end{equation}
注意我们把$x$当成了算符来看待。
$\reals^3$中的向量$\vb*{v}$与
\begin{equation}
    x = v_1 \mathbf{i} + v_2 \mathbf{j} + v_3 \mathbf{k}
    \label{eq:trans-vec-quad}
\end{equation}
一一对应，且容易证明
\[
    \det x = \abs{\vb*{v}}.
\]
我们注意到
\[
    \det (q x q^{-1}) = (\det q) (\det x) (\det q^{-1}) = \det x,
\]
因此\eqref{eq:su2-rotation}是等距同构。由于$SU(2)$是李群，其表示\eqref{eq:su2-rotation}也必然是可微的。
这表明变换（这是将\eqref{eq:su2-rotation}和\eqref{eq:trans-vec-quad}写在一起的结果）
\[
    \vb*{v} \longrightarrow x \longrightarrow x' = q x q^{-1} \longrightarrow \vb*{v}'
\]
给出了$SO(3)$中全部的成员，而且也仅仅给出这么多成员。
然而，同一个变换\eqref{eq:su2-rotation}实际上对应着两个$q$。
% TODO:证明，不过多半鸽了
这表明$SU(2)$实际上是$SO(3)$的双覆盖。
\eqref{eq:su2-expression}意味着$SU(2)$实际上就是四维球面$S^4$，因此它是单连通群，
因此它是李代数$\mathfrak{so}(3)$——也就是$\mathfrak{su}(2)$——的覆盖群。
所有以$\mathfrak{so}(3)$为李代数的李群中$SU(2)$是最大的。

顺带提一句：以上的推导也表明，一个群在一个特定空间上的表示有时并不能完整地展现这个群的结构。
$\mathfrak{su}(2)$在$\reals^3$上的表示，也就是$\mathfrak{so}(3)$在$\reals^3$上的表示，就是\eqref{eq:generators-of-so3}，
把它放进指数映射中得到的就是$SO(3)$的三阶方阵形式。
因此$SU(2)$和$SO(3)$在$\reals^3$上的表示完全一样。
换而言之，$SU(2)$在$\reals^3$上的表示不是忠实的。
我们需要\eqref{eq:quad-basis}这样更大的空间才能完全展示$SU(2)$的结构。%
\footnote{严格来说本节中我们使用了两种$SU(2)$的表示。
其一是$q$，也就是$\complexes^2$上的表示，其二是\eqref{eq:su2-rotation}，也就是$GL(\complexes^2)$上的表示。
后者和$SO(3)$在$GL(\complexes^2)$上的表示完全一样，但后者中的每一个都对应两个$q$，
两者间的对应就是
\[
    \hat{B} \longrightarrow \hat{A} \hat{B} \hat{A}^{-1},
\]
它并非一一对应。}

\subsubsection{有限维不可约表示}

本节分析$SU(2)$的有限维不可约表示。注意到，$J_1, J_2, J_3$互不对易。因此$J_3$就是$\mathfrak{su}(2)$的一个Cartan子代数。
使用本征值标记这些本征矢为$\ket*{J_3^{(1)}}$, $\ket*{J_3^{(2)}}$, \dots。由于我们仅仅讨论有限维不可约表示，
本征值序列一定有上下限。记最大的本征值为$j$。
现在寻找升降算符。我们将使用寻找李代数中升降算符的一般方法，设升算符形如
\[
    \hat{a}^\dagger = \lambda^j J_j, \quad \comm*{\hat{a}^\dagger}{J_i} = c \hat{a}^\dagger,
\]
并设$f_{ij}^k$为李代数的结构常数，则方程
\[
    (f_{ji}^k - c \delta_j^k) \lambda^j = 0
\]
的非零解给出了全部$c$和$\lambda$。求解得到$c = \pm 1$，$c=1$对应着$\lambda^2 = \ii \lambda^1$，$\lambda^3 = 0$；$c=-1$对应着$\lambda^2 = - \ii \lambda^1$。
这表明有限维表示中仅有的升降算符为
\[
    J_+ \propto \lambda^1 J_1 + \ii \lambda^1 J_2, \quad J- \propto \lambda^1 J_1 - \ii \lambda^1 J_2. 
\]
习惯上我们取
\begin{equation}
    J_+ = \frac{1}{\sqrt{2}} (J_1 + \ii J_2), \quad J_- = \frac{1}{\sqrt{2}} (J_1 - \ii J_2).
\end{equation}
$J_+$让本征值加一，$J_-$让本征值减一。两个算符采取同样的系数是为了让$J_1,J_2,J_3$厄米时，$J_+$和$J_-$互为共轭转置。
容易得到下面的对易关系：
\begin{equation}
    \comm*{J_3}{J_{\pm}} = \pm J_3, \quad \comm*{J_+}{J_-} = J_3.
\end{equation}

从升降算符的定义可以得到
\[
    J_+ \ket{k} = \alpha_k \ket{k+1}, \quad J_- \ket{k+1} = \alpha_k^* \ket{k},
\]
由于$\ket{j}$是本征值最大的本征态，
\[
    J_+ \ket{j} = 0,
\]
从而
\[
    \bra{j} J_- = 0.
\]
我们有
\[
    J_- \ket{j} = \alpha_{j-1}^* \ket{j-1},
\]
两边求模长，
\[
    \begin{aligned}
        \abs{\alpha_{j-1}}^2 &= \abs{J_- \ket{j}}^2 = \mel{j}{J_+ J_-}{j} \\
        &= \mel{j}{J_+ J_-}{j} - \mel{j}{J_- J_+}{j} \\
        &= \mel{j}{[J_+, J_-]}{j} \\
        &= \mel{j}{J_3}{j} = \mel{j}{j}{j} = j.
    \end{aligned}
\]
没有其它条件能够确定$\alpha_{j-1}$具体应该取什么值。这是因为仅仅靠对易关系并不能够确定$J_1$和$J_2$（从而$J_+$和$J_-$）作用在$\ket{k}$上面会得到什么样的结果。
然而，注意到只要是同维度的非奇异有限维表示之间可以通过相似变换相互转换，%TODO真的吗
不失一般性地我们可以认为所有的$\alpha$都是正实数。于是
\[
    \alpha_{j-1} = \sqrt{j}.
\]
另一方面，
\[
    \begin{aligned}
        \abs{\alpha_k}^2 &= \abs{J_- \ket{k+1}}^2 = \mel{k+1}{J_+ J_-}{k+1} \\
        &= \mel{k+1}{[J_+, J_-]}{k+1} + \mel{k+1}{J_- J_+}{k+1} \\
        &= \mel{k+1}{J_3}{k+1} + \abs{J_+ \ket{k+1}} \\
        &= k+1 + \abs{\alpha_{k+1}}^2,
    \end{aligned} 
\]
于是可以递推得到
\[
    \abs{a_k} = \frac{(j+k+1)(j-k)}{2},
\]
得到显式表达式
\begin{equation}
    J_+ \ket{k} = \sqrt{\frac{(j+k+1)(j-k)}{2}} \ket{k+1}, \quad J_- \ket{k} = \sqrt{\frac{(j+k)(j-k+1)}{2}} \ket{k-1}.
    \label{eq:ladder-operators-of-su2}
\end{equation}
由于是有限维表示，反复作用$J_-$在$\ket{j}$上最后一定会得到$0$。由\eqref{eq:ladder-operators-of-su2}，得到零的唯一一种可能就是$k=-j$。这表明从$\ket{j}$出发不断作用$J_-$能够得到的全部非零本征向量为
\[
    \ket{j}, \; \ket{j-1}, \; , \ldots, \; \ket{-j+1}, \; \ket{-j},
\]
而由于$J_+$和$J_-$是仅有的升降算符，它们就是$J_3$仅有的本征向量。
这等价于$j$是半整数，且整个向量空间的维度为$2j+1$。
于是我们找到了$SU(2)$的所有不可约有限维表示。

作为最简单的两个例子：$j=0$时向量空间维数为1，所有李代数中的生成元都是0，而李群中的元素的表示为恒等运算；而在$j=1/2$时向量空间维度为2，相应的表示，使用$\ket{\frac{1}{2}}$和$\ket{-\frac{1}{2}}$为基底，就是$\sigma_1 / 2$，$\sigma_2 / 2$和$\sigma_3 / 2$。

舒尔引理说明，在这种有限维不可约表示中卡西米尔算符的表示一定是单位矩阵的某个倍数，因此可以使用这个倍数来标记有限维不可约表示。
就旋转群而言，
\begin{equation}
    J^2 = (J_1)^2 + (J_2)^2 + (J_3)^2
\end{equation}
足够起到这个作用了。容易验证这的确是一个卡西米尔算符，且
\begin{equation}
    J^2 \ket{k} = j (j+1) \ket{k}.
\end{equation}

$\mathfrak{su}(2)$的任何一个可约表示是若干不可约表示的直和。
我们使用$j$来标记各不可约表示，则$\mathfrak{su}(2)$的任何一个可约表示的基矢量均可以写成$\{\ket{jm}\}$，其中对于标记同一个矢量的$j$和$m$，有
\[
    m = -j, -j+1, \ldots, 0, \ldots, j,
\]
且$j$是半整数。

\subsubsection{无限维表示}

旋转群的李代数的无穷维表示为
\[
    (J_i)_\text{inf} = - ((J_i)_\text{fin} x) \cdot \grad.
\]
由于旋转群和时间维无关，梯度算符也可以看成是仅仅作用在空间维上的。
代入具体的值就得到
\begin{equation}
    J_1 = \ii (x^3 \partial_2 - x^2 \partial_3), \quad J_2 = \ii (x^1 \partial_3 - x^3 \partial_1), \quad
    J_3 = \ii (x^2 \partial_1 - x^1 \partial_2).
    \label{eq:rotation-inf-rep}
\end{equation}
很容易验证，以上三个算符确实满足李代数\eqref{eq:lie-algebra-so3}。

\subsection{洛伦兹群}

\subsubsection{四维闵可夫斯基时空中的洛伦兹矩阵}

首先讨论洛伦兹群在四维闵可夫斯基空间$\reals^{3, 1}$上的表示，也就是保持闵可夫斯基度规%
\footnote{当然，正如我们在欧氏空间的张量分析当中能够看到的那样，如果基矢量彼此不正交，那么度规就不能够写成对角形式。
这里我们实际上已经做了一个不失一般性的设定，要求度规一定是对角的。
这总是可以做到，因为不对角的度规可以通过一个合同变换（这个变换对应着一个坐标变换）变成对角的。}%
\begin{equation}
    \eta \equiv [\eta_{\mu \nu}]_{\mu \nu} = \diag (1, -1, -1, -1)
\end{equation}
不变的全体坐标变换矩阵$O(1,3)$。记这些矩阵中的一个为$\Lambda$，容易看出保持度规不变等价于
\begin{equation}
    \Lambda_\sigma^\mu \Lambda_\rho^\nu \eta_{\mu \nu} = \eta_{\sigma \rho},
\end{equation}
或者如果将$\Lambda$的矩阵形式看成是$[\Lambda^\mu_\nu]_{\mu \nu}$，%
\footnote{更加规范的写法是$\Lambda^\mu_{\ \nu}$，利用“第一个指标是行号、第二个指标是列号”的习惯。相应的也有$\Lambda_{\nu}^{\ \mu}$。
使用这种记号，
\[
    \Lambda_\sigma^\mu \Lambda_\rho^\nu \eta_{\mu \nu} = \Lambda_{\ \sigma}^\mu \eta_{\mu \nu} \Lambda_{\ \rho}^\nu = (\Lambda^T)_\sigma^{\ \mu} \eta_{\mu \nu} \Lambda_{\ \rho}^\nu = \Lambda^T \eta \Lambda.
\]
}%
那么就是
\begin{equation}
    \Lambda^\top \eta \Lambda = \eta.
    \label{eq:lorentz-matrix}
\end{equation}
从\eqref{eq:lorentz-matrix}可以看出
\begin{equation}
    \det \Lambda = \pm 1. 
    \label{eq:det-lorentz}
\end{equation}

\eqref{eq:lorentz-matrix}意味着
\[
    (\Lambda_0^0)^2 - (\Lambda_0^1)^2 - (\Lambda_0^2)^2 - (\Lambda_0^3)^2 = 1,
\]
从而
\begin{equation}
    \Lambda_0^0 = \pm \sqrt{1 + (\Lambda_0^1)^2 + (\Lambda_0^2)^2 + (\Lambda_0^3)^2}.
\end{equation}

现在我们将满足$\det \Lambda = 1 > 0$——也就是说，坐标系的手性不改变——以及$\Lambda_0^0 > 0$——也就是说，变换前的坐标时增加则变换后的坐标时也增加——的变换称为\concept{正规洛伦兹群}。
容易验证这确实是一个群。记之为$SO(1,3)^\uparrow$。
正规洛伦兹群由于不改变时间维的指向，设$a^\mu$是一个四维矢量，则$\theta(a^0)$在正规洛伦兹群下不变，其中$\theta$为阶跃函数。
正规洛伦兹群中的成员称为\concept{洛伦兹变换}。我们不认为接下来要谈到的含有宇称算符和时间反演算符的洛伦兹群成员为洛伦兹变换，因为它们无法通过可微的物理过程实现。

按照$\det \Lambda$和$\Lambda_0^0$的正负，可以将洛伦兹群分成四支。
其中两者皆为正的那一支就是$SO(1,3)^\uparrow$。
考虑矩阵
\begin{equation}
    \Lambda_P = \diag (1, -1, -1, -1), 
\end{equation}
容易看出，$\Lambda_P \Lambda$还是洛伦兹群的成员，并且
\[
    \det \Lambda = - \det (\Lambda_P \Lambda).
\]
它就是\concept{宇称算符}。同样，\concept{时间反演算符}
\begin{equation}
    \Lambda_T = \diag(-1, 1, 1, 1)
\end{equation}
也将一个洛伦兹变换转化为另一个洛伦兹变换，且
\[
    \Lambda_0^0 = - (\Lambda_T \Lambda)_0^0.
\]
由于这两个算符都是可逆的，且可以作用在任何洛伦兹群的成员上，实际上洛伦兹群的四支之间只相差一个宇称算符和/或一个时间反演算符，也就是
\begin{equation}
    O(1, 3) = \{ SO(1,3)^\uparrow, \Lambda_P SO(1,3)^\uparrow, \Lambda_T SO(1,3)^\uparrow, \Lambda_T \Lambda_P SO(1,3)^\uparrow \}.
    \label{eq:4-parts-of-o13}
\end{equation}
需注意除了$SO(1,3)^\uparrow$以外的部分只是陪集，并不能构成群，因为它们没有单位元。

\subsubsection{洛伦兹群的李代数}

洛伦兹群的四支之间不能通过可微的变换相互联系。因此，所谓洛伦兹群的李代数就是$SO(1,3)^\uparrow$的李代数。
洛伦兹群的定义\eqref{eq:lorentz-matrix}含有10个彼此独立的实数方程，因此留下6个自由度。
因此只需要寻找6个生成元就可以得到洛伦兹群的李代数。
由\eqref{eq:lorentz-matrix}可以得到无穷小生成元需要满足的关系为
\begin{equation}
    \eta K + K^\top \eta = 0.
    \label{eq:def-generators-of-lorentz}
\end{equation}
容易验证，设\eqref{eq:generators-of-so3}中的$J$为$J^\text{3dim}$，并定义
\begin{equation}
    J_i = \pmqty{\dmat{0 ,J^\text{3dim}_i}},
\end{equation}
则$J_i$,$i=1, 2, 3$满足\eqref{eq:def-generators-of-lorentz}，这样我们就得到了洛伦兹群的三个生成元。
当然，$SO(3)$实际上是$SO(1,3)^\uparrow$的一部分，因此这是合理的。
通过考虑涉及$x^0$的矩阵，我们可以得到另外三个生成元：
\begin{equation}
    K_1 = \ii \pmqty{0 & 1 & 0 & 0 \\ 1 & 0 & 0 & 0 \\ 0 & 0 & 0 & 0 \\ 0 & 0 & 0 & 0}, \quad 
    K_2 = \ii \pmqty{0 & 0 & 1 & 0 \\ 0 & 0 & 0 & 0 \\ 1 & 0 & 0 & 0 \\ 0 & 0 & 0 & 0}, \quad
    K_3 = \ii \pmqty{0 & 0 & 0 & 1 \\ 0 & 0 & 0 & 0 \\ 0 & 0 & 0 & 0 \\ 1 & 0 & 0 & 0}.
    \label{eq:boost-generators}
\end{equation}
这些生成元对应的李群元素称为\concept{推动}，物理上它们涉及到时间，因此实际上是参考系变换。
每个矩阵前面都加上了$\ii$是为了保持指数映射的形式成立，而我们现在讨论的洛伦兹群中的矩阵都是实数矩阵，因此$\ii \theta \sigma$必须是实数，而由于参数$\theta$是实数，生成元前面就应该多一个纯虚数，否则$\ii \theta \sigma$不会是实数。
请注意\eqref{eq:boost-generators}不是厄米的。这可以预期，因为洛伦兹群涉及推动的部分是无界的，从而不是紧致的——这是闵可夫斯基时空的性质决定的，而非紧致的李群的有限维表示是平凡的。
这也就是我们讨论的洛伦兹群的场表示中，场的分量的变换都是$SU(2)$的表示，因为场的分量的变换对应场的内禀自由度的变换而这应该是幺正的；推动和平移都没有非平凡的有限维幺正表示，前者有有限维非幺正表示，后者干脆没有有限维表示。
容易验证，有下面的对易关系：
\begin{equation}
    \comm*{J_i}{J_j} = \ii \epsilon_{ijk} J_k, \quad \comm*{J_i}{K_j} = \ii \epsilon_{ijk} K_k, \quad \comm*{K_i}{K_j} = - \ii \epsilon_{ijk} J_k.
    \label{eq:lie-algebra-lorentz}
\end{equation}
这就得到了洛伦兹群的李代数。
\eqref{eq:lie-algebra-lorentz}中$J$之间的运算是封闭的，而$K$之间的运算不是封闭的，而且$J$和$K$之间不对易。
但如果定义
\begin{equation}
    N_i^\pm = \frac{1}{2} (J_i \pm \ii K_i),
    \label{eq:def-n-pm}
\end{equation}
就有
\begin{equation}
    \comm{N_i^+}{N_j^+} = \ii \epsilon_{ijk} N_k^+, \quad \comm{N_i^-}{N_j^-} = \ii \epsilon_{ijk} N_l^-, \quad \comm{N^+_i}{N^-_j} = 0.
    \label{eq:two-su2-algebra}
\end{equation}
这表明$SO(1,3)^\uparrow$的李代数是两个$\mathfrak{su}(2)$的直和，或者说是$\mathfrak{sl}(2, \complexes)$。
% 这个关系其实是需要说明的，因为从“两个SU2”的直和推不出$SL(2, \complexes)$
但可以证明，$SO(1,3)^\uparrow$并不是$SL(2, \complexes)$，事实上后者是前者的覆盖群，而且是双覆盖。

现在我们考虑洛伦兹群中的其它三支。事实上，由于\eqref{eq:4-parts-of-o13}，讨论洛伦兹群的作用等价于讨论正规洛伦兹群在四维向量空间以及作用了宇称变换和/或时间反演变换的四维向量空间上的作用。%
\footnote{数学上说，完整的洛伦兹群$O(1,3)$是正规洛伦兹群$SO(1,3)^\uparrow$和$\{I, \Lambda_P, \Lambda_T\}$的半直积。$SO(1,3)^\uparrow$是一个正规子群，因此只需要知道$\Lambda_P$和$\Lambda_T$下$SO(1,3)^\uparrow$的变动即可完全刻画$O(1,3)$。}%
因此只需要讨论$SO(1,3)^\uparrow$在宇称变换和时间反演变换之下会怎么变化，从而只需要讨论生成元$J_i$和$K_i$在宇称变换和时间反演变换之下的变化。
宇称变换，写成分量矩阵的形式，是（取$\mu$为行指标）
\[
    (\Lambda_P)^\mu_\nu = \Lambda_P = \diag(1, -1, -1, -1).
\]
我们没有区分行指标和列指标，因为宇称变换无非是洛伦兹变换的一种，而洛伦兹变换的应用场景中不会出现需要区分行指标和列指标的情况。%
\footnote{洛伦兹变换可以看成一种坐标变换，因此可以把$\Lambda$看成指标变换符号的另一种写法：
\[
    \Lambda_\mu^\nu = \beta_{\mu}^{\nu'}.
\]
由于本文是从洛伦兹群的表示出发讨论问题而淡化“带坐标的流形”这一几何概念，有时对不同坐标系下同一矢量或旋量的各分量我们不使用$x^\mu, x^{\mu'}$这样明确区分坐标系的写法；相反，洛伦兹群的作用被认为是作用在\concept{同一个}向量空间上的算符。
}%
若对一个四维矢量做宇称变换，那么作用在其上的算符——也就是$4\times 4$矩阵——会发生如下所示的变换：%
\footnote{你可能会疑惑为什么这个变换的形式看起来不是
\[
    \hat{B} \longrightarrow \hat{A} \hat{B} \hat{A}^{-1}.
\]
实际上，如果我们使用带撇的记号，那么此变换形如
\[
    A^\mu_{\ \nu} \longrightarrow A^{\mu'}_{\ \nu'} = (\Lambda_P)^{\mu'}_\rho (\Lambda_P)^\sigma_{\nu'} A^\rho_{\ \sigma}.
\]
由于$\Lambda_P$实际上是坐标变换符号，分量矩阵$[(\Lambda_P)^{\mu'}_\rho]_{\mu' \rho}$和$[(\Lambda_P)^\sigma_{\nu'}]_{\sigma \nu'}$的的确确互为逆矩阵。
由于我们使用的度规是正规型，因此无需在意$\Lambda_P$、它的转置或者它的逆的区别——三者实际上是一样的。
}%
\[
    A^\mu_{\ \nu} \longrightarrow (A')^\mu_{\ \nu} = (\Lambda_P)^\mu_\rho (\Lambda_P)^\sigma_\nu A^\rho_{\ \sigma}.
\]
然后简单的计算就表明：
\begin{equation}
    J_i \stackrel{\Lambda_P}{\longrightarrow} J_i, \quad J_i \stackrel{\Lambda_T}{\longrightarrow} J_i, \quad K_i \stackrel{\Lambda_P}{\longrightarrow} - K_i, \quad K_i \stackrel{\Lambda_T}{\longrightarrow} - K_i.
    \label{eq:parity-and-time-reversion-transform}
\end{equation}

\subsubsection{$SO(1,3)^\uparrow$的魏尔旋量表示}\label{sec:weyl-spinor-representation}

为了方便起见，我们把洛伦兹群的表示以及它的双覆盖的表示统称为洛伦兹群的表示。
% TODO：这有没有考虑到$SO(1,3)^\uparrow$以外的部分？
我们先只讨论$SO(1,3)^\uparrow$的表示。完整的洛伦兹群的表示——也就是说考虑了宇称变换和时间反演变换——只需要在$SO(1,3)^\uparrow$的表示上额外增加宇称变换和时间反演变换的规则即可。
由于\eqref{eq:two-su2-algebra}，$SO(1,3)^\uparrow$的有限维表示全部可以看成是两个$SU(2)$的有限维不可约表示的直积，或者若干个这样的直积的直和。
% TODO:直积是怎么来的
我们记$SO(1,3)^\uparrow$的有限维表示为$(j_1, j_2)$，$j_1$和$j_2$分别代表其中一个$SU(2)$的有限维表示的$j$（见\autoref{sec:rotation}）。
通常用$j_1$表示$N^+_i$那部分李代数的$j$，$j_2$代表$N^-_i$那一部分李代数的$j$。
% TODO：标量、旋量、矢量

首先是$(0,0)$表示。这个表示作用在一个$1\times1 = 1$维向量空间上。由之前的讨论，$N^+_i$和$N^-_i$都是零，也就是说，$(0,0)$维表示是一个平凡的、只有恒等运算的表示。
这个向量空间当然就是\concept{标量}，这个表示称为\concept{标量表示}，
其中的对象是单分量的，在洛伦兹变换下不变。
可以证明只有在这种表示下任何对象都不变。也就是说，只有标量在洛伦兹变换下完全不变；多分量对象不可能规洛伦兹变换下完全不变。

接着是$(\frac{1}{2}, 0)$表示。这是一个二维表示，这个表示中，
\begin{equation}
    N^+_i = \frac{\sigma_i}{2}, \quad N^-_i = 0.
\end{equation}
使用\eqref{eq:def-n-pm}可以推导出
\begin{equation}
    J_i = \frac{1}{2} \sigma_i, \quad K_i = - \frac{\ii}{2} \sigma_i.
\end{equation}
于是使用指数映射就能够得到洛伦兹变换下这种二分量对象的变化方式，也就是
\begin{equation}
    R_\theta = \exp \left( \frac{1}{2} \ii \theta_i \sigma_i \right), \quad B_\phi = \exp \left( \frac{1}{2} \phi_i \sigma_i \right).
\end{equation}
值得注意的是，洛伦兹变换下各个分量混合起来的系数一般来说含有虚部。
类似的，$(0, \frac{1}{2})$表示也是一个二维表示，其中
\begin{equation}
    N^+_i = 0, \quad N^-_i = \frac{\sigma_i}{2},
\end{equation}
这又等价于
\begin{equation}
    J_i = \frac{1}{2} \sigma_i, \quad K_i = \frac{\ii}{2} \sigma_i.
\end{equation}
其变换方式为
\begin{equation}
    R_\theta = \exp \left( \frac{1}{2} \ii \theta_i \sigma_i \right), \quad B_\phi = \exp \left( - \frac{1}{2} \phi_i \sigma_i \right).
\end{equation}
我们称$(\frac{1}{2}, 0)$表示为\concept{左手旋量}，$(0, \frac{1}{2})$表示为\concept{右手旋量}。
两者统称为\concept{魏尔旋量}。容易看出，两种旋量在旋转下的变化相同，在推动下的变化差一个负号。

以下，我们仿照向量的指标升降、坐标变换等规则，定义一套旋量的指标升降、坐标变换规则，称为\concept{范德瓦尔登符号}。

\paragraph{旋量度规和指标升降} 首先定义\concept{旋量度规}
\begin{equation}
    \epsilon = \pmqty{0 & 1 \\ -1 & 0},
\end{equation}
为什么叫做这个名字马上可以看到。很容易看出，
\begin{equation}
    (-\epsilon) \epsilon = I, \quad \epsilon \sigma_i^* (-\epsilon) = - \sigma_i. 
    \label{eq:attributes-of-epsilon}
\end{equation}
使用这两个关系式可以证明：若$\chi_L$是一个左手旋量，那么
\begin{equation}
    \chi_L^C = \epsilon\chi_L^*
    \label{eq:left-spinor-c}
\end{equation}
就是一个右手旋量；若$\chi_R$是一个右手旋量，则
\begin{equation}
    \chi_R^C = -\epsilon \chi_R^*
    \label{eq:right-spinor-c}
\end{equation}
就是一个左手旋量。
（方法是，将$R_\theta$或者$B_\phi$作用到$\chi_L$上得到$\chi_L'$，从而可以计算出$(\chi_L^C)'$，然后使用\eqref{eq:attributes-of-epsilon}凑出$(\chi_L^C)'$和$\chi_L$之间的关系）
在\eqref{eq:right-spinor-c}中我们特意加了一个负号，这样
\[
    (\chi_L^C)^C = \chi_L, \quad (\chi_R^C)^C = \chi_R.
\]
请注意$\epsilon$是可逆的，因此，\eqref{eq:left-spinor-c}和\eqref{eq:right-spinor-c}表明有一样多的左手旋量和右手旋量，它们通过\eqref{eq:left-spinor-c}和\eqref{eq:right-spinor-c}一一对应。
一对通过\eqref{eq:left-spinor-c}和\eqref{eq:right-spinor-c}相对应的左手旋量和右手旋量就可以看成一个抽象的魏尔旋量$\chi$分别在$(\frac{1}{2},0)$和$(0, \frac{1}{2})$中的表示。
我们使用$\chi_a$表示$\chi_L$的第$a$个分量，$\chi^{\dot{a}}$表示$\chi_R$的第$a$个分量，那么由于
\[
    \chi_R = \chi_L^C, \quad \chi_L = \chi_R^C,
\]
有
\[
    \chi^{\dot{a}} = \sum_b (\text{the $(a,b)$-element of $\epsilon$}) \cdot \chi_b^*, \quad \chi_a = \sum_b ( - \text{the $(a,b)$-element of $\epsilon$}) \cdot (\chi^{\dot{b}})^*.
\]
于是定义%
\footnote{到目前为止我们还没有赋予上下指标任何意义，所以我们可以任意地规定涉及它们的表达式。此处上下指标看起来和逆变-协变关系很像，虽然它们可能未必可以赋予微分几何中的意义。}
% TODO：真的不行吗？
\begin{equation}
    \epsilon^{ab} = \epsilon^{\dot{a} \dot{b}} = \pmqty{0 & 1 \\ -1 & 0}, \quad \epsilon_{ab} = \epsilon_{\dot{a} \dot{b}} = \pmqty{0 & -1 \\ 1 & 0},
\end{equation}
以及
\begin{equation}
    \chi^{\dot{a}} = (\chi^a)^*, \quad \chi_{\dot{a}} = (\chi_a)^*,
\end{equation}
我们得到了$\chi$在左右手旋量空间中的表示相互切换的公式
\begin{equation}
    \chi^a = \epsilon^{ab} \chi_b, \quad \chi^{\dot{a}} = \epsilon^{\dot{a} \dot{b}} \chi_{\dot{b}}, \quad \chi_a = \epsilon_{ab} \chi^b, \quad \chi_{\dot{a}} = \epsilon_{\dot{a} \dot{b}} \chi^{\dot{b}}.
\end{equation}
其中一上一下两个相同指标要求和。我们看到了$\epsilon$的地位正是矢量分析中度规的地位，因此称它为旋量度规。

使用指标升降的一般理论，我们发现，若
\begin{equation}
    \psi_b = A_b^{\ a} \chi_a, \quad \psi_{\dot{b}} = A_{\dot{b}}^{\ \dot{a}} \chi_{\dot{a}}, \quad \psi^b = A^b_{\ a} \chi^a, \quad \psi^{\dot{b}} = A^{\dot{b}}_{\ \dot{a}} \chi^{\dot{a}},
    \label{eq:linear-operator-on-spinor}
\end{equation}
则
\begin{equation}
    A^c_{\ d} = \epsilon^{cb} A_{b}^{\ a}\epsilon_{ad}, \quad A^{\dot{c}}_{\ \dot{d}} = (A^c_{\ d})^*, \quad A^{\dot{c}}_{\ \dot{d}} = \epsilon^{\dot{c} \dot{b}} A_{\dot{b}}^{\ \dot{a}} \epsilon_{\dot{a}\dot{d}}.
    \label{eq:left-right-matrix-transform}
\end{equation}
通常对作用在左手旋量上的矩阵$A$，规定$A_a^{\ b}$就是$A$，这样\eqref{eq:linear-operator-on-spinor}中的四个式子全部等价于
\[
    \psi_L = A \chi_L.
\]

\paragraph{坐标变换} 得到了指标升降关系，再来看坐标变换关系。按照前述规定，
\[
    (\sigma_i)_b^{\ a} = \sigma_i,
\]
对左手旋量我们有
\[
    \chi'_a = \Lambda_a^{\ b} \chi_b = \exp \left( \frac{1}{2} \ii \theta_i \sigma_i + \frac{1}{2} \phi_i \sigma_i \right)_a^{\; b} \chi_b.
\]
与之对应的右手旋量会怎样变换？很容易想到，应该使用\eqref{eq:left-right-matrix-transform}来得到对应的作用在右手旋量上的变换矩阵。
但实际上右手旋量的变换方式在定义时就已经确定了（因为$(0, \frac{1}{2})$表示本来就是$SO(1,3)^\uparrow$的某种表示）。
我们要验证这两种变换方式是不是一致。
从右手旋量的定义出发我们有（下面的公式是在处理分量，具体指标$a$和$b$是上标还是下标由于没有微分几何的阐释，尚不确定）
\[
    {\chi'}^{\dot{a}} = \sum_b \text{the $(a,b)$-element of } \exp \left( \frac{1}{2} \ii \theta_i \sigma_i - \frac{1}{2} \phi_i \sigma_i \right) \cdot \chi^{\dot{b}} .
\]
而如果右手旋量的洛伦兹变换服从\eqref{eq:left-right-matrix-transform}，那么就有
\[
    {\chi'}^{\dot{a}} = \Lambda^{\dot{a}}_{\ \dot{b}} \chi^{\dot{b}}.
\]
这两种变换方式是一致的，当且仅当
\[
    \text{the $(a,b)$-element of } \exp \left( \frac{1}{2} \ii \theta_i \sigma_i - \frac{1}{2} \phi_i \sigma_i \right) = \sum_{c,d} \epsilon^{\dot{a} \dot{c}} \left(\exp \left( \frac{1}{2} \ii \theta_i \sigma_i + \frac{1}{2} \phi_i \sigma_i \right)_c^{\; d}\right)^* \epsilon_{\dot{d} \dot{b}}
\]
使用$\eqref{eq:attributes-of-epsilon}$很容易证明这确实是对的。
类似的，可以表明$\chi_{\dot{a}}$和$\chi^a$的变换矩阵正是$\Lambda_a^{\ b}$通过\eqref{eq:left-right-matrix-transform}变换得到的。
于是我们就得到了$\Lambda_a^{\ b}$和$\Lambda^{\dot{a}}_{\ \dot{b}}$两个分量矩阵。

朴素地使用指标升降，可以得到
\begin{equation}
    \begin{bigcase}
        \Lambda_a^{\ b} = \exp \left( \frac{1}{2} \ii \theta_i \sigma_i + \frac{1}{2} \phi_i \sigma_i \right)_a^{\ b}, \quad \Lambda^{\dot{a}}_{\ \dot{b}} = \exp \left( \frac{1}{2} \ii \theta_i \sigma_i - \frac{1}{2} \phi_i \sigma_i \right)_a^{\ b}, \\
        \Lambda_{\dot{a}}^{\ \dot{b}} = \exp \left( - \frac{1}{2} \ii \theta_i \sigma_i^* + \frac{1}{2} \phi_i \sigma_i^* \right)_a^{\ b}, \quad \Lambda^{a}_{\ b} = \exp \left( - \frac{1}{2} \ii \theta_i \sigma_i^* - \frac{1}{2} \phi_i \sigma_i^* \right)_a^{\ b},
        \label{eq:lorentz-transform-on-spinors}
    \end{bigcase}
\end{equation}
且它们满足\eqref{eq:left-right-matrix-transform}。
通过$\sigma$矩阵的定义%
\footnote{这里有一个可能引起困惑的细节。在张量代数中，我们有
\[
    (T^\top)_a^{\ b} = T^b_{\ a},
\]
但是在此处我们却似乎写出了这样的表达式：
\[
    (\sigma_a^{\ b})^\top = \sigma_b^{\ a},
\]
两者相差一个指标升降。产生这样的现象的原因在于，当我们通过\eqref{eq:sigma-matrix}定义
\[
    \sigma_a^{\ b} = \sigma
\]
时，左右两边的$\sigma$实际上有微妙的差异——左边的$\sigma$是某种旋量张量，右边的$\sigma$只是一个矩阵。
这就意味着，左边的$\sigma$的转置运算并不是简单的“把矩阵翻转过来”（因为转置之后的结果必须是协变的），$(\sigma^\top)_a^{\ b} = \sigma^b_{\ a}$关于左边的$\sigma$（不是分量矩阵$\sigma_a^{\ b}$！）成立。
然而，\eqref{eq:sigma-matrix}——从而由它导出的$\sigma$矩阵的厄米性——是关于右边的$\sigma$的，也就是说它仅仅关于左边的分量矩阵$\sigma_a^{\ b}$。因此，通过\eqref{eq:sigma-matrix}导出的$\sigma^*=\sigma^\top$中的转置就是简单的将矩阵翻转过来。
\label{note:confusion-by-transpose}
}%
，会发现$\sigma_i^* = \sigma_i^\top$，于是我们还可以得到
\begin{equation}
    \Lambda_{\dot{a}}^{\ \dot{b}} = \exp \left( - \frac{1}{2} \ii \theta_i \sigma_i + \frac{1}{2} \phi_i \sigma_i \right)_b^{\ a}, \quad \Lambda^a_{\ b} = \exp \left( - \frac{1}{2} \ii \theta_i \sigma_i - \frac{1}{2} \phi_i \sigma_i \right)_b^{\ a}.
\end{equation}
可以看到$\Lambda_a^{\ b}$和$\Lambda^b_{\ a}$是不同的，实际上，它们正好互为逆。
这和坐标变换矩阵应该具有的对称性有冲突。
当然，只要采用主动观点，把$\Lambda_a^{\ b}$之类的东西看成保持坐标系不变、改变系统中所有旋量的操作，就不会有任何矛盾。
另一方面，如果把洛伦兹变换看成坐标变换，那么我们是在用$\Lambda_a^{\ b}$表示$\Lambda_{a'}^b$，而在用$\Lambda^b_{\ a}$表示$\Lambda_a^{b'}$。
我们知道$\Lambda_a^{\ b}$确实是$\Lambda_{a'}^{b}$（定义如此），那么对它做指标升降会得到
\[
    \epsilon^{ac} \Lambda_c^{\ d} \epsilon_{db} = \epsilon^{a' c'} \Lambda_{c'}^{d} \epsilon_{db} = \Lambda^{a'}_b,
\]
因此实际上，$\Lambda_a^{\ b}$中下标$a$对应一个洛伦兹变换之后的旋量，上标$b$对应洛伦兹变换之前的旋量；而$\Lambda_{\ a}^b$则正好相反，$b$对应变换前的旋量而$a$对应变换后的旋量，因此如果不考虑$\Lambda$的两个指标实际上是不同基底下的指标而朴素地做升降指标，就会让$\Lambda_a^{\ b}$和$\Lambda^b_{\ a}$不同。
实际上这个情况在普通的张量分析中也会出现。
这样，使用$\Lambda^a_{\ b}$的记号会写成
\[
    \chi'^b = \Lambda^b_{\ a} \chi^a
\]
的洛伦兹变换现在就写成
\[
    \chi'^b = \Lambda_a^{b'} \chi^a,
\]
即$\chi^b$和$\chi_b$的变换可以统一地用简洁的爱因斯坦求和写成
\[
    \chi'^b = \Lambda_a^{b'} \chi^a, \quad \chi'_b = \Lambda_{b'}^a \chi_a.
\]
带点的指标同理。$\Lambda_a^{\ b}$和$\Lambda^b_{\ a}$正好互为逆的事实给出了下面直觉上非常合理的式子：
\begin{equation}
    \Lambda_{a'}^b \Lambda^{a'}_c = \Lambda_a^{\ b} \Lambda^a_{\ c} = \delta_b^a, \quad \Lambda_{\dot{a}'}^{\dot{b}} \Lambda^{\dot{a}'}_{\dot{c}} = \Lambda_{\dot{a}}^{\ \dot{b}} \Lambda^{\dot{a}}_{\ \dot{c}} = \delta_{\dot{c}}^{\dot{b}}.
\end{equation}

\paragraph{不变量} 因此我们已经验证了旋量满足指标升降关系和坐标变换关系，尽管指标升降关系中用到的“度规”并不是对称的。
因此我们可以使用$\chi^{a'}$这样的记号代替${\chi'}^{a}$，也就是说我们把$\chi$看成某种抽象的实体，它在坐标变换之下是不变的。%
\footnote{在微分几何中矢量、张量等可以处理为一个抽象的几何实体，然后定义矢量和张量的分量，然后导出指标升降规则和坐标变换规则；我们这里的步骤则正好相反，我们是首先通过洛伦兹群的表示得到指标升降规则和坐标变换规则，然后发现这两个规则允许我们把$\chi$看成某种抽象的实体。}%

下面我们要讨论使用旋量以及它们的一阶导数能够构造出怎样的标量。这是很重要的，因为如果需要使用旋量场来描述某种物理过程，那么对应的拉氏量应该是标量，或者至少是协变的，也就是说在洛伦兹变换下的变化量能够写成一个散度项。
注意到
\[
    \chi_a \xi^a \longrightarrow \chi'_a {\xi'}^a = \Lambda_a^{\ b} \chi_b \Lambda^a_{\ c} \xi^c = \delta_c^b \chi_b \xi^c = \chi_a \xi^a,
\]
同样的有
\[
    \chi_{\dot{a}} \xi^{\dot{a}} \longrightarrow \chi'_{\dot{a}} {\xi'}^{\dot{a}} = \chi_{\dot{a}} \xi^{\dot{a}}.
\]
但$\chi_a \xi^{\dot{a}}$或者$\chi^{\dot{a}} \xi_a$这种量却没有不变性。
这表明，只有“同类”——也就是都带点或者都不带点——的指标才能够一上一下地求和而得到一个标量。
% TODO：含导数的项

\subsubsection{四维矢量表示}\label{sec:4-vector-representation}

% TODO：是不是洛伦兹群的所有不可约表示都可以使用魏尔旋量直积出来？

我们接着讨论$(\frac{1}{2}, \frac{1}{2})$表示。由于$N_i^-$和$N_i^+$对易，这个表示实际上就是$(\frac{1}{2}, 0) \otimes (0, \frac{1}{2})$，于是这个表示可以使用一个左手旋量和一个右手旋量的张量积表示，记作$v_a^{\dot{b}}$。
% 向量空间中元素的张量积和向量空间上的矩阵或者说算符是不同的——前者实际上不需要考虑什么指标是行、什么指标是列！
% 不过，两者却按照同样的方式变换。
其中每个指标都独立地以\eqref{eq:lorentz-transform-on-spinors}变换。
当然，可以使用指标升降关系把$v_a^{\dot{b}}$转化为$v_{a\dot{b}}$。
这么做的好处在于，我们可以发现$(\frac{1}{2}, \frac{1}{2})$表示实际上可以约化为一个厄米的不可约表示和一个反厄米的不可约表示的直和。%
\footnote{同样，这里所谓的厄米和反厄米也是就分量矩阵$v_{a\dot{b}}$而论的，并不涉及旋量张量$v$的（协变的）转置。见\autoref{note:confusion-by-transpose}。}
注意到
\[
    v'_{c\dot{d}} = \Lambda_c^{\ a} \Lambda_{\dot{d}}^{\ \dot{b}} v_{a\dot{b}},
\]
可以得到
\[
    v'_{d\dot{c}} = \Lambda_d^{\ a} \Lambda_{\dot{c}}^{\ \dot{b}} v_{a\dot{b}} = \Lambda_d^{\ b} \Lambda_{\dot{c}}^{\ \dot{a}} v_{b\dot{a}},
\]
从而
\[
    (v'_{d\dot{c}})^* = \Lambda_{\dot{d}}^{\ \dot{b}} \Lambda_{c}^{\ a} (v_{b\dot{a}})^*.
\]
显然，如果分量矩阵$v_{a\dot{b}}$是厄米的，那么它经过洛伦兹变换之后还是厄米的；如果它是反厄米的，那么经过洛伦兹变换之后它还是反厄米的。
因此$(\frac{1}{2}, \frac{1}{2})$可以分解成其厄米子代数和反厄米子代数的直和。

我们来仔细分析其厄米子代数。二阶厄米方阵组成的向量空间有$2^2 \times 2 / 2 = 4$维。因此只需要找到四个独立的厄米方阵即可。
容易看出，三个泡利矩阵连同单位矩阵构成了这样的一组基。
为便于书写下标，使用$\sigma^i, i=1, 2, 3$表示三个泡利矩阵，又使用$\sigma^0$表示单位矩阵。
我们记$\sigma^\mu_{a\dot{b}}$为$\sigma^\mu$的第$a$行$b$列。（这个记号和\autoref{sec:weyl-spinor-representation}中的$\sigma_a^{\ b}$是不一样的！）
于是就可以把$(\frac{1}{2}, \frac{1}{2})$表示的厄米子代数的成员统一地写成
\begin{equation}
    v_{a\dot{b}} = v_\nu \sigma^\nu_{a\dot{b}}, \quad v_a^{\dot{b}} = \epsilon^{\dot{b} \dot{c}} v_\nu \sigma^\nu_{a \dot{c}}.
    \label{eq:vector-is-spin-tensor}
\end{equation}

% TODO: 严格证明$v$的变换正是洛伦兹变换

于是就可以使用$v_\nu$来代替整个$v_{a\dot{b}}$，并且$v_\nu$的变换方式正是洛伦兹变换下的矢量。
总之，$(\frac{1}{2}, \frac{1}{2})$表示的厄米子代数就是四维矢量。
因此，正如矢量可以看成二阶张量的平方根那样，魏尔旋量也可以看成矢量的平方根。
可以预期，四维矢量不见得能够描述所有的物理系统，因为它们不够基本。
% TODO：反厄米子代数呢？

同样我们考虑四维矢量能够构造出来的二阶的不变量。通过坐标变换关系容易看出，这样的不变量一定具有形式$A^\mu B_\mu$。

\subsubsection{狄拉克旋量}

在\autoref{sec:weyl-spinor-representation}和\autoref{sec:4-vector-representation}中我们只讨论规洛伦兹变换的表示。
当然，完整的洛伦兹群的表示肯定还是旋量，只不过我们还需要指定时间反演变换和宇称变换的表示。
% TODO：相当奇怪好像大家都不关注宇称变换作用在旋量上实际上会是怎样一个变换矩阵，当然似乎这也不重要。
注意到\eqref{eq:parity-and-time-reversion-transform}，并考虑$N_i^\pm$的定义\eqref{eq:def-n-pm}，在宇称变换下
\begin{equation}
    N_i^+ \stackrel{\Lambda_P}{\longrightarrow} N_i^-, \quad N_i^- \stackrel{\Lambda_P}{\longrightarrow} N_i^+.
\end{equation}
这意味着经过宇称变换，原本是$(\frac{1}{2}, 0)$表示的变换矩阵现在变成了$(0, \frac{1}{2})$表示的变换矩阵，原本是$(0, \frac{1}{2})$表示的变换矩阵则变成了$(\frac{1}{2}, 0)$表示的变换矩阵。
也就是说宇称变换下左手旋量按照右手旋量的方式变换，右手旋量按照左手旋量的方式变换。%
\footnote{我们并没有给出宇称变换的变换矩阵到底是什么。实际上因为宇称变换不在正规洛伦兹群中，只靠旋量的定义是不可能完全确定下宇称变换的矩阵表示是什么的。}%
这就是“左手”、“右手”名称的来历：它们之间的变换和左右手坐标系之间的变换是完全一样的。
需要注意的是，$\chi_L$经过宇称变换之后未必变成$\chi_R$，同理$\chi_R$经过宇称变换之后也未必变成$\chi_L$。

如果一个体系在宇称变换之下不变，那么不可能仅仅使用一个左手旋量或者一个右手旋量描述它，因为宇称变换会改变旋量的手征。
因此，完整描述一个体系的物理量一定能够写成一对一对相互匹配的左手旋量和右手旋量。
我们称像这样由一个左手旋量和一个右手旋量组合而成的场
\begin{equation}
    \psi = \pmqty{\chi_L \\ \xi_R}
\end{equation}
为\concept{狄拉克旋量}。它是洛伦兹群的一个可约表示，因为其变换矩阵
\begin{equation}
    \Lambda_\text{Dirac} = \pmqty{\dmat{\Lambda_{(\frac{1}{2}, 0)}, \Lambda_{(0, \frac{1}{2})}}}
\end{equation}
是左手旋量和右手旋量的变换矩阵直和起来得到的结果。
现在我们做一个宇称变换，那么变换矩阵就成为
\[
    \Lambda'_\text{Dirac} = \pmqty{\dmat{\Lambda_{(0, \frac{1}{2})}, \Lambda_{(\frac{1}{2}, 0)}}}.
\]
因此，考虑宇称变换在狄拉克旋量上的表示$(\Lambda_P)_\text{Dirac}$，我们有
\[
    (\Lambda_P)_\text{Dirac} \Lambda_\text{Dirac} (\Lambda_P)_\text{Dirac}^{-1} = \Lambda'_\text{Dirac},
\]
于是
\[
    (\Lambda_P)_\text{Dirac} = a \pmqty{0 & I_{2\times 2} \\ I_{2 \times 2} & 0}.
\]
由于我们考虑的是幺正表示，$a$的模长为1。
请注意宇称变换、时间反演变换和恒等变换自成一个群，因此从有关正规洛伦兹群的表示的任何知识——它们是通过考虑正规洛伦兹群的李代数得到的，和宇称变换没有任何关系——都不可能把$a$的值确定下来。
不失一般性地%TODO：怎么就不失一般性了？？
通常取$a=1$，于是就有
\begin{equation}
    (\Lambda_P)_\text{Dirac} = \pmqty{0 & I_{2\times 2} \\ I_{2 \times 2} & 0}.
\end{equation}
那么狄拉克旋量在宇称变换下的变化就是
\begin{equation}
    \psi \stackrel{\Lambda_P}{\longrightarrow} \psi^P = \pmqty{0 & I_{2\times 2} \\ I_{2 \times 2} & 0} \pmqty{\chi_L \\ \xi_R} = \pmqty{\xi_R \\ \chi_L}.
\end{equation}
也就是说宇称变换把狄拉克旋量变成了另一个同样具有$\chi_L$和$\xi_R$的对象，但是上下位置发生了变化。

狄拉克旋量上可以定义一种重要的变换。它不是洛伦兹变换的一种，其形式为
\begin{equation}
    \psi = \pmqty{\chi_L \\ \xi_R} \longrightarrow \psi^C = \pmqty{\xi_L \\ \chi_R}.
\end{equation}
容易看出变换之后得到的结果还是狄拉克旋量。

\subsubsection{无限维表示}

洛伦兹群的无限维表示完全由旋转生成元的无限维表示和推动生成元的无限维表示确定。
前者已经由\eqref{eq:rotation-inf-rep}给出了。虽然\eqref{eq:rotation-inf-rep}是在三维空间中推导出来的，但是因为推导它时各个坐标的标号和本节一致，都是$x^1, x^2, x^3$，它也适用于四维闵可夫斯基时空。
使用基本上一样的方法，从\eqref{eq:boost-generators}可以导出
\begin{equation}
    K_1 = - \ii (x^1 \partial_0 + x^0 \partial_1), \quad K_2 = - \ii (x^2 \partial_0 + x^0 \partial_2), \quad K_3 = - \ii (x^3 \partial_0 + x^0 \partial_3).
    \label{eq:boost-inf-rep}
\end{equation}

\subsection{庞加莱群}

% TODO：将下标转为上标
正规子群平移群半直积上洛伦兹群就得到了庞加莱群。

现在我们分析庞加莱群的李代数。独立的生成元总共有10个，4个是平移群生成元，3个是旋转生成元，3个是推动生成元。
平移群的李代数为\eqref{eq:comm-of-trans}，而洛伦兹群的李代数为\eqref{eq:lie-algebra-lorentz}，因此只需要$P_\mu$和$J_i,K_i$的对易关系就能够完全确定庞加莱群的李代数。
首先由于旋转操作不涉及时间维，显然我们有
\begin{equation}
    \comm*{J_i}{P_0} = 0.
\end{equation}
使用\eqref{eq:transition-inf-rep}、\eqref{eq:rotation-inf-rep}和\eqref{eq:boost-inf-rep}三式，可以推导出以下关系：
\begin{equation}
    \comm*{J_i}{P_j} = \ii \epsilon_{ijk} P_k, \quad \comm*{K_i}{P_j} = \ii \delta_{ij} P_0, \quad \comm{K_i}{P_0} = - \ii P_i.
    \label{eq:comm-k-j-p}
\end{equation}
虽然使用的是特殊的表示，但由于推导出来的都是对易关系，因此它们普遍成立。
\eqref{eq:comm-k-j-p}和\eqref{eq:lie-algebra-lorentz}给出了庞加莱群的李代数。

为了简化记号，我们设$M_{\mu \nu}$是一个反对称的矩阵，且
\begin{equation}
    J_i = \frac{1}{2} \epsilon_{ijk} M_{jk}, \quad K_i = M_{0i},
\end{equation}
那么\eqref{eq:comm-k-j-p}完全等价于
\begin{equation}
    \comm*{M_{\mu \nu}}{P_\rho} = \ii (\eta_{\mu \rho} P_\nu - \eta_{\nu \rho} P_\mu),
    \label{eq:comm-m-p}
\end{equation}
而\eqref{eq:lie-algebra-lorentz}等价于
\begin{equation}
    \comm{M_{\mu \nu}}{M_{\rho \sigma}}  = \ii (\eta_{\mu \rho} M_{\nu \sigma} + \eta_{\nu \sigma} M_{\mu \rho} - \eta_{\mu \sigma} M_{\nu \rho} - \eta_{\nu \rho} M_{\mu \sigma}).
    \label{eq:comm-m}
\end{equation}
\eqref{eq:comm-of-trans}，\eqref{eq:comm-m-p}和\eqref{eq:comm-m}共同描述了庞加莱群的李代数。
% TODO：上面的几个公式有没有指标升降？
% TODO:建立群元的升降指标关系

庞加莱群的群参数一共有10个，在定义了$M$之后我们可以把群参数写成$a^\mu$和$\omega^{\mu \nu}$，其中$\omega$是反对称矩阵，从而庞加莱群就可以写成
\[
    \Lambda = \exp \left( \ii a^\mu P_\mu + \ii \omega^{\mu \nu} M_{\mu \nu} \right).
\]
实际上，即使$\omega$不是反对称的，上式照样给出庞加莱群，因为$\omega$的对称部分和$M$相乘得到的一定是零。反对称的要求仅仅是让每个变换对应唯一一个群参数。

庞加莱群的卡西米尔元有两个，它们分别是
\begin{equation}
    P_\mu P^\mu = m^2,
    \label{eq:momentum-and-mass}
\end{equation}
和
\begin{equation}
    W_\mu W^\mu = j_1 + j_2 = j,
\end{equation}
其中
\begin{equation}
    W^\mu = \frac{1}{2} \epsilon^{\mu \nu \rho \sigma} P_\nu M_{\rho \sigma}.
\end{equation}

我们使用$P_\mu P^\mu$给出的$m^2$实际上正是该表示下场的质量的平方。详情见\autoref{sec:k-g-eq}。

\subsection{对称性操作和守恒量}

\subsubsection{连续对称性对应的守恒量}

首先是最简单的平移。处理平移时假定场是标量场，这无损一般性，因为平移没有有限维表示，因此不会导致场分量发生混合。
平移变换作用于场上得到的结果是：
\[
    \begin{split}
        x^\mu \longrightarrow {x'}^{\mu} = x^\mu + a^\mu, \\
        \bar{\var}{\phi} = \phi'(x') - \phi(x) = 0.
    \end{split}
\]
平移变换导致的场的变化（就是没有变化）的扣除了坐标变化导致的影响的场的变化就是
\[
    \var{\phi} = \bar{\var}{\phi} - \partial_\mu \phi \var{x}^\mu = - \partial_\mu \phi \var{a^\mu},
\]
或者，由于场在坐标拖曳下的变动实际上就是平移变换的无限维表示，可以直接使用\eqref{eq:transition-inf-rep}得到上式。
于是对应的守恒流为
\[
    0 = \partial_\mu \left( - \pdv{\mathcal{L}}{\partial_\mu \phi} \partial_\nu \phi \var{a^\nu} + \mathcal{L} \var{a^\mu} \right) 
    = \partial_\mu \left( - \pdv{\mathcal{L}}{\partial_\mu \phi} \partial_\nu \phi + \mathcal{L} \delta^\mu_\nu \right) \var{a^\nu},
\]
考虑到$\var{a^\mu}$的任意性，我们有
\begin{equation}
    T_\mu^\nu = \pdv{\mathcal{L}}{\partial_\nu \phi} \partial_\mu \phi - \mathcal{L} \delta^\nu_\mu, \quad \partial_\nu T_\mu^\nu = 0.
\end{equation}
我们称$T^\nu_\mu$为\concept{能动张量}。它给出了4个守恒荷，其中一个是来自时间平移不变性的\concept{能量}
\begin{equation}
    E = \int \dd[3]{x} T^0_0 = \int \dd[3]{x} \left( \pdv{\mathcal{L}}{\partial_0 \phi} \partial_0 \phi - \mathcal{L} \right) ,
    \label{eq:field-energy}
\end{equation}
很容易看出$\mu=0$时这就是在做从拉氏量到哈密顿量的勒让德变换，即上式确确实实就是能量。
另外三个是来自空间平移不变性的\concept{动量}
\begin{equation}
    P_i = \int \dd[3]{x} T^0_i = \int \dd[3]{x} \pdv{\mathcal{L}}{\partial_0 \phi} \partial_i \phi .
    \label{eq:field-momentum}
\end{equation}
能动张量的纯空间部分是能量和动量的输运流，因此就是\concept{应力张量}。%
\footnote{在非相对论连续介质力学中这些结果也是成立的，因为时间和空间平移同时出现在伽利略群和庞加莱群中。}
相应的，
\begin{equation}
    \mathcal{P}_\mu = \pdv{\mathcal{L}}{\partial_0 \phi} \partial_\mu \phi - g_\mu^0 \mathcal{L}
\end{equation}
为四维动量$(E, \vb*{p})$的密度。
在计算场的三维动量时要注意一点：由于闵可夫斯基度规为$(+, -, -, -)$，闵可夫斯基时空中空间部分的基矢量实际上是指向空间坐标减少的方向的。从而，
\[
    \begin{aligned}
        \vb*{P} &= \int \dd[3]{x} \pdv{\mathcal{L}}{\partial_0 \phi} \partial_i \phi \vb*{g}^i \\
        &= - \int \dd[3]{x} \pdv{\mathcal{L}}{\partial_0 \phi} \partial_i \phi \vb*{g}^i_{\text{3dim}},
    \end{aligned}
\]
也即
\begin{equation}
    \vb*{P} = - \int \dd[3]{\vb*{x}} \pi \grad{\phi}.
\end{equation}

接下来是旋转对称性。%
\footnote{同样，这个对称性无论是在相对论性场论还是非相对论性场论中都是成立的。}%
旋转对称性不涉及时间维，于是我们有
\[
    \var{x^i} = \epsilon^i_{\ jk}  x^j \theta^k,
\]
相应的
\[
    \bar{\var}{\phi^a} = \ii (J_i)^a_{\ b} \theta^i \phi^b - \epsilon^i_{\ jk}  x^j \theta^k \partial_i \phi^a.
\]
其中指标$a,b$跑遍$\phi$的所有分量，$J$指的是旋转生成元在$\phi$所属的向量空间上的表示，具体表达式见\autoref{sec:rotation}。
我们使用了$\epsilon^i_{jk}  x^j \theta^k$这样的记号是因为要与\eqref{eq:generators-of-so3}保持一致，因为若取$J$为\eqref{eq:generators-of-so3}，正好就有
\[
    \epsilon^i_{\ jk}  x^j \theta^k = (\ii \theta^k J_k x)^i.
\]
则诺特定理导致的守恒流为
\[
    \begin{aligned}
        0 &= \partial_0 \left( \pdv{\mathcal{L}}{\partial_0 \phi^a} \left( \ii (J_k)^a_b \theta^k \phi^b - \epsilon^i_{\ jk}  x^j \theta^k \partial_i \phi^a \right) \right) + \partial_i (\text{something}) \\
        &= \theta^k \partial_0 \left( \ii (J_k)^a_b \phi^b \pdv{\mathcal{L}}{\partial_0 \phi^a} - \epsilon^i_{\ jk} x^j \mathcal{P}_i \right) \\
        &= \theta^k \partial_0 \left( \ii (J_k)^a_b \phi^b \pdv{\mathcal{L}}{\partial_0 \phi^a} + \epsilon^i_{\ jk} x^j \mathcal{P}_i \right),
    \end{aligned}
\]
于是我们就得到了一个守恒量 % TODO:正负号
\begin{equation}
    L_k = \int \dd[3]{\vb*{x}} \left( \ii (J_k)^a_b \phi^b \pdv{\mathcal{L}}{\partial_0 \phi^a} + \epsilon^i_{\ jk} x^j \mathcal{P}_i \right).
    \label{eq:field-angular-momentum}
\end{equation}
其中的
\begin{equation}
    \mathcal{M}_k = \epsilon^i_{\ jk} x^j \mathcal{P}_i 
\end{equation}
部分和质点的角动量形式一致，称为\concept{轨道角动量}，另一部分
\begin{equation}
    \mathcal{S}_k = \ii (J_k)^a_b \phi^b \pdv{\mathcal{L}}{\partial_0 \phi^a}
    \label{eq:spin-angular-momentum}
\end{equation}
则不会出现在没有内部结构的质点的角动量内部。由于其形式和有自转的粒子除去轨道角动量以外的角动量一致，称其为\concept{自旋角动量}。
正如其名称暗示的那样，自旋角动量源自场的内禀旋转自由度，也就是说，旋转群在场上的表示不仅仅含有无穷维的表示，还含有一个有限维的表示的时候就会出现自旋角动量。
如果场是标量场，那么旋转群在其上的有限维表示就是平凡的，此时$J_i$全部为零，就没有自旋角动量。

以上推导在有相互作用时可能是不安全的，因为此时涉及多个场，且相互作用会引入额外的能量，从而难以良定义“一个场的能量”或是“一个场的动量”。

\subsubsection{宇称、正反粒子变换和时间反演}

时间反演变换造成的结果和宇称变换完全一样，除了具体的变换矩阵差一个负号。

% TODO:矢量在宇称变换之下的变换

\section{单粒子态}\label{sec:single-particle}

% TODO：将本节的非相对论性内容移动到别处，而加入相对论性单粒子态的东西，尤其是动量之类；二次量子化的一般手续也要放到这里

虽然本文主要是关于相对论性量子场论的，绕过场的概念直接分析单粒子态仍然是有益的。
所谓单粒子态应该能够使用粒子位置和一些附加的自由度完全描述。

\subsection{粒子的自由度}\label{sec:single-particle-quantity}

\subsubsection{位置算符与动量算符}\label{sec:position-and-momentum}

先考虑一维的位置算符$\hat{x}$。由于我们认为$\hat{x}$对应\concept{位置}，其谱为连续谱，本征值没有上下界，而是跑遍整个实数轴%
\footnote{注意这是\concept{定义}：我们单纯构造了一个李代数，仅此而已。这一步实际上并没有用到任何物理概念。}%
。
于是，我们考虑一个可以完全由$\hat{x}$描述的希尔伯特空间$\mathcal{H}_{1\text{d}}$，在其上我们可以写出
\begin{equation}
    \hat{x} = \int \dd{x} x \dyad{x},
\end{equation}
有
\begin{equation}
    \hat{x} \ket{x'} = x' \ket{x'},
\end{equation}
其中$\ket{x'}$代表位置在$x'$的本征态。

很自然地，我们考虑空间平移群导致的物理量。空间平移群是李群，它在$\mathcal{H}_{1\text{d}}$上有幺正表示，则其生成元是厄米的，从而是一个可观察量。设%
\footnote{容易看出这代表
\[
    \hat{p} = \ii \pdv{\hat{Q}}{x},
\]
刚好和一般的定义差了一个负号。这是因为平移群对“场算符”位置$\hat{x}$的作用是
\[
    \hat{x} \stackrel{Q_\text{operator}}{\longrightarrow} \hat{x} + a,
\]
使用同一个群参数$a$，上式按照\eqref{eq:field-and-state-corr}诱导出的在态矢量上的作用就是
\[
    \ket{x} \stackrel{Q_\text{operator}}{\longrightarrow} \ket{x - a}.
\]
然而，我们通常希望空间平移群在态矢量上的作用是
\[
    \ket{x} \stackrel{Q_\text{state}}{\longrightarrow} \ket{x + a},
\]
因此为了让$Q_\text{operator}$按\eqref{eq:field-and-state-corr}诱导出的在态矢量上的作用的生成元和$Q_\text{state}$的生成元一致，在定义$Q_\text{state}$的生成元时我们特意加了一个负号。正文中的$\hat{Q}$指的都是$Q_\text{state}$。
\label{note:state-and-operator-minus-symbol}}
\begin{equation}
    \hat{Q}(\dd{x}) = \hat{I} + \frac{1}{\ii} \dd{x} \hat{p},
\end{equation}
其中$\hat{p}$是一个不显含任何参量的厄米算符。容易看出它具有动量量纲。
注意到
\[
    \begin{split}
        \hat{x} \hat{Q}(\dd{x'}) \ket{x'} = \hat{x} \ket{x' + \dd{x'}} = (x' + \dd{x'}) \ket{x' + \dd{x'}}, \\
        \hat{Q}(\dd{x'}) \hat{x} \ket{x'} = \hat{Q}(\dd{x'}) x' \ket{x'} = x' \hat{Q}(\dd{x'}) \ket{x'} = x' \ket{x' + \dd{x'}},
    \end{split}
\]
就有
\[
    [\hat{x}, \hat{Q}(\dd{x'})] \ket{x'} = \dd{x'} \ket{x' + \dd{x'}} \approx \dd{x'} \ket{x'}.
\]
考虑到$\ket{x'}$的任意性，我们得到
\[
    [\hat{x}, \hat{Q}(\dd{x'})] = \left[\hat{x}, \hat{I} + \frac{1}{\ii} \dd{x} \hat{p}\right] = \hat{I},
\]
从而
\begin{equation}
    [\hat{x}, \hat{p}] = \ii . 
    \label{eq:x-p-commutator-1d}   
\end{equation}
对易关系\eqref{eq:x-p-commutator-1d}完全确定了$\hat{x}$和$\hat{p}$的李代数结构。
实际上，完全可以使用更加简单的方法获得\eqref{eq:x-p-commutator-1d}。设一维空间平移群在$\mathcal{H}_\text{1d}$上的表示为$\hat{p}$。一维空间平移群对算符$\hat{x}$的作用的微分为
\[
    \frac{1}{\ii} \dv{a} {((x + a) - x)} = - \ii,
\]
从而由算符上的场表示和态空间上的表示之间的关系\eqref{eq:field-and-state-corr}，我们有
\[
    \comm{\hat{p}}{\hat{x}} = - \ii,
\]
就得到了\eqref{eq:x-p-commutator-1d}。

我们来分析动量算符在坐标表象下的表示。
我们有
\[
    \begin{aligned}
        (1 - \ii \hat{p} \dd{x}) \ket{\psi} &= \hat{Q}(\dd{x'}) \ket{\psi} \\
        &= \int \dd{x'} \hat{Q}(\dd{x}) \ket{x'} \braket{x'}{\psi} \\
        &= \int \dd{x'} \ket{x' + \dd{x}} \braket{x'}{\psi} \\
        &= \int \dd{x'} \ket{x'} \braket{x' - \dd{x}}{\psi} \\
        &= \int \dd{x'} \ket{x'} \left(\braket{x'}{\psi} - \dd{x} \pdv{x'} \braket{x'}{\psi} \right) \\
        &= \ket{\psi} - \dd{x} \int \dd{x'} \ket{x'} \pdv{x'} \braket{x'}{\psi}, 
    \end{aligned}
\]
从而
\begin{equation}
    \hat{p} \ket{\psi} = - \ii \int \dd{x'} \ket{x'} \pdv{x'} \braket{x'}{\psi},
\end{equation}
或者等价的，
\begin{equation}
    \mel{x}{\hat{p}}{\psi} = - \ii \pdv{x} \braket{x}{\psi}.
    \label{eq:p-in-x-representation-1d}
\end{equation}
当然，完全可以使用空间平移群在无限维空间上的表示得到这个结果；由\autoref{note:state-and-operator-minus-symbol}，虽然使用同一个群参数的空间平移群在算符$\hat{x}$和态$\ket{x}$上的作用正好是相反的，但由于定义$\hat{p}$时已经考虑了这一点，从\eqref{eq:transition-inf-rep}就能够得到\eqref{eq:p-in-x-representation-1d}。

从\eqref{eq:p-in-x-representation-1d}可以导出位置的本征态和动量本征态之间的切换关系。取$\ket{\psi}$为$\ket{p}$，我们有
\[
    \mel{x}{\hat{p}}{p} = - \ii \pdv{x} \braket{x}{p} = \mel{x}{p}{p} = p \braket{x}{p},
\]
即微分方程
\[
    \pdv{x} \braket{x}{p} = \ii p \braket{x}{p},
\]
从而
\[
    \braket{x}{p} = C \ee^{\ii p x}.
\]
由于总是可以在所有$\ket{p}$上一起乘上一个模长为1的常数而不产生任何影响，不失一般性地我们取$C$为实数。
归一化条件为
\[
    \delta(p - p') = \braket{p}{p'} = \int \dd{x} \braket{p}{x} \braket{x}{p'},
\]
从而计算得到
\begin{equation}
    \braket{x}{p} = \frac{1}{\sqrt{2\pi}} \ee^{\ii p x}.
\end{equation}
这表明坐标表象和动量表象之间的变换是傅里叶变换。

下面转而讨论三维的情况。三维位置算符$\hat{\vb*{x}}$指的是
\begin{equation}
    \hat{\vb*{x}} = \hat{x}^1 \vb*{e}_1 + \hat{x}^2 \vb*{e}_2 + \hat{x}^3 \vb*{e}_3,
\end{equation}
其中为方便起见选取$\vb*{e}_1, \vb*{e}_2, \vb*{e}_3$为一组规范正交基。
$\hat{x}^1, \hat{x}^2, \hat{x}^3$的本征值均跑遍整条实数轴，因此$\hat{\vb*{x}}$的本征值是$\reals^3$中全体矢量。
我们还需要加入另一个假设：$\hat{x}^1, \hat{x}^2, \hat{x}^3$彼此对易。这个假设要求这三个算符满足某种“独立性”。
在一个完全能够由$\hat{\vb*{x}}$描述的希尔伯特空间$\mathcal{H}_{3\text{d}}$中我们写出其形式
\begin{equation}
    \hat{\vb*{x}} = \int \dd[3]{\vb*{x}} \vb*{x} \dyad{\vb*{x}} 
    = \int \dd[3]{\vb*{x}} (\hat{x}^1 \vb*{e}_1 + \hat{x}^2 \vb*{e}_2 + \hat{x}^3 \vb*{e}_3) \dyad{x^1, x^2, x^3}.
\end{equation}

沿着$\vb*{e}_1, \vb*{e}_2, \vb*{e}_3$的平移操作是对易的，这就意味着
\begin{equation}
    [\hat{p}_1, \hat{p}_2] = [\hat{p}_2, \hat{p}_3] = [\hat{p}_3, \hat{p}_1] = 0.
\end{equation}
所有生成元彼此对易。这样三维空间平移群的李代数就被拆分成了三个一维空间平移群的李代数的直和，三维空间平移群就被拆分成了三个一维空间平移群的直积。
这三个一维空间平移群分别是$x^1$方向上的平移群$\hat{Q}_1(a)$，$x^2$方向上的平移群$\hat{Q}_2(a)$，以及$x^3$方向上的平移群$\hat{Q}_3(a)$。
另一方面，注意到三维位置算符对应的本征态张成的空间$\{ \ket{x^1, x^2, x^3} \}_{x_1,x_2,x_3}$实际上是三个一维位置算符对应的本征态张成的空间的直积，
这是因为$\hat{x}^1, \hat{x}^2, \hat{x}^3$彼此对易。于是我们做拆分
\[
    \mathcal{H}_\text{3d} = \mathcal{H}_\text{1d1} \otimes \mathcal{H}_\text{1d2} \otimes \mathcal{H}_\text{1d3},
\]
并且用$\hat{x}^1$完全描述$\mathcal{H}_\text{1d1}$，用$\hat{x}_2$完全描述$\mathcal{H}_\text{1d2}$，用$\hat{x}_3$完全描述$\mathcal{H}_\text{1d3}$。
由于$\hat{Q}_1(a)$不改变$x^2, x^3$，它在$\mathcal{H}_\text{1d2},\mathcal{H}_\text{1d3}$上没有作用。同样也可以对$\hat{Q}_2(a),\hat{Q}_3(a)$做同样的论证。从而，下标不一样的$\hat{x}^i$和$\hat{p}_i$彼此对易。
这样关于诸$\hat{x}$和诸$\hat{p}$的李代数就可以拆分成$\{\hat{x}^1, \hat{p}_1\}$、$\{\hat{x}^2, \hat{p}_2\}$和$\{\hat{x}^3, \hat{p}_3\}$三对量的李代数的直和。
最后注意到在每个空间$\mathcal{H}_\text{1d$i$}$中，
\[
    \hat{Q}_i(a) \ket{x^i} = \ket{x^i + a},
\]
于是我们可以原封不动地套用对一维动量和位置的论证，得到
\[
    [\hat{x}^i, \hat{p}_i] = \ii \delta_{j}^i.
\]
于是，在没有做任何计算，而只是观念性地拆分了态空间之后，我们得到三维情况下的动量-位置对易关系：
\begin{equation}
    [\hat{x}^i, \hat{x}^j] = 0, \quad [\hat{p}_i, \hat{p}_j] = 0, \quad [\hat{x}^i, \hat{p}_j] = \ii .
\end{equation}
同样，也可以通过\eqref{eq:field-and-state-corr}得到上式。
同样，套用一维动量和位置的论证，我们得到动量算符在坐标表象下的形式
\begin{equation}
    \mel{\vb*{x}}{\hat{\vb*{p}}}{\psi} = - \ii \grad{\braket{\vb*{x}}{\psi}},
    \label{eq:p-in-x-representation}
\end{equation}
以及相应的表象变换矩阵
\begin{equation}
    \braket{\vb*{x}}{\vb*{p}} = \frac{1}{(2\pi)^{3/2}} \ee^{\ii \vb*{p} \cdot \vb*{x}}.
    \label{eq:x-p-trans}
\end{equation}

以上我们讨论了三维动量表象。但实际上，空间平移群是在闵可夫斯基时空中的，因此我们还可以讨论四维动量表象。
所谓四维动量就是四维空间平移群的场表示按照\eqref{eq:field-and-state-corr}产生的、作用在态矢量上的生成元。
它的空间部分就是我们已知的$\hat{p}$，它的时间部分$\hat{E}$满足
\[
    - \ii \pdv{\psi}{t} = [\hat{E}, \psi],
\]
其中$\psi$是某个场。因此$\hat{E}$就是能量。我们不说这是哈密顿量是因为它仅仅关于被讨论的单个粒子，而真正的哈密顿量应该关于整个体系。
按照\autoref{sec:translation}中的描述，四维动量的四个分量彼此对易。因此，四维矢量算符$\hat{p}^\mu$似乎应该是态空间
\[
    \{\ket{p}\}_p = \{\ket{\vb*{p}} \ket{E}\}
\]
的CSCO。然而，完整地描述单粒子的坐标空间实际上并不需要全部的$\{\ket{\vb*{p}} \ket{E}\}$——这是当然的，既然使用$\hat{p}$已经能够完整描述态空间了。
事实上，考虑到\eqref{eq:momentum-and-mass}，我们有
\begin{equation}
    \hat{E}^2 - \hat{\vb*{p}}^2 = m^2,
\end{equation}
如果态$\ket{p}$描述的是坐标空间中的某个态，就可以把上式作用在$\ket{p}$上：
\[
    \begin{aligned}
        m^2 \ket{p} &= \hat{E}^2 \ket{p} - \hat{\vb*{p}}^2 \ket{p} \\
        &= (E^2 - \vb*{p}^2) \ket{p},
    \end{aligned}
\]
从而
\[
    m^2 = E^2 - \vb*{p}^2 = p_\mu p^\mu.
\]
为了保证$E$的单值性我们要求$E>0$，于是
\begin{equation}
    m^2 = E^2 - \vb*{p}^2 = p_\mu p^\mu, \quad E > 0.
    \label{eq:mass-shell}
\end{equation}
我们看到，\eqref{eq:mass-shell}在四维闵可夫斯基时空中选出了一个三维的子流形。我们称这个子流形为\concept{质壳}。
态$\ket{p}$描述了一个实际的单粒子的坐标空间，当且仅当，$p$在质壳\eqref{eq:mass-shell}上，或者说$p$\concept{在壳}。
从而，给定一个$\vb*{p}$，我们把使用质壳方程写出的对应能量记作
\begin{equation}
    \omega_{\vb*{p}} = \sqrt{ m^2 + \vb*{p}^2 }.
\end{equation}

到现在为止这里的$m$都完全是一个来自群表示论的参数。然而，我们将在\autoref{sec:k-g-eq}中看到，这里的$m$和场的克莱因-高登方程中的$m$是同一个东西，而随后退化到非相对论情况后，我们会发现这个$m$实际上根本就是粒子质量。

由于$\eqref{eq:mass-shell}$让我们能够从$\vb*{p}$直接导出$p_0$也就是$E$，实际上完全可以使用$\vb*{p}$来标记在质壳上的$\ket{p}$。但我们并没有这么做，原因马上可以看到。
现在我们来归一化$\ket{p}$。因为我们在四维闵可夫斯基时空中工作，不再能够使用$\int \dd[3]{\vb*{p}}$来做归一化了，因为它不满足洛伦兹协变性：做一个洛伦兹变换，就有可能把一部分$\vb*{p}$弄到$p_0$中。
因此我们需要在四维矢量空间上定义一个积分测度，它只能在质壳上给出非零值，且这个积分测度必须是洛伦兹标量。
容易看出，
\[
    \int \dd[4]{p} \delta(p^2 - m^2) \theta(p_0)
\]
正是一个满足这种条件的积分测度。实际上，质壳是两个对顶的四维锥面，以上积分相当于对其中一个超锥面做积分。因此归一化条件为
\[
    1 = \int \dd[4]{p} \delta(p^2 - m^2) \theta(p_0) \dyad{p}.
\]
由于
\[
    \begin{aligned}
        \int \dd[4]{p} \delta(p^2 - m^2) \theta(p_0) &= \int \dd[3]{\vb*{p}} \int \dd{p_0} \delta (p_0^2 - \vb*{p}^2 - m^2) \theta(p_0) \\
        &= \int \dd[3]{\vb*{p}} \int \dd{p_0} \left( \frac{\delta(p_0 - \omega_{\vb*{p}})}{2 \omega_{\vb*{p}}} + \frac{\delta(p_0 + \omega_{\vb*{p}})}{- 2 \omega_{\vb*{p}}} \right) \theta (p_0) \\
        &= \int \frac{\dd[3]{\vb*{p}}}{2 \omega_{\vb*{p}}},
    \end{aligned}
\]
我们得到
\[
    \int \frac{\dd[3]{\vb*{p}}}{2\omega_{\vb*{p}}} \dyad{p} = 1.
\]
此时得到的$\ket{p}$是洛伦兹不变的，用于求和动量模式的积分测度$\dd[3]{\vb*{p}} / 2 \omega_{\vb*{p}}$也是洛伦兹不变的。
另一方面，单粒子量子力学中动量本征态通常不是用上式归一化的。我们于是需要在这两种动量本征态之间建立一个关系。
我们不失一般性地认为在壳的$\ket{p}$就在单粒子量子力学的坐标空间中，且由于$\ket{p}$与以它的空间部分$\vb*{p}$为标记的态$\ket{\vb*{p}}$一一对应，不失一般性地要求$\ket{p}$和$\ket{\vb*{p}}$差一个实数。
例如，下式是一种常用的归一化方案：
\[
    \int \dd[3]{\vb*{p}} \dyad{\vb*{p}} = 1, \quad \braket{\vb*{q}}{\vb*{p}} = \delta^3(\vb*{q} - \vb*{p}),
\]
在此假设下就有
\begin{equation}
    \ket{p} = \sqrt{2 \omega_{\text{p}}} \ket{\vb*{p}}.
\end{equation}
在三维动量空间中，$\ket{p}$是没有被归一化的；但在质壳中，$\ket{\vb*{p}}$反而是没有被归一化的那个。
为了保证洛伦兹协变性，在讨论相对论性量子场论时多用$\ket{p}$而不是$\ket{\vb*{p}}$，虽然它们表示的物理状态完全是一样的。
在坐标表象和$p$表象之间切换只需要使用
\begin{equation}
    \braket{\vb*{x}}{p} = \sqrt{\frac{2 \omega_{\vb*{p}}}{(2\pi)^3}} \ee^{\ii \vb*{p} \cdot \vb*{x}}.
    \label{eq:relativity-x-p-trans}
\end{equation}
但实际上这个公式很少真的被使用，因为一来相对论情况下很少需要讨论粒子位置，二来从相对论动量表象也就是$p$表象切换回$\vb*{x}$表象时需要使用积分测度$\int \dd[3]{\vb*{x}}$，而这不是洛伦兹协变的。由于我们在实际计算时有时需要将时间单独拿出来当成一个“演化参数”来看待而不是把它当成坐标，通常不讨论$\int \dd[3]{\vb*{x}}$的洛伦兹协变版本，从而从$p$表象切换回$\vb*{x}$表象会有困难，我们也不去理会它。

在本文中，我们还需要对上式做一个小小的调整。如\autoref{sec:canonical-general}所示，我们希望动量本征态可以直接由产生算符作用在真空态上产生，而产生算符是（坐标表象下的）场算符的傅里叶分量。
将坐标表象下的场算符展开成傅里叶分量时需要对所有动量取值求和，而通常我们使用积分测度$\int \dd[3]{\vb*{p}} / (2\pi)^3$，于是我们转而使用归一化方案
\begin{equation}
    \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \dyad{\vb*{p}} = 1, \quad \braket{\vb*{q}}{\vb*{p}} = (2\pi)^3 \delta^3(\vb*{q} - \vb*{p}),
\end{equation}
但是为了让
\begin{equation}
    \ket{p} =  \sqrt{2 \omega_{\text{p}}} \ket{\vb*{p}}
    \label{eq:relativity-p}
\end{equation}
仍然成立，$\ket{p}$的归一化可能看起来比较奇怪：
\begin{equation}
    \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3 2 \omega_{\vb*{p}}} \dyad{p} = 1.
    \label{eq:strange-p-state}
\end{equation}

\subsubsection{角动量}

% TODO：把指标升降放到最后做

角动量算符就是旋转生成元在态矢量上的表示。有限维的旋转生成元是一些矩阵，它们实际上就是三个方向上的角动量算符在$\hat{J}_z$的本征态上的分量矩阵（为什么是$\hat{J}_z$是因为在导出具体的矩阵表达式时是使用$J_x$和$J_y$构造$J_z$的本征态的产生湮灭算符的）。
与\autoref{note:state-and-operator-minus-symbol}中提到的类似，如果旋转群$\hat{R}(\vb*{\phi})$是直接作用在态上的，那么定义
\begin{equation}
    \hat{R}(\vb*{\phi}) = \hat{I} + \frac{1}{\ii} (\phi_1 \hat{J}^1 + \phi_2 \hat{J}^2 + \phi_3 \hat{J}^3), 
\end{equation}
而如果它是作用在算符上，那么定义
\[
    \hat{R}(\vb*{\phi}) = \hat{I} + \ii (\phi_1 \hat{J}^1 + \phi_2 \hat{J}^2 + \phi_3 \hat{J}^3).
\]
两种定义给出的$\hat{J}^i$是一样的，只是群参数差了一个负号。这就是\autoref{note:state-and-operator-minus-symbol}中提到的情况。

$J^i$可以分解成两部分：一部分改变$\vb*{x}$的取值，一部分不改变。改变$\vb*{x}$取值的那一部分记作$L^i$，称为\concept{轨道角动量}，它与粒子的位置自由度有关，因此有这个名称；不改变$\vb*{x}$取值的那一部分记作$S^i$，称为\concept{自旋角动量}，因为它和粒子的内禀自由度有关。
$J^i$服从\eqref{eq:lie-algebra-so3}，因此我们也称\eqref{eq:lie-algebra-so3}为\concept{角动量代数}。
通常设
\begin{equation}
    \vb*{J} = J_1 \vb*{e}_1 + J_2 \vb*{e}_2 + J_3 \vb*{e}_3,
\end{equation}
则角动量代数就是
\begin{equation}
    \vb*{J} \times \vb*{J} = \ii \vb*{J}.
\end{equation}
不过，实际计算时很少用到这个矢量，因为由于$\hat{J}^i$是三维旋转群的李代数的无穷维厄米表示，它们遵循角动量代数，因此彼此间不对易。
$\hat{\vb*{J}}$没有本征态。但由角动量代数，$\hat{\vb*{J}}^2$却和三个$\hat{J}^i$都对易。

需要注意的是，以上定义不能够一般地将轨道角动量和自旋角动量完全分开，因为可以任意地将自旋角动量划归一部分给轨道角动量。因此我们人为要求轨道角动量仅仅作用在坐标空间上，而自旋角动量仅仅作用在内禀自由度上。

按照\eqref{eq:rotation-inf-rep}和\eqref{eq:p-in-x-representation}，我们有
\[
    \begin{aligned}
        \mel{\vb*{x}}{\hat{L}^1}{\psi} &= x^2 (- \ii \partial_3) \braket{\vb*{x}}{\psi} - x^3 (- \ii \partial_2) \braket{\vb*{x}}{\psi} \\
        &= \mel{\vb*{x}}{(\hat{x}^2 \hat{p}_3 - \hat{x}^3 \hat{p}_2)}{\psi}, \\
        \hat{L}^1 &= \hat{x}^2 \hat{p}_3 - \hat{x}^3 \hat{p}_2.
    \end{aligned}
\]
同样也可以这样计算出$\hat{L}^2$和$\hat{L}^3$。从而我们得到
\begin{equation}
    \hat{\vb*{L}} = \hat{\vb*{x}} \times \hat{\vb*{p}},
\end{equation}
其中$\hat{\vb*{L}}$就是
\begin{equation}
    \hat{\vb*{L}} = \hat{L}^i \vb*{e}_i.
\end{equation}

\begin{equation}
    \hat{\vb*{L}}^2 = \hat{\vb*{x}}^2 \hat{\vb*{p}}^2 - (\hat{\vb*{x}} \cdot \hat{\vb*{p}})^2 + \ii \hat{\vb*{x}} \cdot \hat{\vb*{p}} = \hat{\vb*{x}}^2 \hat{\vb*{p}}^2 - (\hat{\vb*{x}} \cdot \hat{\vb*{p}}) (\hat{\vb*{p}} \cdot \hat{\vb*{x}}).
\end{equation}

总角动量$\hat{J}^i$和轨道角动量$\hat{L}$都遵循角动量代数，也即
\[
    \begin{aligned}
        \comm*{\hat{L}^i+\hat{S}^i}{\hat{J}^j+\hat{S}^j} &= \ii \epsilon_{ijk} (J^k+S^k), \\
        \comm*{\hat{L}^i}{\hat{L}^j} &= \ii \epsilon_{ijk} L^k,
    \end{aligned}
\]
而由于轨道角动量和自旋角动量作用在态空间的不同自由度上，它们是彼此对易的，从而我们推导出
\[
    \comm*{\hat{S}^i}{\hat{S}^j} = \ii \epsilon_{ijk} \hat{S}^k,
\]
因此自旋角动量确确实实是一种角动量：它也满足角动量代数。

我们也可以定义
\begin{equation}
    H = \hat{\vb*{S}} \cdot \frac{\hat{\vb*{P}}}{\abs{\vb*{P}}}
\end{equation}

如前所述，$J^2$和$\hat{J}_i$中的任何一个都对易。习惯上考虑$\hat{J}_3$，我们会发现$\hat{J}^2$和$J_3$实际上构成了角动量代数中的一组CSCO，因为$\hat{J}^2$是角动量代数的卡西米尔元，它确定了$\hat{J}_3$的取值的上下限，再加上$\hat{J}_3$的取值，系统的角动量状况就完全确定了。
通常称$\hat{L}^2$的本征值$\sqrt{j(j+1)}$中的$j$为\concept{角量子数}，$\hat{L}_3$的本征值为\concept{磁量子数}，而$\hat{S}_3$称为\concept{自旋量子数}。
$\hat{S}^2$没有专门的称呼，因为对种类确定的粒子它是固定的。

容易验证，若$\vb*{J}_1$和$\vb*{J}_2$都是角动量算符（也即，它们构成角动量代数），则它们之和$\vb*{J}_1 + \vb*{J}_2$也是角动量算符。
我们会看到将$\vb*{J}_1$和$\vb*{J}_2$叠加会得到一个可约表示，$\vb*{J}_1 + \vb*{J}_2$作用在$\vb*{J}_1$和$\vb*{J}_2$各自作用的空间的直积上，而这个直积实际上是一系列空间的直和。
我们设
\[
    \hat{J}^2 \ket{jm} = j(j+1) \ket{jm}, \quad \hat{J} \ket{jm} = m \ket{jm},
\]
特意加上一个$j$的标记是因为这个表示可能是可约的。到现在为止$j$可以取哪些值都是完全不清楚的，不过无论如何，上式构成了$\hat{J}$的表示空间的一组基。另一方面，容易看出
\[
    \ket{j_1 j_2 m_1 m_2} = \ket{j_1 m_1} \otimes \ket{j_2 m_2}
\]
实际上也是$\hat{J}$的表示空间的一组基。
容易验证$\ket{j_1 j_2 m_1 m_2}$是$J_z$的一组本征态，且
\begin{equation}
    m = m_1 + m_2,
    \label{eq:m-m1-m2}
\end{equation}
但是并不是$\vb*{J}^2$的一组本征态。
两组基之间的变换系数$\braket{j_1 j_2 m_1 m_2}{j m}$称为\concept{CG系数}。
$\{\ket{jm}\}$实际上是由若干不可约表示直和而成的基矢量（由不同的$j$对应的表示直和而成），而$\{\ket{j_1 j_2 m_1 m_2}\}$则是两个不可约表示直积而成的基矢量，CG系数用于在这两组基矢量来回切换。
可以预期，CG系数应该能够反映\eqref{eq:m-m1-m2}这一事实。的确如此：将用CG系数表示的$\ket{jm}$代入本征方程得到
\[
    \sum_{m_1, m_2} (m - m_1 - m_2) \braket{j_1 j_2 m_1 m_2}{j m} \ket{j_1 j_2 m_1 m_2} = 0,
\]
于是
\[
    (m - m_1 - m_2) \braket{j_1 j_2 m_1 m_2}{j m} = 0.
\]
这就意味着
\[
    \ket{jm} = \sum_{m_1} \ket{j_1 j_2 m_1 (m-m_1)} \braket{j_1 j_2 m_1 (m-m_1)}{jm}.
\]
由于$m$是$m_1$和$m_2$之和，$m$的最大值是$j_1+j_2$，最小值是$-j_1-j_2$，在此之间的所有值都可以取到。
% TODO:证明
$j$的取值为
\[
    j = j_1 + j_2, j_1 + j_2 - 1, \ldots, \abs{j_1 - j_2}.
\]
在半经典的图景中，这意味着叠加两个态的角动量时，它们的夹角是量子化的。
计算每个$j$对应的不可约表示的维度，把它们加起来，得到的结果正是$(2j_1 - 1) (2j_2 - 1)$。

CG系数的具体计算需要用到$\vb*{J}$的升降算符，注意到
\begin{equation}
    J_{\pm} \ket{jm} = \sum_{m_1 + m_2 = m} (J_{1 \pm} \ket{j_1 m_1} \ket{j_2 m_2} + \ket{j_1 m_1} J_{2 \pm} \ket{j_2 m_2}) \braket{j_1 j_2 m_1 m_2}{jm},
    \label{eq:addition-of-ca-opearator-su2}
\end{equation}
首先可以用这个关系式计算出$j=m$的CG系数，注意到
\[
    J_+ \ket{jm} = 0,
\]
就有
% TODO
可以递推得到

类似的方法还可以计算出三个角动量算符叠加而得到的结果，乃至更多。

需要注意的是按照以上步骤将角动量算符叠加之后得到的角动量基矢量并没有对称化/反对称化。
反对称化可能会让一些状态实际上取不到。

% TODO：螺旋度

\subsection{对称性操作}

\subsubsection{宇称变换}

% TODO

\subsubsection{电荷}

\subsubsection{粒子-反粒子共轭}


\section{标量场}

\subsection{实标量场的克莱因-高登方程}\label{sec:k-g-eq}

标量场的拉氏量中只能够出现$\phi$和$\partial_\mu \phi$构成的一次或二次不变量。
$\phi$构造出的一次不变量有$\phi$，二次不变量有$\phi^2$，$\partial_\mu \phi$是矢量，$\partial_\mu \phi$不可能和$\phi$缩并，而由于拉氏量中的参数都是标量它也不可能和参数缩并，因此它只能和自己缩并，得到$\partial_\mu \phi \partial^\mu \phi$。
这样我们得到
\[
    \mathcal{L} = A \phi + B \phi^2 + C \partial_\mu \phi \partial^\mu \phi.
\]
拉氏量中的$\phi$项实际上无关紧要，因为完全可以通过重新定义一个$\phi' = \phi + \const$来把一次项消除掉，于是我们略去这一项。
最后，通过重新定义长度单位和$m$，可以得到
\begin{equation}
    \mathcal{L} = \frac{1}{2} (\partial_\mu \phi \partial^\mu \phi - m^2 \phi^2).
    \label{eq:klein-gordon-lagrangian}
\end{equation}
这个拉氏量导致下面的运动方程：
\begin{equation}
    (\partial_\mu \partial^\mu + m^2) \phi = 0.
    \label{eq:klein-gordon-eq}
\end{equation}
这就是\concept{克莱因-高登方程}，标量场或者说自旋0场的基本运动方程。
可以证明，为了让\eqref{eq:klein-gordon-eq}给出有物理意义的预言（例如不出现无限下降的能量，等等），应当取$m \geq 0$。

实际上，所有场的运动方程均满足克莱因-高登方程。我们将在推导其它场的运动方程之后证明这一点。
这就导致了一个重要的结果。平移生成元在场表示中为\eqref{eq:transition-inf-rep}，从而
\[
    P_\mu P^\mu = - \partial_\mu \partial^\mu,
\]
于是代入\eqref{eq:klein-gordon-eq}，得到
\[
    P_\mu P^\mu \phi = - \partial_\mu \partial^\mu = m^2 \phi,
\]
其中$m$为克莱因-高等方程中出现的那个$m$。也即，通过$P_\mu P^\mu$的表示的本征值（实际上就是它和恒等变换之间差的倍数，因为$P_\mu P^\mu$是卡西米尔元）得到的$m$和场的运动方程得到的$m$是一样的。
这个$m$实际上就是粒子的静质量。在\autoref{sec:sch-eq-from-kg}中我们会看到它就对应着薛定谔方程中的质量。

现在导出标量场的哈密顿表述。计算得到
\begin{equation}
    \pi = \partial_0 \phi = \dot{\phi},
    \label{eq:klein-gordon-pi}
\end{equation}
相应的
\begin{equation}
    \mathcal{H} = \frac{1}{2} \dot{\phi}^2 + \frac{1}{2} (\grad{\phi})^2 + \frac{1}{2} m^2 \phi^2.
\end{equation}
如我们希望的那样，哈氏量密度是正定的。这当然是因为我们适当地选择了$\mathcal{L}$的正负号。

另外，注意到 % TODO：好像我们还从来没有严格定义过下式？
\[
    P_0 = E, \quad P_i \vb*{e}^i = \vb*{p},
\]
在场表示中我们可以写出
\[
    E^2 - \vb*{p}^2 = m^2
\]
或者说
\[
    E^2 = m^2 + \vb*{p}^2.
\]
这正是质壳关系\eqref{eq:mass-shell}。这就提示我们，还有另一种量子化方式：做替换
\[
    E \longrightarrow \hat{E} = \ii \partial_0, \quad \vb*{p} \longrightarrow \hat{\vb*{p}} = - \ii \grad,
\]
则从能量-动量关系就可以得到克莱因-高登方程。
我们不采用这种方案，因为它隐含地引入了太多的假设：算符$E, \vb*{p}$是作用在一个算符场上而不是态矢量上；$E,\vb*{p}$是厄米算符，也即，平移群在此算符场上取幺正表示（注意这一点并不一般成立！例如，场表示中的有限维表示就常常不是幺正的），等等。
为了和经典场论中的记号保持一致，我们后面将用$\omega$代替$E$。
$\omega$或者说场的傅里叶分量的频率在经典场论下有明确意义，而在量子场论的语境下，它实际上对应了这个场的傅里叶分量（粒子产生算符或者湮灭算符）产生/湮灭的粒子的能量$E$。

\subsection{实标量场的正则量子化}

\subsubsection{平面波模式}

无需额外考虑标量场的基，于是对实标量场，可以直接取
\begin{equation}
    {\phi}(\vb*{x}, t) = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{\sqrt{2 \omega_{\vb*{p}}}} \left( {a}^\dagger_{\vb*{p}} \ee^{ - \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} + {a}_{\vb*{p}} \ee^{ \ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} \right),
    \label{eq:expanding-klein-gordon-field}
\end{equation}
显然它是\eqref{eq:klein-gordon-eq}的一个解。相应的使用\eqref{eq:klein-gordon-pi}，有
\begin{equation}
    {\pi}(\vb*{x}, t) = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \  \ii \sqrt{\frac{\omega_{\vb*{p}}}{2}} \left( {a}^\dagger_{\vb*{p}} \ee^{ - \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} - {a}_{\vb*{p}} \ee^{ \ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} \right)
\end{equation}
共轭动量不是洛伦兹协变的。这并不让人意外，因为其定义和时间维的选取有关。
计算得到
\[
    {H} = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{2} \omega_{\vb*{p}} ({a}_{\vb*{p}}^\dagger {a}_{\vb*{p}} + {a}_{\vb*{p}} {a}^\dagger_{\vb*{p}}).
\]

下面把正则对易关系施加到标量场${\phi}$上。
通过计算可以得知，这等价于
\begin{equation}
    \comm*{{a}_{\vb*{p}}}{{a}^\dagger_{\vb*{p}'}} = (2\pi)^3 \delta^3 (\vb*{p} - \vb*{p}'), \quad \comm*{{a}_{\vb*{p}}}{{a}_{\vb*{p}'}} = 0.
    \label{eq:quantization-scalar}
\end{equation}
相应的，反对易关系等价于
\[
    \acomm*{{a}_{\vb*{p}}}{{a}^\dagger_{\vb*{p}'}} = (2\pi)^3 \delta^3 (\vb*{p} - \vb*{p}'), \quad \acomm*{{a}_{\vb*{p}}}{{a}_{\vb*{p}'}} = 0.
\]
将反对易关系代入哈密顿量表达式会导致哈密顿量变成常数，因此这是平凡解，舍去。
将对易关系代入哈密顿量的表达式，得到
\begin{equation}
    {H} = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \omega_{\vb*{p}} \left({a}_{\vb*{p}}^\dagger {a}_{\vb*{p}}  + \frac{1}{2} \comm*{{a}_{\vb*{p}}}{{a}^\dagger_{\vb*{p}}} \right).
    \label{eq:hamiltonian-of-klein-gordon}
\end{equation}
容易看出第二项实际上是发散的。
产生这种发散的原因在于，相对论性量子场论不会被用于处理动量特别高的问题（在那里需要新的物理，通常称为“紫外端的物理”），因此所谓的对整个动量空间的积分实际上只是对动量空间中一块很大的区域的积分。
在这种意义下，\eqref{eq:hamiltonian-of-klein-gordon}中的第二项是一个很大的常数，称为\concept{真空零点能}。因此在讨论全空间内的问题时，可以丢弃它得到等效的哈密顿量（注意此时哈密顿量的正定性实际上被破坏了）%？真的吗？
\begin{equation}
    {H} = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \omega_{\vb*{p}} {a}_{\vb*{p}}^\dagger {a}_{\vb*{p}}.
\end{equation}
这是一个福克空间上的$1$粒子算符。它表明自由场情况下单粒子携带能量为$\omega_{\vb*{p}}$。
通过反复使用对易关系\eqref{eq:quantization-scalar}以及真空态被湮灭算符作用后得到$0$这一事实，可以计算出
\begin{equation}
    {H} {a}_{\vb*{p}}^\dagger \ket{0} = \omega_{\vb*{p}} {a}_{\vb*{p}}^\dagger \ket{0}.
\end{equation}
因此正如我们预期的那样，单粒子态$\ket{\vb*{p}}$是哈密顿量的本征态。

真空零点能的出现实际上意味着原来的哈密顿量中的各个项是不对易的，因此真空态的能量不能是零，如果它是零，那么由哈密顿量的正定性，哈密顿量中的每一项作用在真空态上都会得到零，于是真空态是哈密顿量的每一项的本征态，这就产生了矛盾。
% TODO:实际上不对易的算符还是可以有共同本征态的，以上说法不正确，需要进一步说明
不对易性是纯粹的量子概念，因此真空零点能只有在量子场论中才能够得到良好的定义。
如果哈密顿量中所有的项都是彼此对易的，就不会有真空零点能。有时真空零点能的存在也称为量子涨落，因为即使在真空态，也不是所有的物理量都有完全确定的值。

需要注意的是如果我们讨论的问题不是定义在全空间上的，可能不能直接把真空零点能丢弃。例如，设有两块无穷大的金属板，它们施加的边界条件会让\eqref{eq:expanding-klein-gordon-field}中的一些模式为零，通过计算可以发现板间的真空零点能小于板外，从而产生一个板之间的吸引力。

总之，标量场需要使用正则对易关系来量子化，不能用反对易关系。因此标量场描述$0$自旋玻色子。

\subsubsection{守恒量}

场的动量为
\[
    P_i = \int \dd[3]{\vb*{x}} \pi \partial_i \phi,
\]
从而
\begin{equation}
    {\vb*{P}} = - \int \dd[3]{\vb*{x}} {\pi} \grad{{\phi}} = \int \dd[3]{\vb*{x}} \vb*{p} {a}^\dagger_{\vb*{p}} {a}_{\vb*{p}} + \text{vaccum zero-point item},
\end{equation}
正如我们预期的，场的动量也是单粒子算符，并且正好就是所有粒子的动量之和。

标量场没有内禀自由度，因此也不携带自旋角动量。我们无需讨论其自旋角动量。

\subsubsection{实标量场的传播子}

通过\eqref{eq:quantization-scalar}中的归一化常数我们可以写出动量空间中的同时间两点关联函数：
\begin{equation}
    \mel{0}{a_{\vb*{p}} a^\dagger_{\vb*{q}}}{0} = (2\pi)^3 \delta(\vb*{p} - \vb*{q}), \quad \mel{0}{a^\dagger_{\vb*{p}} a_{\vb*{q}}}{0} = 0.
\end{equation}
代入展开式\eqref{eq:expanding-klein-gordon-field}，就得到实空间下的两点关联函数（这两个点可以不等时）：
\begin{equation}
    D(x-y) = \mel{0}{\phi(x) \phi(y)}{0} = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{2 \omega_{\vb*{p}}} \ee^{-\ii p \cdot (x - y)} |_{p^0 = E_{\vb*{p}}} .
\end{equation}
被积分的$\ee$指数是洛伦兹不变的，积分测度也是洛伦兹不变的，等式左边也是洛伦兹不变的——本该如此，既然标量场是洛伦兹不变的。
这个式子可以写成更加明显的洛伦兹不变的形式。
容易看出
\[
    \int \dd{\omega} \frac{1}{(\omega - \omega_{\vb*{p}})(\omega + \omega_{\vb*{p}}  - \ii 0^+)} \ee^{-\ii p \cdot (x - y)} = - \pi \ii \frac{1}{2 \omega_{\vb*{p}}} \ee^{-\ii p \cdot (x - y)} |_{p^0 = E_{\vb*{p}}} ,
\]
这里积分号表示计算积分主值，负号是由于$\ee^{-\ii \omega t}$在下半平面衰减而不是上半平面。
于是就有
\begin{equation}
    \begin{aligned}
        D(x-y) &= 2 \int \frac{\dd[4]{p}}{(2\pi)^4} \frac{\ii}{(\omega - \omega_{\vb*{p}})(\omega + \omega_{\vb*{p}}  - \ii 0^+)} \ee^{-\ii p \cdot (x - y)} \\
        &= 2 \int \frac{\dd[4]{p}}{(2\pi)^4} \frac{\ii}{p^2 - m^2 - \ii 0^+ (\omega - \omega_{\vb*{p}})} \ee^{-\ii p \cdot (x - y)}.
    \end{aligned}
\end{equation}
这个积分看起来非常不自然：我们需要忽略其中一个极点，并且取另一个极点的积分主值，然后再将结果乘以$2$。
这种不自然性暗示$\mel*{0}{\phi(x) \phi(y)}{0}$可能并不是非常好用的表示两点关联的方式——它的确不是，因为当$x^0 < y^0$时它还是会给出一个值，并没有很好地反映因果性。
对这个量的有意义的使用局限于$x^0 > y^0$时。

在等时情况下上式实际上可以进一步往下计算。设$x^0-y^0=0$，$\vb*{x} - \vb*{y} = \vb*{r}$，采用球坐标系，有
\[
    \begin{aligned}
        D(x-y) &= \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{2 \omega_{\vb*{p}}} \ee^{\ii \vb*{p} \cdot \vb*{r}} \\
        &= \frac{2\pi}{(2\pi)^3} \int \frac{p^2 \dd{p}}{2 \omega_{\vb*{p}}} \frac{\ee^{\ii p r} - \ee^{- \ii p r}}{\ii p r} \\
        &= - \frac{\ii}{2 (2\pi)^2 r} \int_{-\infty}^\infty \frac{p \dd{p}}{\sqrt{p^2 + m^2}} \ee^{\ii p r},
    \end{aligned}
\]
被积函数是一个多值函数，从$\ii m$到$\ii \infty$，$- \ii m$到$- \ii \infty$作割线，即确定一个单值分支。
将积分路径换成围绕从$\ii m$到$\ii \infty$的割线，并作变量代换$p = \ii \rho$，可将上式化为
\[
    D(x-y) = \frac{1}{4\pi^2 r} \int_{m}^\infty \dd{\rho} \frac{\rho \ee^{-\rho r}}{\sqrt{\rho^2 - m^2}} \stackrel{r \to \infty}{\sim} \ee^{- m r}.
\]
这就是说，即使是彼此之间有类空间隔的两点之间实际上也是有关联的，虽然随着举例增加关联函数快速下降；或者说，在光锥之外，跃迁振幅会指数下降但是不会一开始就降到零。

这实际上并没有直接破坏因果律，因为量子态并不是直接可观测的，真正有意义的是测量，如果具有类空间隔的两点之间的同种可观测量是对易的，因果律还是能够保持。
计算$\phi(x)$和$\phi(y)$的对易子：
\begin{equation}
    \begin{aligned}
        \comm*{\phi(x)}{\phi(y)} &= \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{2 \omega_{\vb*{p}}} (\ee^{\ii p \cdot (y - x)} - \ee^{\ii p \cdot (x - y)}) \\
        &= D(x-y) - D(y-x),
    \end{aligned}
\end{equation}
在$x$和$y$之间为类空间隔时，洛伦兹变换可以让$x-y$变成$y-x$，由于$D(x-y)$和$D(y-x)$各自是洛伦兹标量，$\comm*{\phi(x)}{\phi(y)}$就是零。
否则，洛伦兹变换不能让$x-y$变成$y-x$，因为此时时间的先后顺序是绝对的，从而$\phi(x)$和$\phi(y)$不对易。
因此因果律在这里确实是能够保持的。

我们看到$\phi(x)$和$\phi(y)$的对易子实际上就是一个普通的数，即

在实际计算中通常计算编时格林函数，因为其携带了足够多的信息，并且在自由场情况下有Wick定理。
仿照前述引入$\omega$积分的方法，可以验证我们有
\begin{equation}
    D_F(x-y) = \mel*{0}{T \phi(x) \phi(y)}{0} = \int \frac{\dd[4]{p}}{(2\pi)^4} \frac{\ii}{p^2 - m^2 + \ii 0^+} \ee^{- \ii p \cdot (x - y)}.
\end{equation}
这称为\concept{费曼传播子}，可以看到它在动量空间中的形式是非常简单的。

\subsection{实标量场的路径积分量子化}

旋量场的路径积分需要额外提几句，因为此时所谓的“经典场”实际上是一些彼此反对易的算符（所谓\concept{格拉斯曼数}），而不是正常的数。
格拉斯曼数的积分基本上只用在写出配分函数上，

\[
    S = \int \dd[4]{x} \bar{\psi} (\ii G^{-1}) \psi
\]

\subsection{非相对论极限}

\subsubsection{克莱因-高登方程的退化形式}\label{sec:sch-eq-from-kg}

我们将讨论克莱因-高登方程的退化形式。旋量场和标量场由于也服从克莱因-高登方程，没有必要单独考虑——它们多出来的自由度可以使用其它方式，如自旋等，引入。
实际上我们讨论的应该是复的克莱因-高登方程，因为旋量场是复的，但本节的讨论并不会用到场是不是复的这个信息。

首先我们注意到一个事实：时谐波
\begin{equation}
    \phi = \ee^{- \ii m t}
    \label{eq:lowest-energy}
\end{equation}
是\eqref{eq:klein-gordon-eq}的解，并且它的能量最低，就是零。（代入哈氏量可得）因此，能量不高的场只是微微偏离\eqref{eq:lowest-energy}，我们设其为
\begin{equation}
    \phi(\vb*{x}, t) = \psi(\vb*{x}, t) \ee^{- \ii m t},
    \label{eq:low-energy-ansatz}
\end{equation}
则
\[
    (\partial_\mu \partial^\mu + m^2) \phi = \ee^{- \ii m t} (-2 \ii m \partial_t \psi + \partial_t^2 \psi - \laplacian{\psi}).
\]
由于$\phi$只是略微偏离\eqref{eq:lowest-energy}%
\footnote{需要注意的是这个说法字面上实际上是不严谨的。${\phi}$是一个算符，它包含了所有可能的$\phi$的取值，不应该“只是略微偏离\eqref{eq:lowest-energy}”。
然而，${\phi}$的本征态中非常偏离\eqref{eq:lowest-energy}的那部分模式在我们的低能有效理论中并不会被涉及到。
换而言之，我们关心的那部分$\ket{\phi}$只是略微偏离\eqref{eq:lowest-energy}，因此认为${\phi}$只是略微偏离\eqref{eq:lowest-energy}并不会显著改变我们的理论的行为。
}%
，可以预期$\psi$的时间部分振荡不会特别明显，于是取近似
\[
    \partial_t^2 \psi \ll m \partial_t \psi,
\]
就得到
\begin{equation}
    \ii \partial_t \psi + \frac{1}{2m} \laplacian{\psi} = 0.
    \label{eq:schodinger-eq}
\end{equation}
\eqref{eq:schodinger-eq}称为\concept{薛定谔场}的运动方程。容易看出它不是洛伦兹协变的，这是理所当然的，因为它描述的现象发生在低能近似下，此时伽利略对称性就足够了。
薛定谔场是复的，无论$\phi$是不是复场，因为拟设\eqref{eq:low-energy-ansatz}引入了一个复数因子。

方程\eqref{eq:schodinger-eq}是以下拉氏量%
\footnote{$\grad{\psi}^\dagger \cdot \grad{\psi}$代表将两个梯度算符做缩并，行向量$\psi^\dagger$和列向量$\psi$相乘，即$\partial_i \psi^\dagger \partial^i \psi$。混合使用不变量记号和矩阵记号是因为我们并不知道$\psi$的内部结构，只知道$\psi^\dagger \psi$是标量，因此把$\psi$当成一个整体，好像一个标量一样，来做计算。}
\begin{equation}
    \mathcal{L} = \frac{\ii}{2} \left( \psi^\dagger \dot{\psi} - \psi \dot{\psi}^\dagger \right) - \frac{1}{2m} \grad{\psi^\dagger} \cdot \grad{\psi}
    \label{eq:schodinger-lagrangian}
\end{equation}
的运动方程。把$\psi$和$\psi^\dagger$看成两个独立的场，分别应用欧拉-拉格朗日方程，就能够得到\eqref{eq:schodinger-eq}和其共轭转置。

容易看出，
\[
    \pi(\psi) = \pdv{\mathcal{L}}{\dot{\psi}} = \frac{\ii}{2} \psi^\dagger, \quad \pi(\psi^\dagger) = \pdv{\mathcal{L}}{\dot{\psi}^\dagger} = - \frac{\ii}{2} \psi^\top,
\]
从而可以计算出
\begin{equation}
    \mathcal{H} = \frac{1}{2m} \grad{\psi^\dagger} \cdot \grad{\psi}.
\end{equation}
这个哈氏量中出现了$\pi$的导数，处理起来会比较麻烦。为了规避这些麻烦，我们将不再讨论经典的哈密顿动力学，而直接开始做量子化。

电荷密度为
\begin{equation}
    \rho(\vb*{r}) = q \psi^\dagger(\vb*{r}) \psi(\vb*{r}),
\end{equation}
而且电流密度为
\begin{equation}
    \vb*{j}(\vb*{r}) = \frac{1}{2m\ii} (\psi^\dagger(\vb*{r}) \grad{\psi}(\vb*{r}) - \psi(\vb*{r}) \grad{\psi}^\dagger(\vb*{r}))
\end{equation}

\subsubsection{薛定谔场}

% TODO:可以看到，$j=0$的标量场给出的粒子的自旋角动量为0，$j=\pm \frac{1}{2}$的旋量场给出的粒子的自旋角动量为$\pm 1/2$，$j=1$的矢量场给出的粒子的自旋角动量为$\pm 1$。这并不让人意外，因为$j$决定了粒子的内禀自由度的维度($2j+1$)。无质量的情况比较特殊
实际上也可以通过量子化薛定谔场来得到非相对论性量子场论。薛定谔场实际上是标量场、旋量场、矢量场退化而来的场，因此它也有内禀自由度。使用自旋（或者螺旋度）标记这些内禀自由度。
由于薛定谔场不是实场，考虑对易关系
\[
    \comm*{{\psi}^i(\vb*{x}, t)}{{\pi}_j(\vb*{y}, t)} = \ii \delta^i_j \delta^3 (\vb*{x} - \vb*{y}),
\]
即
\[
    \comm*{{\psi}^i(\vb*{x}, t)}{({\psi}^j)^\dagger (\vb*{y}, t)} = 2 \delta^3 (\vb*{x} - \vb*{y}),
\]
这表明

总之，在不涉及粒子相互作用时，单粒子量子力学足以覆盖薛定谔场的情况，即“非相对论量子场论”就是量子力学。%
\footnote{
    量子场论和量子力学的对应实际上有两方面：首先，量子场论和量子力学都可以写成哈密顿动力学的形式，当然前者各个物理量可以使用空间位置作为标签而后者物理量的标签都是离散的；其次，量子场论和量子力学都能够描述多粒子态。
    当我们说非相对论性量子场论就是量子力学时我们是在说后者，当我们说量子场论是3+1维量子力学时我们是在说前者。
}%
我们再一次看到场自由度和数量可变的粒子自由度实际上就是一回事。
初等量子力学中可以直接定义S算符、单粒子费曼图（“原子吸收一个光子、释放一个光子”，等等），你可能会问为什么这些本来用于场论的概念也可以被用在单粒子量子力学上，毕竟前者是3+1维理论而后者是0+1维理论。但实际上，这些用在量子场论上的概念完全可以被应用在薛定谔场上，而由于薛定谔场不涉及粒子数变化，这些概念就可以被套用在单粒子态量子力学上。

\subsubsection{关于归一化的注记}

在将相对论性的相互作用顶角移植到非相对论极限下时需要注意归一化问题。
在非相对论性极限下我们更喜欢使用$\{\ket{\vb*{p}}\}$表象，而不是$\{\ket{p}\}$表象。
我们知道
\[
    \ket{p} = \sqrt{2 \omega_{\vb*{p}}} \ket{\vb*{p}},
\]
在非相对论极限下就有
\begin{equation}
    \ket{\vb*{p}} = \frac{1}{\sqrt{2m}} \ket{p},
\end{equation}
于是应有
\begin{equation}
    \mel*{\vb*{p}_1, \ldots, \vb*{p}_m}{S}{\vb*{q}_1, \ldots, \vb*{q}_n} = \frac{1}{(2m)^{(m+n)/2}} \mel*{p_1, \ldots, p_m}{S}{q_1, \ldots, q_n}.
\end{equation}

\section{旋量场}

\subsection{旋量场的狄拉克方程}

旋量场实际上几乎从来不会在经典情况下遇到，因为它们的场值是复数，因此不具有直接的物理意义。

本节讨论旋量的运动方程。使用凑拉氏量的方法处理旋量会比较困难，因为旋量的指标分带点的和不带点的，因此会频繁地涉及求共轭等运算，在拉格朗日动力学中讨论这些问题并不方便。
因此接下来我们尝试直接构造旋量的运动方程，从这些运动方程反推对应的拉氏量。
我们将尝试构造一阶运动方程。如果对魏尔旋量和狄拉克旋量都能够构造出一阶运动方程，那就没有必要考虑更高阶的运动方程。
% TODO:为什么？

\subsubsection{魏尔旋量的运动方程} 

首先讨论魏尔旋量的运动方程。满足平移不变性的方程形如
\[
    \partial_0 \psi = b^i \partial_i \psi + C \psi,
\]
其中$b^i$和$C$是常数，$C$可以是一个旋量矩阵。
由于我们同时还要求旋转不变性，$C$只能是一个标量。显然，这个方程中所有含有导数的项加在一起必然得到一个旋量，即
\[
    \partial_0 \psi - b^i \partial_i \psi = \text{a covariant term} = C \psi.
\]
梯度算符是矢量，按照\eqref{eq:vector-is-spin-tensor}，我们可以写出作用在魏尔旋量上的导数算符
\begin{equation}
    \partial_{a \dot{b}} = \partial_\nu \sigma^\nu_{a \dot{b}}.
\end{equation}
从而魏尔旋量的梯度就是
\[
    \partial_{a \dot{b}} \psi^{\dot{b}} = \partial_\nu \sigma^\nu_{a \dot{b}} \psi^{\dot{b}}
\]
和
\[
    \partial^{\dot{a} b} \psi_b = \partial_\mu (\sigma^\mu)^{\dot{a} b} \psi_b.
\]
两个表达式中，$\sigma$的指标都一个带点一个不带点，这是为了保证梯度算符的协变性，因为矢量是一个左手旋量和一个右手旋量直积的结果。
$\partial_0 \psi - b^i \partial_i \psi$应该能够写成以上两种旋量梯度的函数。由于以上两种旋量梯度带一个指标，而$\partial_0 \psi - b^i \partial_i \psi$也是单指标对象，显然两者只应该差一个倍数。（当然，也可以将一个旋量张量参数和旋量梯度做缩并，但这样就没有旋转不变性了）这个倍数可以被吸收到$C$中。
从而运动方程形如
\[
    \mathrm{grad} \psi = C \psi.
\]
然而，注意到左手旋量的梯度是一个右手旋量，右手旋量的梯度是一个左手旋量，因此以上的方程会让一个右手旋量的各个分量等于一个左手旋量的各个分量，从而破坏了洛伦兹协变性。
消除这个矛盾的唯一可能就是让$C=0$，于是左手旋量的运动方程为
\[
    \partial_\mu (\sigma^\mu)^{\dot{a} b} \psi_b = 0,
\]
右手旋量的运动方程为
\[
    \partial_\nu \sigma^\nu_{a \dot{b}} \psi^{\dot{b}} = 0.
\]
由定义，$(\sigma^\mu)_{a \dot{b}}$的分量矩阵就是$\sigma$矩阵，而$(\sigma^\mu)^{\dot{a} b}$的分量矩阵则需要通过指标升降关系
\[
    (\sigma^\mu)^{\dot{a} b} = (\epsilon^{ac} (\sigma^\mu)_{c \dot{d}} \epsilon^{\dot{b} \dot{d}})^*
\]
得到。定义$(\sigma^\mu)^{\dot{a} b}$的分量矩阵为$\bar{\sigma}^\mu$，通过计算可以发现
\begin{equation}
    \bar{\sigma}^0 = \sigma^0 = I, \quad \bar{\sigma}^i = - \sigma^i,
\end{equation}
于是可以使用矩阵形式写出运动方程：
\begin{equation}
    \partial_0 \psi \pm \sigma^i \partial_i \psi = 0 .
    \label{eq:weyl-eq}
\end{equation}
负号为左手旋量，正号为右手旋量。从\eqref{eq:weyl-eq}立刻可以得到
\[
    \partial_\mu \partial^\mu \psi = 0,
\]
无论是右手旋量还是左手旋量。因此，单独一个旋量场一定是没有质量的。

然而，拉氏量中的质量项实际上是自由理论的一部分，因此一种非常简单的让旋量场获得质量而与此同时理论保持为自由理论的方法是让一对旋量耦合起来。
两个旋量场的耦合意味着拉氏量中要出现一个二次项，它由两个旋量的乘积构成，而由于这个二次项必须是标量，它应该包含一个左手旋量和一个右手旋量。
考虑到我们可以把一个左手旋量和一个右手旋量打包成一个狄拉克旋量，有必要分析狄拉克旋量的运动方程。
% TODO: majorana费米子

\subsubsection{狄拉克旋量的运动方程} 

\paragraph{魏尔表象} 我们现在让狄拉克旋量中的两个旋量之间有线性的相互作用（从而，关于狄拉克旋量的方程仍然是线性的）。
我们将狄拉克旋量写成一个左手旋量和一个右手旋量拼合的形式，称为\concept{魏尔表象}或\concept{手性基}，虽然实际上有其它方式可以表示狄拉克旋量。
洛伦兹不变性的要求意味着，唯一可能的方程形式如下：
\begin{equation}
    \begin{aligned}
        (\partial_0 + \sigma^i \partial_i) \psi_R = - \ii m_1 \psi_L, \\
        (\partial_0 - \sigma^i \partial_i) \psi_L = - \ii m_2 \psi_R.
    \end{aligned}
    \label{eq:interacting-weyl-eq}
\end{equation}
其中我们为了节省符号，使用$\psi_L$和$\psi_R$分别代表狄拉克旋量$\psi$的左手部分和右手部分。
当然，$m=0$时就狄拉克旋量的运动方程就退化为了一对完全无关的左手旋量和右手旋量。
这也就是实际计算时没有必要单独讨论魏尔旋量的原因。
在\eqref{eq:interacting-weyl-eq}中各个方程的两边作用适当的算符来让两个场解耦，就得到
\[
    \partial_\mu \partial^\mu \psi_L = - m_1 m_2 \psi_L, \quad \partial_\mu \partial^\mu \psi_R = - m_1 m_2 \psi_R,
\]
也就是说狄拉克旋量也满足克莱因-高登方程，只需要我们令$m^2=m_1 m_2$。从而为了得到物理解，我们要求$m \geq 0$。
可以看到$m_1$和$m_2$的具体取值实际上是无关紧要的，重要的是它们的乘积，因此以下让它们都取$m$。

为了将\eqref{eq:interacting-weyl-eq}写成更加紧凑的形式，引入$\gamma$矩阵%
\footnote{这里给出的$\gamma$矩阵的形式实际上只是一种可能性。我们称这种将狄拉克旋量的左手部分和右手部分分开处理（或者等价地说，狄拉克旋量的基或者只含有左手旋量，或者只含有右手旋量），并且按照\eqref{eq:gamma-matrix}引入$\gamma$矩阵的方式为\concept{魏尔表象}。也可以取其它的旋量基，从而获得其它表象。}
\begin{equation}
    \gamma^\mu = \pmqty{0 & \sigma^\mu \\ \bar{\sigma}^\mu & 0}, \quad \gamma^5 = \pmqty{-I & 0 \\ 0 & I},
    \label{eq:gamma-matrix}
\end{equation}
从而
\begin{equation}
    \gamma_\mu = \eta_{\mu \nu} \gamma^\nu = \pmqty{ 0 & \bar{\sigma}^\mu \\ \sigma^\mu & 0 },
\end{equation}
则得到
\begin{equation}
    (\ii \gamma^\mu \partial_\mu - m) \psi = 0.
    \label{eq:dirac-eq}
\end{equation}
这就是\concept{狄拉克方程}。如前所述，它能够推导出克莱因-高登方程，并且在$m$取零时退化为一个左手旋量场和一个右手旋量场的简单组合。

现在我们尝试拼凑一个拉氏量出来。由于狄拉克场的运动方程是一阶的而它又是一个复场，需要通过$\psi$的复共轭拼凑出一个在运动方程意义下“独立”的场，然后构造一个同时包含$\psi$及其复共轭的拉氏量，由这个拉氏量给出关于$\psi$和它的复共轭的两个方程，并且这两个方程必须等价。
现在我们尝试寻找和\eqref{eq:dirac-eq}等价，但是仅仅包含其复共轭的方程。
由\eqref{eq:dirac-eq}取共轭转置%
\footnote{这里的共轭转置是指场的共轭转置，不需要对作用在场上的算符$\partial_\mu$取共轭转置。}
，得到
\[
    (-\ii) \partial_\mu \psi^\dagger (\gamma^\mu)^\dagger - m \gamma^\dagger = 0.
\]
容易验证$\gamma$矩阵具有下面的性质：
\[
    (\gamma^0)^\dagger = \gamma^0, \quad (\gamma^i)^\dagger = - \gamma^i, 
\]
以及
\[
    \gamma^i \gamma^0 = - \gamma^0 \gamma^i,
\]
我们发现
\[
    \ii \partial_0 \psi^\dagger \gamma^0 \gamma^0 + \ii \partial_i \psi^\dagger \gamma^0 \gamma^i + m \psi^\dagger \gamma^0 = 0.
\]
定义
\begin{equation}
    \bar{\psi} = \psi^\dagger \gamma^0,
\end{equation}
则其运动方程为
\begin{equation}
    \ii \partial_\mu \bar{\psi} \gamma^\mu + m \bar{\psi} = 0.
    \label{eq:cog-dirac-eq}
\end{equation}
这正是我们需要的另一个运动方程。
我们会发现，拉氏量
\begin{equation}
    \mathcal{L} = \bar{\psi} (\ii \gamma^\mu \partial_\mu - m) \psi
    \label{eq:dirac-lagrangian}
\end{equation}
分别对$\psi$和$\bar{\psi}$应用欧拉-拉格朗日方程，就得到\eqref{eq:dirac-eq}和\eqref{eq:cog-dirac-eq}。同时容易验证这是一个洛伦兹标量。这表明\eqref{eq:dirac-lagrangian}确实就是狄拉克场的拉氏量。
我们之后还会非常频繁地写$\gamma^\mu a_\mu$这样的量，可以将其简记为$\slashed{a}$。

从\eqref{eq:dirac-lagrangian}可以推导出对应的哈氏量。计算共轭动量可以得到
\begin{equation}
    \pi = \ii \bar{\psi} \gamma^0 = \ii \psi^\dagger,
\end{equation}
从而能够得到哈氏量密度
\begin{equation}
    \mathcal{H} = - \ii \bar{\psi} \gamma^i \partial_i \psi  + m \bar{\psi} \psi = - \pi \gamma^0 \gamma^i \partial_i \psi - \ii m \pi \gamma^0 \psi.
    \label{eq:dirac-hamiltonian}
\end{equation}

有时我们需要让一个狄拉克旋量中的左手部分或是右手部分单独拿出来与其它场耦合。
容易看出，矩阵
\begin{equation}
    P_L = \frac{1 - \gamma^5}{2}, \quad P_R = \frac{1 + \gamma^5}{2}
\end{equation}
分别是左手旋量和右手旋量的投影算符。

\paragraph{狄拉克表象} 以上我们都设$\psi$的各分量由一个左手旋量和一个右手旋量拼凑而成。这称为\concept{手性基}或者\concept{魏尔表象}。%
\footnote{
    虽然我们在讨论场算符，但是这些场算符可以直接激发出单粒子态，后者和前者之间的关系是线性的，所以“基底”或“表象”的术语确实是正确的：它们的确给出了单费米子的一组基底。
}%
在手性基当中，拉氏量的质量项为
\[
    - \bar{\psi} m \psi = - m (\chi_L^\dagger \xi_R + \xi_R^\dagger \chi_L),
\]
这不是一个对角化的二次型。若做分量变换
\begin{equation}
    \psi' = \frac{1}{\sqrt{2}} \underbrace{\pmqty{1 & 1 \\ -1 & 1}}_{U} \psi, \quad \gamma'^\mu = U \gamma^\mu U^\dagger,
\end{equation}
质量项就被对角化了。我们称这种分量选取为\concept{质量基}或者\concept{狄拉克表象}。
在后面做量子化时会看到，在魏尔表象中，$\psi$的$p^0 > 0$的解包含权重相等的一个左手旋量分量和一个右手旋量分量，$p^0 < 0$的解包含权重正好差一个负号的一个左手旋量分量和一个右手旋量分量，因此狄拉克表象下，$\psi$的前两个分量代表$p^0 > 0$的模式而后两个分量代表$p^0 < 0$的模式。
实际上，这就意味着狄拉克表象的前两个分量代表自旋一上一下的两种粒子，而后两个分量分别代表自旋一上一下的两种反粒子。

容易计算出质量基下
\begin{equation}
    \gamma^0 = \pmqty{I & 0 \\ 0 & -I}, \quad \gamma^i = \pmqty{0 & \sigma^i \\ - \sigma^i & 0 }, \quad \gamma^5 = \pmqty{0 & I \\ I & 0}.
\end{equation}
在质量基下，左手投影算符和右手投影算符分别是

\subsubsection{$\gamma$矩阵和Clifford代数}

\paragraph{$\gamma$矩阵的乘法规则}

\paragraph{$\gamma$矩阵的洛伦兹变换} %TODO：旋量场的洛伦兹标量

$\gamma$矩阵的洛伦兹变换需要一些特别的注记。如果我们做像本文定义的那样的洛伦兹变换，即让旋量场变换，那么$\gamma$矩阵在洛伦兹变换下根本就不应该发生变化。
但是，另一方面，$\bar{\psi} \gamma^\mu \psi$可以验证的确是矢量。
这种看似冲突的情况——$\gamma$矩阵同时看起来像标量和矢量——当然来自它们代表的是可以作用在单粒子态上的算符，或者作用在场算符上的“元算符”，而非场算符本身这一事实。
回顾引入狄拉克旋量的过程，$\gamma$矩阵的作用其实是“正确地将左手部分的魏尔旋量和右手部分的魏尔旋量混合起来”，它实际上提供了拉氏量关于旋量场的形式，自然在洛伦兹变换下可以没有变化。

这样在实际计算中我们其实可以在很多时候将旋量有关的量——旋量场和$\gamma$矩阵——当成没有内部结构的对象，即假装系统中只有标量和矢量，而通过正确地排列旋量场和$\gamma$矩阵的顺序来完成本应通过旋量指标完成的工作。
对矢量当然也可以这么做，实际上研究数值计算时我们将一切都写成矩阵就是在做这件事；在量子场论中不这么做的主要原因是，在量子场论中我们需要频繁讨论矢量的任意张量积，从而保留上下指标会让计算变得直观，而对旋量做的操作则相当有限。

\paragraph{$\gamma$矩阵的物理意义} 我们已经看到$(1-\gamma^5)/2$和$(1+\gamma^5)/2$分别是左手和右手的手征投影算符。
还可以验证，
\begin{equation}
    \gamma^5 P_L \psi = - P_L \psi, \quad \gamma^5 P_R \psi = P_R \psi,
\end{equation}
因此$\gamma^5$是\concept{手征算符}，其负本征值对应左旋态而正本征值对应右旋态。
另一方面，$\gamma^0$则交换一个狄拉克旋量的左手和右手部分。

\subsection{旋量场的正则量子化}

\subsubsection{平面波模式}

我们还是例行公事地观察狄拉克方程的平面波解，并将其中的场变量用算符代替。接下来将使用手性基。
平面波旋量场的分量应该包括这些标记：首先是动量。三维动量给定之后，对时谐场有$p^0 = \pm \omega_{\vb*{p}}$，但由于旋量场不是实场，因此其正频率部分和负频率部分之间没有简单的关系，即不能统一用$a$和$a^\dagger$表示而需要引入两种模式。
在动量给定后，只需要求解
\[
    (\gamma^\mu p_\mu - m) \psi = 0.
\]
洛伦兹变换不会改变这个方程的解的结构，所以为了弄清楚方程的解大致是什么样的我们可以先求解
\[
    (\gamma^0 p_0 - m) \psi = 0.
\]
我们会发现$p^0 = \pm \omega_{\vb*{p}}$各自对应两个独立的解，分别是
\[
    \pmqty{1 \\ 0 \\ 1 \\ 0}, \quad \pmqty{0 \\ 1 \\ 0 \\ 1}, \quad \pmqty{1 \\ 0 \\ -1 \\ 0}, \quad \pmqty{0 \\ 1 \\ 0 \\ -1}.
\]
容易验证自旋算符和哈密顿量对易，且魏尔旋量的两个分量正好就代表两种不同的自旋。
因此，标记平面波旋量场的分量的独立标签包括：三维动量，频率的正负，以及自旋$1/2$。
这样，我们设
\begin{equation}
    \psi(x) = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{\sqrt{2 \omega_{\vb*{p}}}} (a_{\vb*{p}, s} u^s(p) \ee^{-\ii p \cdot x} + b_{\vb*{p}, s} v^s(p) \ee^{\ii p \cdot x}),
\end{equation}
其中$s = \pm 1/2$，$u^s$和$v^s$分别满足（这里$p_i$仍然和$p^i$差一个负号，以和闵可夫斯基时空度规一致）
\begin{equation}
    (\gamma^0 \omega_{\vb*{p}} + \gamma^i p_i) u_s(p) = m u_s(p), \quad (- \gamma^0 \omega_{\vb*{p}} + \gamma^i p_i) v_s(p) = m v_s(p), 
    \label{eq:u-v-eigen}
\end{equation}
并且被归一化为
\begin{equation}
    (u^r(p))^\dagger u^s(p) = 2 \omega_{\vb*{p}} \delta^{rs}, \quad (v^r(p))^\dagger v^s(p) = 2 \omega_{\vb*{p}} \delta^{rs}, \quad (u^r(p))^\dagger v^s(p) = 0.
    \label{eq:dirac-norm}
\end{equation}
这里$2\omega_{\vb*{p}}$因子是为了和后面的正则量子化中的动量积分中的$1/2\omega_{\vb*{p}}$因子抵消，从而保证正确的归一化，让动量产生湮灭算符的对易子为$\delta^3(\vb*{p} - \vb*{p})$的同时，$\psi$和$\ii \psi^\dagger$的对易子为$\ii \delta(\vb*{x} - \vb*{y})$。

代入哈密顿量，可以得到（我们会发现哈密顿量\eqref{eq:dirac-hamiltonian}中的第一项和\eqref{eq:u-v-eigen}左边的第二项抵消了）
\[
    H = \sum_{s} \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \omega_{\vb*{p}} (a^\dagger_{\vb*{p}, s} a_{\vb*{p}, s} - b^\dagger_{\vb*{p}, s} b_{\vb*{p}, s}).
\]

看起来我们有麻烦了——$b$模式上的粒子产生得越多，能量越低，似乎出现了能量的无限下降。
然而，如果对$\psi$场施加反对易关系，就会得到
\[
    H = \sum_{s} \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \omega_{\vb*{p}} (a^\dagger_{\vb*{p}, s} a_{\vb*{p}, s} + b_{\vb*{p}, s} b^\dagger_{\vb*{p}, s} - 1),
\]
在略去发散但是是常数的真空零点能之后就得到
\begin{equation}
    H = \sum_{s} \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \omega_{\vb*{p}} (a^\dagger_{\vb*{p}, s} a_{\vb*{p}, s} + b_{\vb*{p}, s} b^\dagger_{\vb*{p}, s} ).
\end{equation}
现在如果我们将$b$看成某种粒子的\emph{产生}算符，而将$b^\dagger$看成\emph{湮灭}算符，那么我们就完成了量子化——哈密顿量变成了占据数的一次函数，并且有正确的反对易关系。
另一方面，如果施加对易关系，虽然也可以得到不会无限下降的哈密顿量，但是不能将$b$看成某种粒子的\emph{产生}算符，而将$b^\dagger$看成\emph{湮灭}算符，因为设$\tilde{b} = b^\dagger$，就有$\comm*{\tilde{b}}{\tilde{b}^\dagger} = -1$，而不是我们需要的$+1$。

于是，我们交换$b$和$b^\dagger$的位置，而要求
\begin{equation}
    \psi(x) = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{\sqrt{2 \omega_{\vb*{p}}}} (a_{\vb*{p}, s} u^s(p) \ee^{-\ii p \cdot x} + b^\dagger_{\vb*{p}, s} v^s(p) \ee^{\ii p \cdot x}),
\end{equation}
并施加反对易关系
\begin{equation}
    \acomm*{\psi_a(\vb*{x})}{\psi^\dagger_b(\vb*{y})} = \delta^3(\vb*{x} - \vb*{y}) \delta_{ab},
\end{equation}
则哈密顿量就是
\begin{equation}
    H = \sum_{s} \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \omega_{\vb*{p}} (a^\dagger_{\vb*{p}, s} a_{\vb*{p}, s} + b^\dagger_{\vb*{p}, s} b_{\vb*{p}, s} ).
\end{equation}

$b$模式和$a$模式互为反粒子。通过将$\psi$场的傅里叶展开中的积分变量换成$-\vb*{p}$（不改变积分值），可以发现
% 有误：只是对应，还需要加上$u$和$v$矩阵的切换
\[
    a^\dagger_{\vb*{p}} \ee^{- \ii \omega_{\vb*{p}} t} = b_{-\vb*{p}} \ee^{\ii \omega_{\vb*{p}} t},
\]
即它们的确互为反粒子。我们通常以$b^\dagger$为反粒子，虽然这只是习惯问题。
在绘制含有反粒子的费曼图时应当令传播子上的箭头和与传播子平行的动量箭头方向相反，这样顶角的形式无需因为传入的是粒子还是反粒子而改变（例如，$\gamma^\mu A_\mu \bar{\psi} \psi$的形式在这种情况下永远是“一条玻色子线连接一条方向指向顶角的费米子线和一条方向远离顶角的费米子线”），而又提醒了我们一个传播子是反粒子，同时顶角的动量守恒关系也非常直观。
这可以直观地展示为
\[
    \begin{tikzpicture}
        \begin{feynhand}
            \vertex (a) at (0,0); \vertex (b) at (2,0);
            \propag[fer, mom={$-k$}] (a) to (b);
        \end{feynhand}
    \end{tikzpicture} a(-k) = 
    \begin{tikzpicture}
        \begin{feynhand}
            \vertex (a) at (0,0); \vertex (b) at (2,0);
            \propag[fer, revmom={$k$}] (a) to (b);
        \end{feynhand}
    \end{tikzpicture} =
    b^\dagger(k) \begin{tikzpicture}
        \begin{feynhand}
            \vertex (a) at (0,0); \vertex (b) at (2,0);
            \propag[anti fermion, mom={$-k$}] (a) to (b);
        \end{feynhand}
    \end{tikzpicture} .
\]

总之，对旋量场，由于负能量部分（即反粒子）的存在，对易关系是不适用的，因此必须选择反对易关系，这意味着旋量场一定是费米场。

\subsubsection{旋量场的偏振}

现在我们只是形式地写出了$u$和$v$，但是并没有真的计算出它们具体是多少。
计算它们具体是多少是很重要的，因为显然易见，计算偏振方向任意的散射振幅时要用到它们。

首先，对$\vb*{p}=0$的情况，有
\begin{equation}
    u(p) = \sqrt{m} \pmqty{\xi \\ \xi}, \quad \xi^\dagger \xi = 1,
\end{equation}
这样和归一化条件\eqref{eq:dirac-norm}一致。

不失一般性地，认为$\vb*{p}$指向$z$轴。我们的策略是这样的：首先写出动量和推动参数$\eta$之间的关系%
\footnote{
    这里有一个可能的问题，虽然我们确定与能量匹配、共同组成四维动量的那个$\vb*{p}$和标记了自由旋量场的稳定模式的那个$\vb*{p}$都是空间平移的生成元，万一它们没有被一起“定标”怎么办？比如说，如果正好差一个常数怎么办？自旋就有这样的情况。
    好在我们已经证明，对后者也有$E^2 = \abs*{\vb*{p}}^2 + m^2$，因此这两个$\vb*{p}$的的确确是同一个东西。
}%
，然后将$\eta$代入旋量场的洛伦兹变换计算出动量为$\vb*{p}$的模式。

设我们做了一个洛伦兹变换，空间动量方向指向$z$轴，即有
\[
    \pmqty{E \\ p^3} = \exp(\eta \pmqty{0 & 1 \\ 1 & 0}) \pmqty{m \\ 0} = \pmqty{m \cosh \eta \\ m \sinh \eta},
\]
另一方面，在$p=(E, 0, 0, p^3)$时
% TODO:以及统一记号

\begin{equation}
    u(p) = \pmqty{ \sqrt{p \cdot \sigma} \xi \\ \sqrt{p \cdot \bar{\sigma}} \xi },
\end{equation}
类似地可以得到
\begin{equation}
    v(p) = \pmqty{ \sqrt{p \cdot \sigma} \xi \\ - \sqrt{p \cdot \bar{\sigma}} \xi }.
\end{equation}

\begin{equation}
    \bar{u}^r(p) u^s(p) = 2 m \delta^{rs}, \quad u^{r \dagger}(p) u^s(p) = 2 \omega_{\vb*{p}} \delta^{rs},
\end{equation}
\begin{equation}
    \bar{v}^r(p) v^s(p) = - 2 m \delta^{rs}, \quad v^{r \dagger}(p) v^s(p) = 2 \omega_{\vb*{p}} \delta^{rs}.
\end{equation}

\begin{equation}
    \sum_s u^s(p) \bar{u}^s(p) = \slashed{p} + m, \quad \sum_s v^s(p) \bar{v}^s(p) = \slashed{p} - m.
\end{equation}

后面我们将会用$\xi$表示$(\xi^1, \xi^2)$，从而$\xi^\dagger \xi = \sigma^0$。

\subsubsection{守恒量和洛伦兹不变量}

\begin{equation}
    \sigma^{\mu \nu} = \frac{\ii}{2} \comm*{\gamma^\mu}{\gamma^\nu}
\end{equation}

\subsubsection{旋量场的传播子}

现在计算旋量场的各种传播子。旋量场的传播子定义需要特别注意，因为一个$\psi$中含有一种粒子和一种反粒子。
所幸，一个只含有空间定域的正费米子的态还是可以通过$\psi^\dagger \ket{0}$创建，因为反费米子的湮灭算符作用在真空态上给出零，没有任何贡献。
看起来，用$\mel*{0}{\psi \psi^\dagger}{0}$做正费米子的传播子而用$\mel*{0}{\psi^\dagger \psi}{0}$做反费米子的传播子应该是正确的。
然而，可以发现，这样的传播子不是洛伦兹协变的。能够从相对论性量子场论的路径积分计算出来的关联函数肯定是洛伦兹协变的，既然$\mel*{0}{T \psi \psi^\dagger}{0}$不是洛伦兹协变，那么可能并不能很容易地计算它，可能Wick定理都不一定成立，等等。
因此我们应该计算和$\mel*{0}{T \psi \psi^\dagger}{0}$只差一个可逆矩阵变换但是是洛伦兹协变的$\mel*{0}{T \psi \bar{\psi}}{0}$。%
\footnote{
    没有什么规定了传播子一定要定义成$\mel*{0}{\psi \psi^\dagger}{0}$的形式；计算传播子的目的是获得一种简便易行的方式，可用于从一个拉氏量中提取时间演化算符在多粒子态（可以使用场的连乘构造）下的矩阵元，因此传播子只需要大体上长成$\mel*{0}{\psi \psi^\dagger}{0}$的形式即可，差一个线性变换是完全可以的，只要所有重要的信息都能够恢复出来。
}%

\subsubsection{旋量场的路径积分量子化}

其实用路径积分算这个更快
\begin{equation}
    D_F(x-y) = \mel{0}{T \psi(x) \bar{\psi}(y)}{0} = \int \frac{\dd[4]{p}}{(2\pi)^4} \frac{\ii (\slashed{p} + m)}{p^2 - m^2 + \ii 0^+} \ee^{- \ii p \cdot (x- y)}.
\end{equation}

% TODO：费曼图
费米子的费曼规则比较难写。但是在规范场论中其实很好写，因为一张图中不存在涉及一个以上费米子的顶角，即每个顶角中都只有一个费米子进去，一个费米子出来，矩阵$\gamma^\mu$，$u$和$v$（列矢量按照$s$指标排成矩阵）只需要按照这个费米子的“世界线”依次累乘即可。

\subsection{非相对论极限}

在非相对论极限下旋量场当然也会退化成薛定谔场。

\section{矢量场}


\subsection{矢量场的麦克斯韦方程和布洛卡方程}

\subsubsection{对称性分析}

% TODO：$(\partial_\mu A^\mu)^2$
由于自由场导数阶数的限制，出现在拉氏量中的只能是$A^\mu$和$\partial^\nu A^\mu$构成的一次或二次不变量。当然，实际上也可以出现$\partial_\mu A^\nu$或者$\partial_\mu A_\mu$这种，但因为它们都可以使用$\partial^\nu A^\mu$表示出来，故没有必要考虑它们。
只含有$A^\mu$二次不变量为$A^\mu A_\mu$，没有一次不变量；只含有$\partial^\mu A^\nu$的一次不变量是它自我缩并得到的$\partial^\mu A_\mu$，二次的不变量是两个$\partial^\mu A^\nu$缩并得到的$\partial^\mu A^\nu \partial_\mu A_\nu$和$\partial^\mu A^\nu \partial_\nu A_\mu$。
由于参数都是标量，$\partial^\mu A^\nu$不能和参数缩并，也不能和$A^\mu$缩并（$C^\nu A^\mu \partial_\nu A_\mu$要求参数是矢量，$A^\mu A^\nu \partial_\mu A_\nu$是三次项），因此我们得到了所有可能的不变量。
从而拉氏量形如
\[
    \mathcal{L} = C_1 A^\mu A_\mu + C_2 \partial^\mu A_\mu + C_3 \partial^\mu A^\nu \partial_\mu A_\nu + C_4 \partial^\mu A^\nu \partial_\nu A_\mu.
\]
代入欧拉-拉格朗日方程可以看出，$C_2$项在运动方程中不会引入任何项，故略去。
于是
\[
    \mathcal{L} = C_1 A^\mu A_\mu + C_3 \partial^\mu A^\nu \partial_\mu A_\nu + C_4 \partial^\mu A^\nu \partial_\nu A_\mu.
\]
代入欧拉-拉格朗日方程，得到
\begin{equation}
    \partial_\mu (C_3 \partial^\mu A^\nu +  C_4 \partial^\nu A^\mu) = C_1 A^\nu.
    \label{eq:vector-motion-eq}
\end{equation}
我们首先考虑$C_3 = - C_4$时的特殊情况。重新定义各系数，使得
\begin{equation}
    \mathcal{L} = - \frac{1}{2} \partial^\mu A^\nu \partial_\mu A_\nu + \frac{1}{2} \partial^\mu A^\nu \partial_\nu A_\mu + \frac{m^2}{2} A_\mu A^\mu,
\end{equation}
对应的，
\begin{equation}
    \partial_\mu (\partial^\mu A^\nu - \partial^\nu A^\mu) + m^2 A^\nu = 0.
    \label{eq:proca-eq}
\end{equation}
常定义
\begin{equation}
    F^{\mu \nu} = \partial^\mu A^\nu - \partial^\nu A^\mu,
\end{equation}
于是就有
\begin{equation}
    \mathcal{L} = - \frac{1}{4} F_{\mu \nu} F^{\mu \nu} + \frac{1}{2} m^2 A_\mu A^\mu.
    \label{eq:proca-lagrangian}
\end{equation}
现在回到一般情况。我们指出这样一个结论：无论$C_3,C_4$取什么值，对应的场$A^\mu$都可以和$C_3 = - C_4$时的某个场${A'}^\mu$建立一一对应。
% TODO:证明
因此布洛卡方程\eqref{eq:proca-eq}就不失一般性地描写了所有的矢量场的运动方程。

\eqref{eq:proca-eq}在$m \neq 0$时可以推导出克莱因-高登方程。注意到
\[
    m^2 \partial_\nu A^\nu = \partial_\nu \partial_\mu \partial^\nu A^\mu - \partial_\mu \partial^\mu \partial_\nu A^\nu = 0,
\]
于是
\begin{equation}
    \partial_\mu A^\mu = 0.
    \label{eq:lorentz-gauge}
\end{equation}
回代入\eqref{eq:proca-eq}，发现其左边第二项为零，于是
\[
    \partial_\mu \partial^\mu A^\nu + m^2 A^\nu = 0.
\]
于是\eqref{eq:proca-eq}就约化成了\eqref{eq:lorentz-gauge}和四个克莱因-高登方程。
而当$m=0$时，运动方程在规范变换
\begin{equation}
    A^\mu \longrightarrow {A'}^\mu = A^\mu + \partial^\mu \varphi
\end{equation}
下不变。这意味着矢量场$A^\mu$的四个自由度实际上是多余的。%
\footnote{显然，只要选定了一个$\varphi$，同一个时间点上的$A^\mu$和${A'}^\mu$之间必定可以建立起一一对应关系。形象地说，不同$\varphi$对应的$A'$的运行轨迹相互平行，因此只需要其中一条轨迹就能够确定所有轨迹。选取特定的一条轨迹就是选取一个规范。
规范自由度——也就是决定“实际的轨道是哪一条”的自由度——是一个隐藏的额外自由度。
这里的情况和对称性自发破缺有点类似，在后者中，隐藏的自由度是序参量。不同的隐藏的额外自由度取值将系统的态空间分成了互不相交的分支。
可以认为规范自由度不是物理的自由度，也就是说它仅仅出现在拉氏量中，而规范自由度取值不同的状态在希尔伯特空间中应该被认为是同样的状态。
选取一个规范意味着先假定规范自由度取值不同的状态真的是不一样的，然后取状态空间中的一个分支。}%
换而言之，存在\emph{规范冗余性}。

\subsubsection{重矢量场的哈密顿量}

矢量场的共轭动量为
\[
    \pi_\mu = \partial_\mu A^0 - \partial^0 A_\mu,
\]
或者写成
\begin{equation}
    \pi^\mu = \partial^\mu A^0 - \partial^0 A^\mu.
\end{equation}
注意到$\pi^0 = 0$，因此可以只讨论其空间部分$\vb*{\pi}$。
在质量$m$不为零时场没有规范不变性，可以直接做计算得到
\begin{equation}
    A^0 = - \frac{1}{m^2} \div{\vb*{\pi}},
\end{equation}
以及
\begin{equation}
    \partial_0 A^0 = - \partial_i A^i = - \div{\vb*{A}},
\end{equation}
哈氏量为
\begin{equation}
    \mathcal{H} = \frac{1}{2} \vb*{\pi}^2 + \frac{1}{2m^2} (\div{\vb*{\pi}})^2 + \frac{1}{2} (\curl{\vb*{A}})^2 + \frac{1}{2} m^2 \vb*{A}^2.
\end{equation}
$m$出现在了分母中，这意味着无质量的场需要额外处理。

\subsubsection{麦克斯韦理论的经典规范选取}

现在来处理无质量的场。其运动方程为
\[
    \partial_\mu (\partial^\mu A^\nu - \partial^\nu A^\mu) = 0.
\]
无论$\partial_\mu A^\mu$是什么，总可以找到一个$\varphi$使得
\[
    \partial_\mu \partial^\mu \varphi = - \partial_\mu A^\mu,
\]
从而对应的有
\[
    \partial_\mu {A'}^\mu = 0.
\]
于是我们不失一般性地强行要求\eqref{eq:lorentz-gauge}对$m=0$时的矢量场成立。这称为选取了\concept{洛伦兹规范}。选取了洛伦兹规范意味着，实际的场自由度只有三个。知道了$A$的三个分量就可以计算出第四个。
当然，这不是唯一的规范选取方式。例如可以直接要求$A^0 = 0$，称为\concept{辐射规范}。
选取洛伦兹规范的好处在于，方程\eqref{eq:lorentz-gauge}是洛伦兹协变的，因此在做量子化时能够直接套用正则量子化关系而不必担心场方程不是洛伦兹协变而产生的修正。

我们施加洛伦兹规范。当然也可以选取别的规范，但这可能会破坏洛伦兹协变性，从而导致我们得到的哈密顿动力学实际上是带有约束的，从而给之后做量子化带来麻烦。
此时运动方程为
\begin{equation}
    \partial_\mu \partial^\mu A^\nu = 0.
    \label{eq:massless-vector-eq}
\end{equation}
拉氏量\eqref{eq:proca-lagrangian}直接导出的不是这个方程，于是我们使用另一个能够直接导出\eqref{eq:massless-vector-eq}的拉氏量
\begin{equation}
    \mathcal{L} = - \frac{1}{4} F_{\mu \nu} F^{\mu \nu} - \frac{1}{2} (\partial_\mu A^\mu)^2.
    \label{eq:maxwell-lagrangian-fixed}
\end{equation}
可以看到这个拉氏量多出了一项，这个实际上就是所谓的规范固定项。
在给定了洛伦兹规范的前提下，这个拉氏量实际上就和$m=0$的\eqref{eq:proca-lagrangian}是等价的。
此时
\begin{equation}
    \pi^0 = -\partial_\mu A^\mu, \quad \pi^i = \partial^i A^0 - \partial^0 A^i.
\end{equation}
当然，由洛伦兹规范，$\pi^0$就是零，不过我们完全可以算出哈密顿量之后再施加洛伦兹规范。
哈密顿量为 % TODO:这一部分似乎不需要太多笔墨，反正量子化的时候都是重新算的 关键之处在于哈密顿量和规范是有关的
\begin{equation}
    \mathcal{H} = 
\end{equation}

\subsection{无质量矢量场的正则量子化}

无质量矢量场的正则量子化涉及很多棘手的细节。

\subsubsection{横场量子化}

使用\eqref{eq:field-operator-fourier}展开一个无质量矢量场为
\begin{equation}
    A_\mu (\vb*{x}, t) = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{\sqrt{2 \omega_{\vb*{p}}}} \sum_{r=0}^3 \epsilon_\mu^r(\vb*{p}) \left({a}_{\vb*{p}, r}^\dagger \ee^{ - \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} + {a}_{\vb*{p}, r} \ee^{ \ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} \right), 
    \label{eq:expanding-massless-vector-field}
\end{equation}
由于没有质量，
\begin{equation}
    \omega_{\vb*{p}} = \abs{\vb*{p}}.
\end{equation}
$\epsilon^r$为一组闵可夫斯基时空的基矢量，称它们为\concept{偏振矢量}，也即，
\begin{equation}
    (\epsilon^r)_\mu (\epsilon^{r'})^\mu = \eta^{r r'}.
\end{equation}
为了确定偏振矢量，通常要求
\begin{equation}
    \epsilon^1 \cdot p = \epsilon^2 \cdot p = 0,
\end{equation}
并认为$\epsilon^0$是类时的，而$\epsilon^{1,2,3}$是类空的。这样，当$p^\mu \propto (1, 0, 0, 1)$，即$\vb*{p}$指向$z$轴时，我们有
\begin{equation}
    \epsilon^0 = \pmqty{1 \\ 0 \\ 0 \\ 0}, \quad \epsilon^1 = \pmqty{0 \\ 1 \\ 0 \\ 0}, \quad \epsilon^2 = \pmqty{0 \\ 0 \\ 1 \\ 0}, \quad \epsilon^3 = \pmqty{0 \\ 0 \\ 0 \\ 1}.
    \label{eq:z-axis-p-epsilon}
\end{equation}
% TODO:这是$\epsilon^\mu$还是$\epsilon_\mu$？？？
$p$取其它值时只需要对\eqref{eq:z-axis-p-epsilon}做洛伦兹变换即可，因为$\epsilon$的定义完全是洛伦兹协变的。

% TODO:为什么？这一片我都没有动手算过，
可以计算出
\begin{equation}
    \pi^\mu (\vb*{x}, t) = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \sqrt{\frac{\omega_{\vb*{p}}}{2}} \ii \sum_{r=0}^3 (\epsilon^r)^\mu (\vb*{p}) \left( {a}_{\vb*{p}, r} \ee^{\ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} - {a}_{\vb*{p}, r}^\dagger \ee^{ - \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} \right),
\end{equation}
施加正则对易关系，通过计算得到
% TODO：真的可以**等价**地得到下式吗？？
\begin{equation}
    \comm*{{a}_{\vb*{p}, \lambda}}{{a}^\dagger_{\vb*{p}', \lambda'}} = - \eta_{\lambda \lambda'} (2\pi)^3 \delta^3(\vb*{p} - \vb*{p}'), \quad \comm*{{a}^\dagger_{\vb*{p}, \lambda}}{{a}^\dagger_{\vb*{p}', \lambda'}} = \comm*{{a}_{\vb*{p}, \lambda}}{{a}_{\vb*{p}', \lambda'}} = 0.
\end{equation}
$\lambda=1, 2, 3$时对易关系是正确的，但是$\lambda=0$给出了一个不正常的对易关系
\[
    \comm*{{a}_{\vb*{p}, 0}}{{a}^\dagger_{\vb*{p}', 0}} = - (2\pi)^3 \delta^3 (\vb*{p} - \vb*{p}').
\]
例如，它产生的同样的单粒子态的内积将会是一个负数，这和我们对单粒子态的通常认识不符。
此外，哈密顿量成为
\begin{equation}
    {H} = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \omega_{\vb*{p}} \left( - {a}_{\vb*{p},0}^\dagger {a}_{\vb*{p}, 0} + \sum_{i=1}^3 {a}_{\vb*{p},i}^\dagger {a}_{\vb*{p}, i} \right),
\end{equation}
因此能量非正定。
显然这些问题都和${a}^\dagger_{\vb*{p},0}$有关，也就是说来自一个非物理的自由度。
会有非物理的自由度是显然的，因为我们在处理一个有规范不变性的场却从来没有选取过一个规范。
现在我们处理的是量子场，因此既可以直接对场做约束，也可以缩小态空间的范围。

我们先尝试直接将洛伦兹规范作用在场上，即要求对场算符有
\[
    \partial^\mu A_\mu = 0.
\]
然而，这是不可能的，
% TODO
经过检验，Gupia-Blenler量子化条件
\begin{equation}
    \partial^\mu {A}_\mu^{(+)} \ket{\psi} = 0
    \label{eq:gupia-blenlder}
\end{equation}
是一个可行的方案。
它实际上约束了态空间的范围。
代入\eqref{eq:expanding-massless-vector-field}，并注意到$\epsilon^1$与$\epsilon^2$和四维动量做内积得到零，我们发现
\begin{equation}
    ({a}_{\vb*{p}, 0} - {a}_{\vb*{p}, 3}) \ket{\psi} = 0.
\end{equation}
这意味着在无质量矢量场的态空间中哈密顿量实际上是
\begin{equation}
    {H} = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \omega_{\vb*{p}} ({a}_{\vb*{p},1}^\dagger {a}_{\vb*{p}, 1} + {a}_{\vb*{p},2}^\dagger {a}_{\vb*{p}, 2}).
\end{equation}
于是负能量问题也就解决了。哈密顿量中没有出现的量可以直接被略去，因为它们对系统的动力学不产生任何影响。
% TODO:严格说明
于是取
\begin{equation}
    A_\mu (\vb*{x}, t) = \int \frac{\dd[3]{\vb*{x}}}{(2\pi)^3} \frac{1}{\sqrt{2 \omega_{\vb*{p}}}} \sum_{r=1}^2 \epsilon_\mu^r(\vb*{p}) \left({a}_{\vb*{p}, r}^\dagger \ee^{ - \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} + {a}_{\vb*{p}, r} \ee^{ \ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} \right),
\end{equation}
以及
\begin{equation}
    \pi^\mu (\vb*{x}, t) = \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \sqrt{\frac{\omega_{\vb*{p}}}{2}} \ii \sum_{r=1}^2 (\epsilon^r)^\mu (\vb*{p}) \left( {a}_{\vb*{p}, r} \ee^{\ii \vb*{p} \cdot \vb*{x} - \ii \omega_{\vb*{p}} t} - {a}_{\vb*{p}, r}^\dagger \ee^{ - \ii \vb*{p} \cdot \vb*{x} + \ii \omega_{\vb*{p}} t} \right),
\end{equation}
重新计算对易关系得到
\begin{equation}
    \comm*{{a}_{\vb*{p}, \lambda}}{{a}^\dagger_{\vb*{p}', \lambda'}} = \delta_{\lambda \lambda'} (2\pi)^3 \delta^3(\vb*{p} - \vb*{p}'), \quad \comm*{{a}^\dagger_{\vb*{p}, \lambda}}{{a}^\dagger_{\vb*{p}', \lambda'}} = \comm*{{a}_{\vb*{p}, \lambda}}{{a}_{\vb*{p}', \lambda'}} = 0, \quad \lambda = 1, 2.
\end{equation}

\subsubsection{守恒量}

下面我们推导动量和自旋角动量的公式。轨道角动量的由于是动量衍生出来的量，我们暂不考虑。
首先假设$p^\mu \propto (1, 0, 0, 1)$。
按照\eqref{eq:spin-angular-momentum}可以计算得到
\[
    {S}_3 = \int \dd[3]{\vb*{x}} \mathcal{S}_3 = \ii \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} (- {a}_{\vb*{p},1} {a}^\dagger_{\vb*{p}, 2} + {a}^\dagger_{\vb*{p}, 1} {a}_{\vb*{p}, 2} + {a}_{\vb*{p}, 2} {a}_{\vb*{p}, 1}^\dagger - {a}_{\vb*{p}, 2}^\dagger {a}_{\vb*{p}, 1} ) ,
\]
另外两个方向上的自旋角动量都是零。

我们原本预期矢量场会有三个自由度（因为\eqref{eq:lorentz-gauge}消除掉了一个自由度），但是实际上无质量矢量场只有两个自由度。
导致这一切的原因当然是无质量这个事实——它使得四维动量$p$不再能够写成$(1, 0, 0, 0)$这样的形式，而只能够写成$(1,0,0,1)$这样，从而让$A^0$和$A^3$相互抵消了。
从洛伦兹群在态空间上的表示出发可以更好地看待这个问题：$m=0$时洛伦兹群保持动量不变的小群不再是旋转群。
以一种更加物理的视角，无质量矢量场对应的粒子一直在以光速运动，不能找到一个相对它静止的参考系，因此对一个这样的粒子，实际上总是有一个特定的空间方向即它的运动方向，为了保持协变性，其自旋只能够沿着这个方向。换而言之，此时有意义的实际上是螺旋度而不是三维的角动量${\vb*{S}}$，即其内禀自由度是平面旋转群（以运动方向为轴旋转）的表示而不是三维旋转群的表示。
而对有质量的粒子，总是可以找到一个相对它静止的参考系，在这个参考系中空间是各向同性的，因此可以应用$SO(3)$的表示。
这和经典电磁场的偏振只有两个方向是对应的。
% TODO：经典场的傅里叶分量就是量子的产生湮灭算符

% TODO：场实际上只有两个自由度，因此粒子也只有两个内禀自由度，因此螺旋度是粒子的内禀自由度空间的CSCO。

% TODO：所以总之就是，无质量矢量场的自旋只在动量的方向上有非零分量，因此描述无质量矢量场的粒子的内禀自由度需要的实际上是螺度

\subsubsection{传播子}

由于洛伦兹度规的空间部分全部都是负的，我们有
\begin{equation}
    D_F = \mel*{0}{T A_{\mu}(x) A_{\nu}(y)}{0} = - \int \frac{\dd[4]{p}}{(2\pi)^4} \frac{\ii \eta_{\mu \nu}}{p^2 + \ii 0^+} \ee^{- \ii p \cdot (x - y)} = \int \frac{\dd[4]{p}}{(2\pi)^4} \frac{\ii \delta_{\mu \nu}}{p^2 + \ii 0^+} \ee^{- \ii p \cdot (x - y)}.
\end{equation}

有一点应该指出：规范选取\eqref{eq:gupia-blenlder}是作用在态上的。
这就是说，% TODO：虚光子？？？

\subsection{重矢量场的正则量子化}

\subsection{路径积分量子化和规范固定}

我们现在从路径积分的角度量子化无质量矢量场。我们首先尝试朴素地直接将$m=0$的\eqref{eq:proca-lagrangian}放入$\ee$指数，通过分部积分，得到
\begin{equation}
    S = - \frac{1}{4} \int \dd[4]{x} F_{\mu \nu} F^{\mu \nu} = \frac{1}{2} \int \dd[4]{x} = \frac{1}{2} \int \dd[4]{x} A^\mu (\eta_{\mu \nu} \partial^2 - \partial_\mu \partial_\nu) A^\nu,
\end{equation}
那么，合乎情理的下一步就是取积分核$(\eta_{\mu \nu} \partial^2 - \partial_\mu \partial_\nu)$的逆。
现在问题出现了：这个积分核根本就没有逆——其行列式为零。
因此，直接将$m=0$的\eqref{eq:proca-lagrangian}放入$\ee$指数得到的结果是发散的。
这当然是因为我们没有做规范固定。对无相互作用的无质量矢量场，局域对称操作
\[
    A^\mu \longrightarrow A^\mu + \partial^\mu \alpha
\]
不改变哈密顿量。实际上这是一个规范对称性，即这个局域操作不会改变量子态。然而，朴素地做路径积分不会考虑这一点，从而路径积分会对本该只求和一遍的场构型求和无数多遍。

本节将使用\concept{Faddeev-Popov量子化}方法，大致的思路是通过适当手段插入一个$\delta$函数，对一族规范等价的场构型，只挑选其中一个纳入路径积分。
这一方法的不足之处在于可能还不能消除所有的规范冗余性，但是对微扰计算来说，由于场构型的变动总是充分小的，Faddeev-Popov量子化足够给出可靠的答案。
我们在朴素版本的配分函数的$A$的积分后面插入
\[
    1 = \int \fd{\alpha} \delta(G(A^\alpha)) \det\left( \fdv{G(A^\alpha)}{\alpha} \right),
\]
其中$A^\alpha$就是$A+\partial \alpha$。这样就有
\[
    \begin{aligned}
        Z &= \int \fd{A} \int \fd{\alpha} \delta(G(A^\alpha)) \det\left( \fdv{G(A^\alpha)}{\alpha} \right) \ee^{\ii S[A]} \\
        &= \int \fd{\alpha} \int \fd{A^\alpha} \delta(G(A^\alpha)) \det\left( \fdv{G(A^\alpha)}{\alpha} \right) \ee^{\ii S[A^\alpha]},
    \end{aligned}
\]
其中$A^\alpha$的积分测度和$A$完全一样，且规范对称性意味着$S[A^\alpha]$和$S[A]$也一样。
为了保持洛伦兹协变性，$G(A)$可以选择为这样：
\begin{equation}
    G(A^\alpha) = \partial^\mu A_\mu^\alpha - \omega(x) = \partial^\mu A_\mu + \partial^2 \alpha - \omega(x),
\end{equation}
其中$\omega$是一个任意的标量函数。这样，雅可比行列式因子就可以提出积分号外，得到
\[
    \begin{aligned}
        Z &= (\det \partial^2) \int \fd{\alpha} \int \fd{A^\alpha} \delta(\partial^\mu A_\mu^\alpha - \omega) \ee^{\ii S[A^\alpha]} \\
        &= (\det \partial^2) \int \fd{\alpha} \int \fd{A} \delta(\partial^\mu A_\mu - \omega)  \ee^{\ii S[A]},
    \end{aligned}
\]
这里我们已经重新标记$A^\alpha$为$A$了。既然$\omega$可以随意变动，我们不妨对所有的$\omega$做一次求和，得到
\[
    \begin{aligned}
        Z' &= \int \fd{\omega} \ee^{-\ii \int \dd[4]{x} \frac{\omega^2}{2 \xi}} (\det \partial^2) \int \fd{\alpha} \int \fd{A} \delta(\partial^\mu A_\mu - \omega)  \ee^{\ii S[A]} \\
        &= (\det \partial^2) \int \fd{\alpha} \int \fd{A} \ee^{\ii S[A]} \exp(- \ii \int \dd[4]{x} \frac{1}{2 \xi} (\partial^\mu A_\mu)^2).
    \end{aligned}
\]
现在可以把前面的一大堆因子全部扔掉，得到最后的配分函数：
\begin{equation}
    Z = \int \fd{A} \exp(\ii \int \dd[4]{x} \left( - \frac{1}{4} F_{\mu \nu} F^{\mu \nu} - \frac{1}{2 \xi} (\partial^\mu A_\mu)^2\right)).
\end{equation}
可以看到，这实际上就是向拉氏量加了一个\concept{规范固定项}，破坏了拉氏量的规范对称性，但是得到的物理是完全一样的。
$\xi=1$称为\concept{费曼规范}，和\eqref{eq:maxwell-lagrangian-fixed}是一致的；$\xi=0$称为\concept{朗道规范}。

做完规范固定之后，可以按照正常的手续求出传播子。通过分部积分将作用量写成
\[
    S = \int \dd[4]{x} (A^\mu (\eta_{\mu \nu} \partial^2 - (1 - \frac{1}{\xi}) \partial_\mu \partial_\nu) A^\nu),
\]
于是
\[
    \mel{0}{T A_\mu(x) A_\nu(y)}{0} = \int \frac{\dd[4]{x}}{(2\pi)^4} \frac{\ii}{-k^2 \eta^{\mu \nu} + (1 - \frac{1}{\xi}) k^\mu k^\nu},
\]
并需要加上一个无穷小虚部。我们会发现
\[
    \left( -k^2 \eta^{\mu \nu} + (1 - \frac{1}{\xi}) k^\mu k^\nu \right) \left(\eta_{\nu \rho} - (1 - \xi) \frac{k_\nu k_\rho}{k^2} \right) = - k^2 \delta^\mu_\rho,
\]
于是
\begin{equation}
    D_F(x - y)_{\mu \nu} = \mel*{0}{T A_\mu(x) A_\nu(y)}{0} = \int \frac{\dd[4]{k}}{(2\pi)^4} \frac{-\ii}{k^2 + \ii 0^+} \left( \eta_{\mu \nu} - (1 - \xi) \frac{k_\mu k_\nu}{k^2} \right).
\end{equation}
这里多出来的一个负号是因为，在标量场和旋量场中，拉氏量动能项的两个导数算符分别作用在两个场上，将一个场视为入射，一个视为出射，切换到动量空间，得到的是$- \ii k \cdot \ii k = k^2$，而在这里，两个导数算符都作用在右边的场上，得到的是$(\ii k)^2=-k^2$。
请注意上式已经是做完规范固定之后的结果，无需再额外做任何规范固定，这就是说，对一张费曼图的中间态求和时，$\mu$和$\nu$的确要取遍$0$到$4$。
只有入射光子外线和出射光子外线需要特别选择。

\section{散射}

高能物理实验中涉及的物理过程的时间尺度通常远远小于我们能够观察的时间尺度，并且一般很难研究束缚态（部分是因为束缚态问题基本上是凝聚态研究的范畴而此时除了库仑定律以外也不需要太多物理，部分是因为微扰计算束缚态问题非常困难）。
因此，大部分情况下我们都只需要考虑初末态均在无穷远处的散射问题即可。因此，需要计算的主要就是$S$矩阵——实际上是动量表象下的$S$矩阵，以下如无特殊说明，$S$矩阵指的就是动量表象下的$S$矩阵。
然而，实验中能够制备的含有一定量的动量确定的粒子的态是完整的哈密顿量的本征态（而不是自由理论的本征态），此时的多粒子态的能量不是其单粒子能量的简单相加。
原则上我们同样可以微扰计算完整的哈密顿量的本征态，但是这将是非常费力并且困难的。

然而，在实际的散射问题中，无论是入射态还是出射态的结构都相对简单，因为实际的物理粒子的波函数的分布不可能是遍布全空间的平面波，而只能是动量大体上确定的波包，而将时间推到$\infty$或是$-\infty$时这些波包会相隔得足够远，从而它们之间没有相互作用，整个量子态的能量也就是各个粒子的能量之和。（或者等价地说，入射和出射时相互作用可能认为是“关闭”的，而只有粒子相隔得足够近才被打开）
因此，入射态和出射态实际上仍然能够写成
\[
    \ket{p_1, p_2, \cdots, p_n} = \sqrt{2\omega_{\vb*{p}_1}} \cdots \sqrt{2\omega_{\vb*{p}_n}} a^\dagger_{\vb*{p}_1} a^\dagger_{\vb*{p}_2} \cdots a^\dagger_{\vb*{p}_n} \ket{\Omega}
\]
的形式，但是此时的$a$算符——可以记为$a_\text{in}$或$a_\text{out}$——已经不再是自由场（“裸的”场）的$a$算符了，因为它创建的单粒子态是实际的、加入了相互作用的哈密顿量的本征态，即它创建的单粒子态是物理粒子，而不是没有相互作用时的裸粒子；同样$\omega$也不再是裸的单粒子能量。%
\footnote{
    我们对入射态和出射态的要求是非常严格的：一方面，出现在这些态中的粒子一定是能够稳定存在的粒子，寿命有限的准粒子（对应完整的哈密顿量的展宽的能级，可以看成是近似的本征态，但是因为各种扰动而不是严格的本征态）不能出现在入射态和出射态中；我们还进一步要求这些粒子之间的距离足够远，以至于可以近似看成自由的；最后我们还要求这些态被正确地归一化了，从而引入场强重整化因子。

    凝聚态理论考虑的系统状态比这多得多：寿命有限的准粒子时常需要被讨论，并且通常不会一次重整化就把所有相互作用都去除而只留下带自能修正的粒子。
    例如，费米液体理论中的“电子”实际上是已经经过相互作用修正的能带电子，但是即使在系统基态中这些准粒子的相互碰撞仍然需要纳入考虑。
}%
在海森堡绘景下，$S$矩阵的矩阵元基本上就具有
\[
    \braket*{p_1, p_2}{k_1, k_2} = \sqrt{2\omega_{\vb*{p}_1}} \sqrt{2\omega_{\vb*{p}_2}} \sqrt{2\omega_{\vb*{k}_1}} \sqrt{2\omega_{\vb*{k}_2}} \mel*{\Omega}{a_{\vb*{p}_2} a_{\vb*{p}_1} a^\dagger_{\vb*{k}_1} a^\dagger_{\vb*{k}_2}}{\Omega}
\]
这样的形式，这意味着只要能够找到$a_\text{in}$，$a_\text{out}$和裸场$a$之间的关系，即可确定关联函数和$S$矩阵的关系。
为了看出$a_\text{in}$，$a_\text{out}$和裸场$a$之间的关系，我们可以尝试为这种近乎独立的$a_\text{in}$和$a_\text{out}$所描述的“自由粒子”写下一个有效理论，显然这个有效理论是完整的、带有相互作用的理论不断重整化的结果，相互作用会修正“自由理论”的参数。
由于只考虑单粒子，相互作用带来的修正实际上就是所谓的自能修正：能够调整的参数包括质量项和$\partial_\mu \phi \partial^\mu \phi$项，对后者的调节等价于对场本身的变换。（此外，由于只考虑单粒子，且四维动量$p$的安排非常接近在壳，粒子无法衰变，因此自能修正没有虚部）
因此我们得出结论：$a_\text{in}$，$a_\text{out}$和裸场$a$之间应该差一个常数，这个常数是场强重整化引入的因子。
这就确定了关联函数和$S$矩阵之间的关系：在统一到动量空间中之后，两者首先由于相互作用修正的原因会差一个场强重整化因子；动量空间中的关联函数的解析性质和自由场的关联函数非常相似，只不过前者的极点给出的“质量”会出现跑动；相比之下，$S$矩阵要光滑很多，因为没有极点。
可以从关联函数计算$S$矩阵，但是不能反过来，因为$S$矩阵仅仅包含初态位于$-\infty$而末态位于$\infty$的过程。
因此应当有：
\[
    \prod_{i} \frac{\text{renormalization factors}}{\omega - \omega_{\vb*{k}} + \ii 0^+} \times \mel*{p}{S}{k} \propto \text{Fourier transformation of} \mel*{\Omega}{\phi(x_1) \cdots \phi(x_n)}{\Omega}.
\]

虽然我们做出了以上形式的论证，完整地做Wilson重整化群计算而得到场强重整化因子当然还是非常繁琐的，因此本节尝试以一种更加简单的方法建立微扰计算$S$矩阵的方法。
本节将始终在以下对高能物理来说非常一般的假设下工作：系统具有完整的洛伦兹对称性；入射和出射态中各个粒子相隔足够远；只有接近关联函数极点时的动量-能量安排才是值得分析的，因为其它时候实验现象也不明显。

本节将首先介绍一些可以使用$S$矩阵计算的物理量，以展示计算$S$矩阵的必要性，然后给出微扰计算$S$矩阵的方法。

\subsection{可观察物理量}

\subsubsection{散射截面}

\begin{equation}
    \mel*{p_1, p_2, \ldots, p_m}{\ii T}{k_1, k_2, \ldots, k_n} = \ii (2\pi)^4 \delta^4(\sum_i p_i - \sum_j k_j) \mathcal{M}(k_1, k_2, \ldots, k_n \to p_1, p_2, \ldots, p_m).
\end{equation}

\subsubsection{跃迁率}

\subsubsection{非相对论极限}

我们知道$S$矩阵可以用所谓李普曼-施温格方程写出。非相对论性单粒子量子力学中通常采取这样的归一化方案：
\[
    \hat{T} = \hat{H}' + \hat{H}' \frac{1}{E - \hat{H}_0} \hat{H}' + \cdots, \quad \hat{S} = 1 - 2 \pi \ii \delta(E_f - E_i) \hat{T},
\]
% TODO：怎么计算等效势能

\subsection{S矩阵和关联函数的关系}

\subsubsection{标量场编时格林函数的解析结构和LSZ约化公式}

考虑一个$n$点关联函数$\mel{\Omega}{T \phi(x_1) \cdots \phi(x_n)}{\Omega}$。
我们对$x_1$做傅里叶变换，这是因为实际上用于计算$S$矩阵矩阵元的本征态都是动量本征态，因此我们首先应该在$n$点关联函数中引入动量的概念。
我们没有直接使用用动量标记的产生湮灭算符，因为我们还希望用频率代替时间，而“频率”并不是量子数，因此不是任何一套产生湮灭算符的标签的一部分，如果使用用动量标记的产生湮灭算符就还需要对时间做一次傅里叶变换，表达式就看起来不协变了。
反之，对四维坐标$x_1$做完傅里叶变换之后，我们就可以用四维动量$k_1$代替$x_1$作为标记了，洛伦兹协变性就很明显。
这样得到的动量空间关联函数不保证入射和出射的四维动量是在壳的。（另一方面，$S$矩阵肯定是在壳的）

我们有
\begin{equation}
    \begin{aligned}
        &\quad \int \dd[4]{x_1} \ee^{\ii k_1 \cdot x_1} \mel{\Omega}{T \phi(x_1) \phi(x_2) \cdots \phi(x_n)}{\Omega} \\
        &= \left( \int_{-\infty}^{T_-} + \int_{T_-}^{T_+} + \int_{T_+}^\infty \right) \dd{t_1} \int \dd[3]{\vb*{x}_1} \ee^{\ii \omega_1 t_1 - \ii \vb*{k}_1 \cdot \vb*{x}_1} \mel{\Omega}{T \phi(x_1) \phi(x_2) \cdots \phi(x_n)}{\Omega} \\
        &= \int_{-\infty}^{T_-} \dd{t_1} \ee^{\ii \omega_1 t_1} \int \dd[3]{\vb*{x}_1} \ee^{- \ii \vb*{k}_1 \cdot \vb*{x}_1} \mel{\Omega}{T [\phi(x_2) \cdots \phi(x_n)] \phi(x_1)}{\Omega} \\
        &+ \int_{T_+}^{\infty} \dd{t_1} \ee^{\ii \omega_1 t_1} \int \dd[3]{\vb*{x}_1} \ee^{- \ii \vb*{k}_1 \cdot \vb*{x}_1} \mel{\Omega}{\phi(x_1) T [\phi(x_2) \cdots \phi(x_n)]}{\Omega} \\
        &+ \int_{T_-}^{T_+} \dd{t_1} \ee^{\ii \omega_1 t_1} \int \dd[3]{\vb*{x}_1} \ee^{- \ii \vb*{k}_1 \cdot \vb*{x}_1} \mel{\Omega}{T [\phi(x_1) \phi(x_2) \cdots \phi(x_n)]}{\Omega}.
    \end{aligned}
    \label{eq:correlation-after-fourier}
\end{equation}
最后一个等号只需要令$T^+$充分大，$T_-$充分小即可成立。
做完傅里叶变换之后的结果肯定具有奇异性：在相互作用下稳定的单粒子态有确定的动量和能量，因此在$\omega_1$和$\vb*{k}_1$之间满足正确的色散关系时，上式发散。
（多粒子态由于能量给定时其中某个动量可以连续变化，不会产生奇异性，但是会产生有限高度的峰）

高能物理实验中实际会测量的区域通常就在这种会导致奇异性的$\omega$和$\vb*{k}$的取值附近，因为这里效应最明显。
在\eqref{eq:correlation-after-fourier}的极点附近，$T_-$到$T_+$区段的积分基本上没有什么作用，因为其奇异性弱于$T_+$到$\infty$的积分和$-\infty$到$T_-$的积分。
因此之后我们不再考虑$T_-$到$T_+$区段的积分。

现在使用常用的技巧：在算符连乘积序列中插入一个完备关系，从而将$n$点关联函数转化为$n-1$点关联函数。
即使在加入相互作用之后，动量仍然是好量子数，因此可以有完备关系
\[
    1 = \sum_{\Lambda} \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \dyad*{\Lambda_{\vb*{p}}}, 
\]
其中$\Lambda$标记了冗余的量子数。对\eqref{eq:correlation-after-fourier}最后一步的第二项，插入完备关系得到
\[
    \begin{aligned}
        &\quad \int_{T_+}^{\infty} \dd{t_1} \ee^{\ii \omega_1 t_1} \int \dd[3]{\vb*{x}_1} \ee^{- \ii \vb*{k}_1 \cdot \vb*{x}_1} \mel{\Omega}{\phi(x_1) T [\phi(x_2) \cdots \phi(x_n)]}{\Omega} \\
        &= \int_{T_+}^{\infty} \dd{t_1} \ee^{\ii \omega_1 t_1} \int \dd[3]{\vb*{x}_1} \ee^{- \ii \vb*{k}_1 \cdot \vb*{x}_1} \mel*{\Omega}{\phi(x_1) \sum_{\Lambda} \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \dyad*{\Lambda_{\vb*{p}}} T [\phi(x_2) \cdots \phi(x_n)]}{\Omega} \\
        &= \sum_{\Lambda} \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \int_{T_+}^{\infty} \dd{t_1} \ee^{\ii \omega_1 t_1} \int \dd[3]{\vb*{x}_1} \ee^{- \ii \vb*{k}_1 \cdot \vb*{x}_1} \mel*{\Omega}{\phi(x_1)}{\Lambda_{\vb*{p}}} \mel*{\Lambda_{\vb*{p}}}{T [\phi(x_2) \cdots \phi(x_n)]}{\Omega}.
    \end{aligned}
\]
因子$\mel*{\Omega}{\phi(x_1)}{\Lambda_{\vb*{p}}}$可以进一步展开。
首先，因子$\mel*{\Omega}{\phi(0)}{\Lambda_{\vb*{k}_1}}$实际上只在$\ket{\Lambda_{\vb*{k}_1}}$是单粒子态时才能够有非零值（因为它可以写成一个经过场强重整化的产生算符作用在真空态上，而入射态和出射态可以近似看成自由理论，从而被夹在$\mel*{\Omega}{\cdot}{\Omega}$中的产生算符和湮灭算符数目必须一致）。
其次，我们注意到，实际上可以将$\phi(x_1)$写成$\ee^{\ii P \cdot x} \phi(0) \ee^{- \ii P \cdot x}$，其中$P$是全空间的动量算符，或者说平移群的生成元。在有相互作用的情况下，这样作用的结果并不方便计算，因为其中包含一个时间演化算符，但是我们总是可以形式地写出这样的式子。
于是
\[
    \mel*{\Omega}{\phi(x)}{\Lambda_{\vb*{p}}} = \mel*{\Omega}{\phi(x)}{\Lambda_{\vb*{p}}} \ee^{- \ii p \cdot x} |_{p^0 = E_{\vb*{p}}}. 
\]
于是就有
\[
    \begin{aligned}
        &\quad \int_{T_+}^{\infty} \dd{t_1} \ee^{\ii \omega_1 t_1} \int \dd[3]{\vb*{x}_1} \ee^{- \ii \vb*{k}_1 \cdot \vb*{x}_1} \mel{\Omega}{\phi(x_1) T [\phi(x_2) \cdots \phi(x_n)]}{\Omega} \\
        &= \sum_{\Lambda} \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \int_{T_+}^{\infty} \dd{t_1} \ee^{\ii (\omega_1 - E_{\vb*{p}}) t_1} \int \dd[3]{\vb*{x}_1} \ee^{- \ii (\vb*{k}_1 - \vb*{p}) \cdot \vb*{x}_1} \mel*{\Omega}{\phi(0)}{\Lambda_{\vb*{p}}} \mel*{\Lambda_{\vb*{p}}}{T [\phi(x_2) \cdots \phi(x_n)]}{\Omega} \\
        &= \sum_{\Lambda} \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \left( - \frac{1}{\ii (\omega_1 - E_{\vb*{p}} + \ii 0^+)} \ee^{\ii (\omega_1 - E_{\vb*{p}}) T_+} \right) (2\pi)^3 \delta(\vb*{k}_1 - \vb*{p}) \\
        & \quad \times \mel*{\Omega}{\phi(0)}{\Lambda_{\vb*{p}}} \mel*{\Lambda_{\vb*{p}}}{T [\phi(x_2) \cdots \phi(x_n)]}{\Omega} \\
        &= \sum_{\Lambda} \frac{\ii}{\omega_1 - E_{\vb*{k}_1}(\Lambda) + \ii 0^+} \ee^{\ii (\omega_1 - E_{\vb*{p}}) T_+} \mel*{\Omega}{\phi(0)}{\Lambda_{\vb*{k}_1}} \mel*{\Lambda_{\vb*{k}_1}}{T [\phi(x_2) \cdots \phi(x_n)]}{\Omega}.
    \end{aligned}
\]
上式中（以及之后），$E_{\vb*{k}}$代表的都是$\ket{\Lambda_{\vb*{k}_1}}$的能量，不是裸粒子的能量，已经加入了自能修正。
在这里我们使用标准的在对时间的积分中引入无穷小虚部，让$\omega_1$的奇点出现在下半平面的方法；实际上，如果不这样，积分也无法收敛。
我们现在稍微改变一下$\ket{\Lambda_{\vb*{p}}}$的归一化方式。目前使用的归一化方案是不协变的，对应于$\ket{\vb*{p}}$，现在我们转而使用
\[
    \ket{\lambda_{\vb*{p}}} = \sqrt{2 E_{\vb*{p}}} \ket{\Lambda_{\vb*{p}}},
\]
于是就有
\[
    \begin{aligned}
        &\quad \int_{T_+}^{\infty} \dd{t_1} \ee^{\ii \omega_1 t_1} \int \dd[3]{\vb*{x}_1} \ee^{- \ii \vb*{k}_1 \cdot \vb*{x}_1} \mel{\Omega}{\phi(x_1) T [\phi(x_2) \cdots \phi(x_n)]}{\Omega} \\
        &= \sum_{\lambda} \frac{1}{2E_{\vb*{k}_1}(\Lambda)} \frac{\ii}{\omega_1 - E_{\vb*{k}_1}(\Lambda) + \ii 0^+} \ee^{\ii (\omega_1 - E_{\vb*{p}}) T_+} \mel*{\Omega}{\phi(0)}{\lambda_{\vb*{k}_1}} \mel*{\lambda_{\vb*{k}_1}}{T [\phi(x_2) \cdots \phi(x_n)]}{\Omega}.
    \end{aligned}
\]
在接近\eqref{eq:correlation-after-fourier}的极点时，就有
\[
    \begin{aligned}
        &\quad \int_{T_+}^{\infty} \dd{t_1} \ee^{\ii \omega_1 t_1} \int \dd[3]{\vb*{x}_1} \ee^{- \ii \vb*{k}_1 \cdot \vb*{x}_1} \mel{\Omega}{\phi(x_1) T [\phi(x_2) \cdots \phi(x_n)]}{\Omega} \\
        &= \sum_{\lambda} \frac{\ii}{(\omega_1)^2 - (E_{\vb*{k}_1}(\lambda))^2 + \ii 0^+} \mel*{\Omega}{\phi(0)}{\lambda_{\vb*{k}_1}} \mel*{\lambda_{\vb*{k}_1}}{T [\phi(x_2) \cdots \phi(x_n)]}{\Omega}.
    \end{aligned}
\]
类似地可以得到
\[
    \begin{aligned}
        &\quad \int_{-\infty}^{T_-} \dd{t_1} \ee^{\ii \omega_1 t_1} \int \dd[3]{\vb*{x}_1} \ee^{- \ii \vb*{k}_1 \cdot \vb*{x}_1} \mel{\Omega}{T [\phi(x_2) \cdots \phi(x_n)] \phi(x_1)}{\Omega} \\
        &= - \sum_{\lambda} \frac{1}{2E_{\vb*{k}_1}(\lambda)} \frac{\ii}{\omega_1 + E_{\vb*{k}_1}(\lambda) + \ii 0^+} \ee^{\ii (\omega_1 + E_{\vb*{p}}) T_-} \mel*{\Omega}{T [\phi(x_2) \cdots \phi(x_n)]}{\lambda_{\vb*{k}_1}} \mel*{\lambda_{\vb*{k}_1}}{\phi(0)}{\Omega},
    \end{aligned}
\]
其中由于$\phi(x_1)$的位置发生了变化，一些量的正负号和左右矢的顺序发生了变化。不过，这一项并不产生极点。
因此最终我们得到
\[
    \begin{aligned}
        &\quad \int_{T_+}^{\infty} \dd{t_1} \ee^{\ii \omega_1 t_1} \int \dd[3]{\vb*{x}_1} \ee^{- \ii \vb*{k}_1 \cdot \vb*{x}_1} \mel{\Omega}{\phi(x_1) T [\phi(x_2) \cdots \phi(x_n)]}{\Omega} \\
        &\stackrel{\omega_1 \to E_{\vb*{k}_1}(\Lambda)}{\sim} \sum_{\lambda} \frac{\ii}{(\omega_1)^2 - (E_{\vb*{k}_1}(\lambda))^2 + \ii 0^+} \mel*{\Omega}{\phi(0)}{\lambda_{\vb*{k}_1}} \mel*{\lambda_{\vb*{k}_1}}{T [\phi(x_2) \cdots \phi(x_n)]}{\Omega}.
    \end{aligned}
\]
此外，设$U$是一个让三维动量减小$\vb*{k}_1$的洛伦兹变换，则
\[
    \begin{aligned}
        \mel*{\Omega}{\phi(0)}{\lambda_{\vb*{k}_1}} &= \mel*{\Omega}{\phi(0)U^{-1} U}{\lambda_{\vb*{k}_1}} \\
        &= \mel*{\Omega}{U \phi(0)U^{-1} U}{\lambda_{\vb*{k}_1}} \\
        &= \mel*{\Omega}{\phi(0)}{\lambda_0},
    \end{aligned}
\]
第二个等号是因为真空态在洛伦兹变换下显然是不变的，第三个等号用到了$U \phi(0) U^{-1} = \phi(0)$这一事实（将$\phi(0)$展开为傅里叶级数就能看出为什么）。
于是就得到
\[
    \begin{aligned}
        &\quad \int \dd[4]{x_1} \ee^{\ii k_1 \cdot x_1} \mel{\Omega}{\phi(x_1) T [\phi(x_2) \cdots \phi(x_n)]}{\Omega} \\
        &\stackrel{\omega_1 \to E_{\vb*{k}_1}(\lambda)}{\sim} \sum_{\lambda} \frac{\ii}{(\omega_1)^2 - (E_{\vb*{k}_1}(\lambda))^2 + \ii 0^+} \mel*{\Omega}{\phi(0)}{\lambda_{0}} \mel*{\lambda_{\vb*{k}_1}}{T [\phi(x_2) \cdots \phi(x_n)]}{\Omega}.
    \end{aligned}
\]
上面的结果的意义非常明显了：$x_1$变量做了傅里叶变换的关联函数会有一系列极点，这些极点的具体位置由在带相互作用的场论下的本征态的能谱（而不是自由粒子的能谱）决定；并且，会多出来一个因子$\mel*{\Omega}{\phi(0)}{\lambda_{0}}$。
由于$\ket{\lambda_{\vb*{k}_1}}$是经过相互作用修正的单粒子态，实际上只需要一个动量参数就足够标记它，于是我们去掉对$\lambda$的求和（因为显然只有一个可能的$\lambda$），并且用$\omega$代替$E$（再次提醒：这是已经经过相互作用修正的单粒子能量），就得到
\begin{equation}
    \begin{aligned}
        &\quad \int \dd[4]{x_1} \ee^{\ii k_1 \cdot x_1} \mel{\Omega}{\phi(x_1) T [\phi(x_2) \cdots \phi(x_n)]}{\Omega} \\
        &\stackrel{\omega_1 \to \omega_{\vb*{k}_1}}{\sim} \frac{\ii}{\omega_1^2 - \omega_{\vb*{k}_1}^2 + \ii 0^+} \mel*{\Omega}{\phi(0)}{p={0}} \mel*{k_1}{T [\phi(x_2) \cdots \phi(x_n)]}{\Omega}.
    \end{aligned}
    \label{eq:scalar-correlation-pole-single}
\end{equation}
这里我们已经用$\ket{k_1}$代替了$\ket{\lambda_{\vb*{k}_1}}$，前者就表示无穷远处的单粒子态。

现在设想我们对$\mel*{\Omega}{T \phi(x_1) \phi(x_n)}{\Omega}$中的每一个位置变量都做傅里叶变换。
由\eqref{eq:scalar-correlation-pole-single}，会发现每个$k_i$实际上都有极点。
我们实际上可以在一个公式内把所有这些极点都反映出来。考虑对\eqref{eq:scalar-correlation-pole-single}中的$x_2$做傅里叶变换，由于$x_2$仅仅包含在最后一个因子中，只需要计算
\[
    \begin{aligned}
        &\quad \int \dd[4]{x_2} \ee^{\ii k_2 \cdot x_2} \mel*{k_1}{T [\phi(x_2) \cdots \phi(x_n)]}{\Omega} \\
        &= \left( \int_{-\infty}^{T_-} + \int_{T_-}^{T_+} + \int_{T_+}^\infty \right) \dd{t_2} \ee^{\ii \omega_2 t_2} \int \dd[3]{\vb*{x}_2} \ee^{-\ii \vb*{k}_2 \cdot \vb*{x}_2} \mel*{k_1}{T [\phi(x_2) \cdots \phi(x_n)]}{\Omega}.
    \end{aligned}
\]
仿照我们先前做的操作，只需要计算$T_+$到$\infty$的积分即可得到最为奇异的部分，于是可以将$\phi(x_2)$提出编时算符的作用域内，放在最左边，然后仿照前面的操作，在$\phi(x_2)$和编时算符序列之间插入完备性关系，得到
\[
    \begin{aligned}
        &\quad \int_{T_+}^\infty \dd{t_2} \ee^{\ii \omega_2 t_2} \int \dd[3]{\vb*{x}_2} \ee^{-\ii \vb*{k}_2 \cdot \vb*{x}_2} \mel*{k_1}{\phi(x_2) T [\phi(x_3) \cdots \phi(x_n)]}{\Omega} \\
        &= \int \frac{\dd[3]{\vb*{p}_1}}{(2\pi)^3} \frac{1}{2 \omega_{\vb*{p}_1}} \int \frac{\dd[3]{\vb*{p}_2}}{(2\pi)^3} \frac{1}{2 \omega_{\vb*{p}_2}} \int_{T_+}^\infty \dd{t_2} \ee^{\ii \omega_2 t_2} \int \dd[3]{\vb*{x}_2} \ee^{-\ii \vb*{k}_2 \cdot \vb*{x}_2} \\ 
        &\quad \quad \times \mel*{k_1}{\phi(x_2)}{p_1, p_2} \mel*{p_1, p_2}{T [\phi(x_3) \cdots \phi(x_n)]}{\Omega} \\
        &= \int \frac{\dd[3]{\vb*{p}}}{(2\pi)^3} \frac{1}{2 \omega_{\vb*{p}}} \int_{T_+}^\infty \dd{t_2} \ee^{\ii \omega_2 t_2} \int \dd[3]{\vb*{x}_2} \ee^{-\ii \vb*{k}_2 \cdot \vb*{x}_2}  \mel*{\Omega}{\phi(x_2)}{p} \mel*{k_1, p}{T [\phi(x_3) \cdots \phi(x_n)]}{\Omega} \\
    \end{aligned}
\]
这一次只有$\mel*{k_1}{\phi(x_2)}{p_1, p_2}$有非零值（注意$\ket{p_1, p_2}$是入射/反射态，可以用经过场重整化的产生算符作用两次产生），于是我们引入了两个动量积分；第二个等号还是因为$\ket{p_1, p_2}$可以拆分，从而其中一个必须和$k_1$相等。
对因子$\mel*{\Omega}{\phi(x_2)}{p}$施加如前所述的插入四维平移算符的操作，得到
\[
    \mel*{\Omega}{\phi(x_2)}{p} = \mel*{\Omega}{\phi(0)}{p=0} \ee^{-\ii p \cdot x_2}|_{p^0=E_{\vb*{p}}},
\]
然后积掉$t_2$和$\vb*{x}_2$，就得到
\begin{equation}
    \begin{aligned}
        &\quad \int \dd[4]{x_1} \ee^{\ii k_1 \cdot x_1} \int \dd[4]{x_2} \ee^{\ii k_2 \cdot x_2} \mel{\Omega}{\phi(x_1) T [\phi(x_2) \cdots \phi(x_n)]}{\Omega} \\
        &\stackrel{\omega_1 \to \omega_{\vb*{k}_1}, \omega_2 \to \omega_{\vb*{k}_2}}{\sim} \frac{\ii \mel*{\Omega}{\phi(0)}{p={0}}}{\omega_1^2 - \omega_{\vb*{k}_1}^2 + \ii 0^+} \frac{\ii \mel*{\Omega}{\phi(0)}{p={0}}}{\omega_2^2 - \omega_{\vb*{k}_2}^2 + \ii 0^+} \mel*{k_1, k_2}{T [\phi(x_2) \cdots \phi(x_n)]}{\Omega}.
    \end{aligned}
    \label{eq:scalar-correlation-pole-double}
\end{equation}
如此重复——实际上，我们还可以反过来做以上步骤，此时为了让极点出现，傅里叶变换的$\ee$指数要加上一个减号，在本节处理的标量场中这无所谓，但是对有粒子-准粒子区别的场，代表入射粒子的场算符和代表出射粒子的场算符差一个负号，从而一些要正着做傅里叶变换一些要反着做傅里叶变换——就得到
\begin{equation}
    \begin{aligned}
        &\quad \prod_{i=1}^m \int \dd[4]{x_i} \ee^{\ii p_i \cdot x_i} \prod_{j=1}^n \int \dd[4]{y_j} \ee^{- \ii k_j \cdot y_j} \mel{\Omega}{T [\phi(x_1) \cdots \phi(x_n) \phi(y_1) \cdots \phi(y_n)]}{\Omega} \\
        &\stackrel{p_i^0 \to \omega_{\vb*{p}_i}, \; k_j^0 \to \omega_{\vb*{k}_j}}{\sim} \prod_{i=1}^m \frac{\ii \sqrt{Z}}{\omega_i^2 - \omega_{\vb*{p}_i}^2 + \ii 0^+} \prod_{j=1}^n \frac{\ii \sqrt{Z}}{\omega_j^2 - \omega_{\vb*{k}_j}^2 + \ii 0^+} \braket*{p_1, p_2, \ldots, p_m}{k_1, k_2, \ldots, k_n},
    \end{aligned}
    \label{eq:lsz-reduction-scalar}
\end{equation}
其中
\begin{equation}
    Z = \abs{\mel*{\Omega}{\phi(0)}{p=0}}^2.
    \label{eq:z-factor-def}
\end{equation}
以上所有的推导都是在海森堡绘景下完成的，因此上式右边的因子就是$S$矩阵。
于是我们就得到了联系$S$矩阵和关联函数的公式，其形式和之前的分析完全一样，$Z$正是场强重整化因子。%
\eqref{eq:lsz-reduction-scalar}就是标量场的\concept{LSZ约化公式}，其形式和之前我们预期的完全一样。
实际上，LSZ约化公式说明重整化后的格林函数是重整化前的$1 / Z^{(m+n)/2}$倍。

\subsubsection{$S$矩阵的微扰计算}

在得到了\eqref{eq:lsz-reduction-scalar}之后就可以微扰计算$S$矩阵了，因为可以微扰计算关联函数。
实际上，计算关联函数比计算$S$矩阵更加困难。这本质上是因为$S$矩阵丢弃了初末态均为有限时间的信息（$S$矩阵仅仅保留了动量空间关联函数那些四维动量均在壳的那部分初末态），并且在费曼图的语言下有非常显然的解释。
下面我们来分析关联函数的费曼图，并给出直接微扰计算$S$矩阵的方法。

计算关联函数的任何一张费曼图都具有这样的形式：一个amputated diagram居于中间，外线和它之间连接有自能修正图。
在动量空间下，一张自能修正图可以等价地看成
\[
    \int \dd[4]{x} \ee^{\ii p \cdot x} \int \dd[4]{y} \ee^{- \ii k \cdot y} \mel{\Omega}{\phi(x) \phi(y)}{\Omega},
\]
按照\eqref{eq:z-factor-def}，$\sqrt{Z}$对应$\mel{\Omega}{\phi(x_1) a^\dagger_\text{in}}{\Omega}$，这个关联函数中的两个场中，一个做了场强重整化而另一个没有。
既然$\mel{\Omega}{a_\text{out} a^\dagger_\text{in}}{\Omega}$就是$1$，$\mel{\Omega}{\phi(x_1) \phi(x_2)}{\Omega}$的场强重整化因子为$Z$。

关联函数$\mel{\Omega}{\phi(x_1) \phi(x_2)}{\Omega}$可以直接微扰计算，从而在理论已经给定的情况下，我们可以把$Z$到底是什么写出来。
设$- \ii M^2(p^2)$是单粒子不可约图（对应自能修正），那么就有
\[
    \begin{aligned}
        &\quad \int \dd[4]{x} \ee^{\ii p \cdot x} \int \dd[4]{y} \ee^{- \ii k \cdot y} \mel{\Omega}{\phi(x_1) \phi(x_2)}{\Omega} \\
        &= \frac{\ii}{p^2 - m_0^2} + \frac{\ii}{p^2 - m_0^2} (- \ii M^2(p^2)) \frac{\ii}{p^2 - m_0^2} + \cdots \\
        &= \frac{\ii}{p^2 - m_0^2 - M^2(p^2)},
    \end{aligned}
\]
其中$m_0$为粒子裸质量。自能$M^2$关于$p^2$的最低阶项当然是$p^2$自己，即
\[
    M^2 = c_0 + c_1 p^2 + \cdots.
\]
在低阶近似下$c_1=1$，高阶下则会有可见的修正，实际上这就对应着对$(\partial_\mu \phi)^2$的修正。
因此，在极点附近，我们有
\begin{equation}
    \int \dd[4]{x} \ee^{\ii p \cdot x} \int \dd[4]{y} \ee^{- \ii k \cdot y} \mel{\Omega}{\phi(x_1) \phi(x_2)}{\Omega} \stackrel{p^0 \to E_{\vb*{p}}}{\sim} \frac{\ii Z}{p^2 - m^2} + \text{regular}. 
\end{equation}
因此这给出了计算$Z$和有效质量$m$的方法：微扰计算自能修正，然后按照上式化简，观察极点位置就得到了$m$，在极点附近比较关联函数和$\ii / (p^2 - m^2)$就得到了$Z$。
将上式代入\eqref{eq:lsz-reduction-scalar}，就发现
\begin{equation}
    \braket*{p_1, p_2, \ldots, p_m}{k_1, k_2, \ldots, k_n} \stackrel{p_i^0 \to \omega_{\vb*{p}_i}, \; k_j^0 \to \omega_{\vb*{k}_j}}{\sim} (\sqrt{Z})^{m+n} \times \text{amputated diagrams}.
    \label{eq:amputated-diagram-z-factor}
\end{equation}
因此，计算自能修正并得到$Z$之后，只需要计算amputated diagrams就能够微扰计算得到$S$矩阵。

我们还可以更加简化一些。注意到，所有只含有单粒子自能修正的图——即有$n$个入射粒子，$n$个出射粒子，总共有$n$个连通子图，不同粒子对应不同连通子图的图——在amputate之后就是简单地将入射端和出射端连接起来，而这些图正好对应$S=1 + \ii T$中的$1$，因此如果只计算$\mathcal{M}$，无需计算这些图。

如果只计算树图，那么显然$Z=1$，因为此时没有任何自能修正，从而无论是物理质量还是场强都没有做重整化。
因此，计算树图时只将amputated tree diagram求和即可。
圈图的计算一般要用到重整化，此时为了方便看出场强重整化因子，并不会使用\eqref{eq:amputated-diagram-z-factor}。

% TODO：路径积分量子化中的LSZ

\section{正规化和重整化}

如果朴素地做圈图计算，通常会得到紫外发散。%
\footnote{
    相对论性量子场论中的红外发散一般是因为少考虑了一些过程，如由于光子无能隙，可以任意地产生和消灭，从而一个过程的概率分散在很多个有入射和出射“软光子”（能量很低并无可观测效应的光子）。
    当求和所有这些过程后，发散一般就消失了，并不具有特别的意义。

    凝聚态场论中的情况正好相反：紫外发散是没有关系的，因为凝聚态系统中有最小的特征长度，如果出现了发散，可以引入一个物理可观测的紫外截断消除这个发散（如BCS理论中的$\omega_\text{D}$）。
    红外发散反而不那么好处理。
}%
这并不特别令人意外，因为没有什么保证了我们的理论在任意能标下都一定成立，从而，将动量积分的上限推到无穷大大约是不合适的。
要想计算出有意义的结果通常要求我们知道更高能标处的物理的细节；然而，如果我们的理论实际上具有低能标下的一个不动点，那么更高能标处的物理实际上无关紧要，只要我们只关心低能的现象。

在这种情况下，可以做下面的操作来消除发散：
\begin{enumerate}
    \item 在圈图计算中寻找一个能够标记重整化群流的参数，可能是和Wilson重整化群流一致的动量积分上限$\Lambda$，也可以将维数延拓到实数中，从而用维数偏离$4$的程度$\epsilon$做这个参数。此时积分的发散部分可以被分离出来，这就是\concept{正规化}。
    \item 令理论中的各个参数（所谓“裸”参数）跑动起来，包括场强，即引入\concept{抵消项}，其大小暂时未知。
    \item 计算若干个可以实际观察到的物理量（通常具有和裸参数类似的物理意义，从而它们可以称为\concept{物理参数}，如自由场的关联函数的极点给出裸质量，而有相互作用的关联函数的极点给出物理质量），将它们写成裸参数、参数跑动（即抵消项中的参数）和重整化群流参数的形式。
    \item 在低能不动点处，物理参数应当和重整化群流参数无关，因此可以反过来将参数跑动写成重整化群流参数和物理参数的函数，从而求解出所有抵消项。
    用于确定抵消项的条件即为\concept{重整化条件}。
    如果理论可重整，此时所有其它可以实际观察到的物理量中的发散都会相互抵消，从而我们成功地将一些可以实际观察到的物理量写成了另一些可以实际观察到的物理量（即物理参数）的函数，即给出了实验预言。
\end{enumerate}
在最终的计算结果中裸参数都没有出现；这是正确的，因为实际上并没有什么能够真的“观察”到裸参数——无法确定实际测到的物理参数有多少来自裸参数，多少来自相互作用修正。
实际上，为了和发散抵消，裸参数一般都是反向发散的。

在实际的计算中，还有以下技巧：
\begin{itemize}
    \item 由于圈图数目非常多，通常我们会以需要计算的散射振幅的树图当成骨架，将圈图当成对骨架图中各个成分的修正。
    这样的好处是，做完全部修正的骨架图的各个成分通常足够给出物理参数了，如做完自能修正的传播子可以给出物理质量，做完顶角修正的amputated vertex diagram可以给出有效相互作用强度。
    \item 由于实际有意义的关联函数、散射振幅等均已经做过场强重整化，可以用场强重整化之后的场来做拉氏量中的基本自由度。
    \item 抵消项可以被显式给出。如果不希望引入太多顶角，也可以首先形式地写出含有未知的裸参数的散射振幅的形式，然后用未知的裸参数去拼凑出物理参数。
    如果显式地使用抵消项，由于我们在重整化不动点附近工作，其实可以将抵消项设置为“裸参数偏离物理参数的多少”，而直接将物理参数放进拉氏量中。
\end{itemize}

表面上，任何一个理论都可以做这样的操作——对称性允许的拉氏量中的项是无限多的，我们可以引入任意多的抵消项来消除发散。
但是，如果需要引入无数多的抵消项，那么重整化操作就是无法完成的。

为了估计发散的程度，我们可以引入一些指标。\concept{原始发散图}指的是只要切断一根内线（即不计算这根内线的积分），就能够收敛的图。发散的图是用原始发散图组装起来的。
如果一个理论中的原始发散图的个数有限，

由于紫外发散来自动量积分有太多重，一张图$\Gamma$中的动量的幂次——所谓\concept{表观发散度}——为
\begin{equation}
    D(\Gamma) = \sum_i n_i d_i + 2 I_\text{B} + 3 I_\text{F} - 4(\sum_i n_i - 1),
\end{equation}
其中$n_i$指的是某一类型的顶角的个数，$d_i$是类型$i$的顶角中的动量幂次，$I_\text{B}$和$I_\text{F}$分别表示玻色子和费米子线的个数，因为费米子传播子的分母中只有一个$k$，做完四维动量积分之后动量幂次为3，而玻色子传播子的分母中有两个$k$，做完四维动量积分之后动量幂次为2。
最后一项是因为顶角会引入一个动量守恒条件；我们故意减去了$1$，因为费曼图最终的计算结果也肯定满足动量守恒条件，即有一个$\delta(\sum \vb*{k})$并没有被积分掉，而是留到了计算结果中。
现在我们进一步设$i$类型顶角中有$b_i$个玻色子线，$f_i$个费米子线，并设有$E_\text{F}$条费米子外线，$E_\text{B}$条玻色子外线，则
\[
    E_\text{F} + 2 I_\text{F} = \sum_i n_i f_i, \quad E_\text{B} + 2 I_\text{B} = \sum_i n_i b_i,
\]
因为一条内线连接两个顶角。这样就有
\begin{equation}
    D(\Gamma) = \sum_i n_i \left( d_i + b_i + \frac{3}{2} f_i - 4  \right) + 4 - E_\text{B} - \frac{3}{2} E_\text{F}.
\end{equation}

表观发散度实际上就是在做量纲分析，而且做的是朴素的工程量纲分析，因此是不尽然可靠的。
大体上说，如果表观发散度大于零，那么这张图发散，如果小于零，那么这张图收敛，如果等于零，那么这张图应该对数发散，但是这只是一个非常粗略，可能不准确的估计。
不过，\concept{Weinberg power counting theorem}保证了，当且仅当一张图及其子图的表观发散度都是小于零，它收敛。

为了保证尽可能多的图的表观发散度小于等于零，我们会要求
\begin{equation}
    d_i + b_i + \frac{3}{2} f_i - 4 \leq 0,
\end{equation}
因此比较安全的安排是，一个顶角最多有四条玻色子线、两条费米子线，否则有可能产生无穷多种发散的图，理论可能不能重整化。

\subsection{维数正规化}

注：经常用Wick转动来化简此处的积分，但是由于$p^0 > 0$时极点在下半平面而$p^0 < 0$时极点在上半平面，为了避免撞上奇点，Wick转动应该将积分路径顺时针旋转\SI{90}{\degree}，从而可以设$l = \ii l^\text{E}$。
TODO：这和我们后面做的将整个理论做Wick转动时用的记号似乎不一样？

将内线动量从$4$维扩充为$n$维度，外线动量保持不变。

\subsection{骨架图的修正}

重整化条件：
\begin{itemize}
    \item 在修正后的单粒子格林函数的极点处，有质量粒子的自能修正对$p^2$（玻色子）或者$\slashed{p}$（费米子）的一阶导数为零；无质量粒子的自能修正为零。
    这是为了确保没有场强重整化。
    动量远离单粒子格林函数极点时它们当然可以不是零；本应如此，否则圈图修正无法体现。
    \item 在修正后的单粒子格林函数的极点处，极点给出的质量（通过$p^2=m^2$解出）就是我们设定的物理质量；在显式引入自能修正时，有质量粒子的自能修正为零。
    这是为了确保质量的修正为零。
    \item 顶角函数和物理相互作用强度相同，这是为了确保顶角修正为零。
    具体什么是“物理相互作用强度”取决于探测方式，如量子电动力学中通常是使用静电学方法测定电磁相互作用的强度，于是我们要求顶角函数在光子动量为零时和静电学方法测得的电磁相互作用强度（其实就是元电荷）相同。
    其它时候顶角函数可以有偏离，以展现高阶过程的修正。
\end{itemize}

\section{单位制，指标记号和度规选取}

\subsection{度规的圣战}

时间在整个四维矢量中的位置，一些人取为$x^0$，一些人取为$x^4$。

\subsubsection{$-+++$和$+---$}

在以上所有的讨论中，我们都在使用度规$+---$。度规$-+++$在一些文献中也是常用的，并且在做Wick转动时更加方便（见下一节）。

概述：两种度规的协变矢量保持一致，点乘差一个负号。

\subsubsection{Wick转动}

为了免去洛伦兹度规的麻烦，一些人会做Wick转动，即令$\tau=\ii t$，这样就不需要区分逆变协变了，并且很多积分的性质会变得良好。
为了尽可能减少需要改动的地方，最方便的做法是在Wick转动后的理论（“欧氏空间度规理论”）和$-+++$度规之间切换，需要时再切换到$+---$度规。

如果单纯是做替换$\tau = \ii t$，那么没有太多可说，但实际上其它物理量也需要变化，而这些变化有很多自由发挥的空间。
例如，原本在相对论性量子场论中含有傅里叶变换的表达式在做完Wick转动之后是否需要修改为拉普拉斯变换？
格林函数的定义是否需要更动？这些都是需要指定的。

我们于是施加以下条件：
\begin{itemize}
    \item Wick转动后的理论，如果将时间的积分区域设为实数，应该给出原理论对应的有限温度场论。
    这就是说，对应关系$\tau \leftrightarrow \ii t$和$\ii \omega_n \leftrightarrow \omega$应当可以在Wick转动的过程中找到，虽然由于$t$和$\omega$区分逆变和协变，有待进一步澄清以上关系式中的$t$和$\omega$指的是什么。
    \item Wick转动前后标量尽可能不变。
    \item Wick转动将原本的傅里叶变换映射为$\ee^{\ii k_i x_i}$形式的欧氏空间傅里叶变换。
    \item 闵氏时空下，矢量的欧氏部分的协变分量和欧氏四维空间中对应的分量需要完全一样，从而我们无需在$(x^\text{M})^i$和$x^\text{E}_i$之间做任何区分。这里上标M和E分别表示闵氏时空和欧氏四维空间，下同。
\end{itemize}

我们来看一下这些条件意味着什么。首先，第二个和第三个条件意味着应有
\[
    (x^\text{M})^0 p^\text{M}_0 + (x^\text{M})^1 p^\text{M}_1 + (x^\text{M})^2 p^\text{M}_2 + (x^\text{M})^3 p^\text{M}_3 = x^\text{E}_0 p^\text{E}_0 + x^\text{E}_1 p^\text{E}_1 + x^\text{E}_2 p^\text{E}_2 + x^\text{E}_3 p^\text{E}_3,
\]
因为我们有
\[
    \ee^{\ii k^M \cdot x^M} = \ee^{\ii k^E \cdot x^E}.
\]
请注意在$-+++$度规下$p_i$和$p^i$并无差别，于是按照第四个条件，我们有
\[
    (x^\text{M})^1 p^\text{M}_1 + (x^\text{M})^2 p^\text{M}_2 + (x^\text{M})^3 p^\text{M}_3 = x^\text{E}_1 p^\text{E}_1 + x^\text{E}_2 p^\text{E}_2 + x^\text{E}_3 p^\text{E}_3,
\]
即
\[
    (x^\text{M})^0 p^\text{M}_0 = x^\text{E}_0 p^\text{E}_0.
\]
在相对论性量子场论中我们通常认为$t$就是$x^0$而$\omega$就是$p^0$，它和$p_0$正好差了一个负号，而显然我们应该指定$\tau=\ii t$为$x^\text{E}_0$，因此就有
\[
    p_0^\text{E} = \ii \omega,
\]
即应有
\begin{equation}
    p_0^\text{E} = - \omega_n = \ii \omega, \quad x^\text{E}_0 = \tau = \ii t.
\end{equation}
换句话说，四维欧氏空间中的$p^\text{E}$的时间分量和松原频率差了一个负号。
这其实是正确的，因为在凝聚态场论中有
\[
    \phi(\tau) \propto \sum_n \ee^{-\ii \omega_n \tau} \phi_n,
\]
加入动量之后就是
\[
    \phi(\tau, \vb*{x}) \propto \sum_n \int \dd[3]{\vb*{p}} \phi_n(\vb*{p}) \ee^{-\ii \omega_n \tau + \ii \vb*{p} \cdot \vb*{x}} , 
\]
考虑到$\omega_n \tau = \omega t$，做了反Wick转动之后这正好就是$-+++$度规，即使用$\omega_n$表示的傅里叶变换的$\ee$指数本身遵循$-+++$度规而不是$++++$度规，自然会导致$\omega_n$和$p^\text{E}_0$差一个负号。

任何使用爱因斯坦求和得到的洛伦兹标量在Wick转动后形式均不变，因为Wick转动相当于做了一次坐标变换，而满足上下同指标求和规则的量在坐标变换下形式不变。
由于Wick转动后是欧氏度规，我们不必再区分逆变和协变。
需要修改的主要是积分测度，即需要加上或减少一个因子$\ii$。
因此以上给出的关于坐标和频率的Wick转动足够让我们完成标量场论的配分函数的Wick转动。
对矢量场只需要对$A^0$做代换即可，即取
\begin{equation}
    A^\text{E}_0 = (A^\text{E})^0 = \ii (A^\text{M})^0.
\end{equation}

在完成配分函数的Wick转动之后还需要注意格林函数也需要做一些调整。
从闵可夫斯基时空的理论中得到关联函数的方式是做变分导数$\fdv*{Z}{(\ii J)}$，$J$是在以
\[
    \exp(\ii \int \dd[4]{x} J \phi)
\]
形式引入的。在Wick转动后，以上激励项变成了
\[
    \exp(\int \dd[4]{x} J \phi).
\]
在此过程中场$J$和$\phi$没有发生任何变化，所以用四维欧氏时空计算闵氏时空中的格林函数，只需要先计算$\fdv*{Z^\text{E}}{(\ii J)}$然后做反Wick转动即可。
然而，需要注意一件事：四维欧氏时空中本身也定义有格林函数，即所谓虚时间格林函数，而当激励项以
\[
    \exp(\int \dd[4]{x} J \phi)
\]
形式给出时，计算虚时间格林函数使用的泛函导数是$\fdv*{Z^\text{E}}{J}$，没有$\ii$。（这和松原格林函数又差了一个负号）
在四维欧氏时空中计算虚时间格林函数，使用Wick定理，画费曼图等使用的都是$\fdv*{Z^\text{E}}{J}$方法求出的格林函数，但是最后切换回$-+++$度规的闵氏时空时需要把$\ii$加回去，格林函数中涉及几个场加几个。
例如，对二体格林函数，四维欧氏时空中的虚时间格林函数计算出来之后，需要做反Wick转动（在此过程中由于$\tau = \ii t$，闵氏时空格林函数的分子上会多出$-\ii$），然后加上一个负号（由于泛函导数而导致的$\ii$有两个，因为有两个场，而$\ii^2=-1$），才能得到$-+++$度规的闵氏时空中的格林函数。

对旋量场，事情略微复杂一些，因为$\gamma$矩阵也需要做同样的变换——当然其实可以不做任何变换，但是这样很多公式会看起来很奇怪。
考虑配分函数：
\[
    \begin{aligned}
        Z &= \int \fd{\psi} \int \fd{\bar{\psi}} \exp(\ii \int \dd[4]{x} \bar{\psi} (\ii \gamma^\mu \partial_\mu - m) \psi) \\
        &= \int \fd{\psi} \int \fd{\bar{\psi}} \exp(\int \dd{\tau} \int \dd[3]{\vb*{x}} \bar{\psi} (\ii \gamma^\mu \partial_\mu - m) \psi) \\
        &= \int \fd{\psi} \int \fd{\bar{\psi}} \exp(\int \dd{\tau} \int \dd[3]{\vb*{x}} \bar{\psi} (- \gamma^0 \pdv{\tau} + \ii \gamma^i \partial_i - m) \psi).
    \end{aligned}
\]
如果我们做变换
\begin{equation}
    (\gamma^\text{M})^0 = (\gamma^\text{E})^0, \quad - \ii (\gamma^\text{M})^i = (\gamma^\text{E})^i,
\end{equation}
并且，由于到了欧氏空间中，不再区分上下标，就得到
\begin{equation}
    Z = \int \fd{\psi} \int \fd{\bar{\psi}} \exp(- \int \dd[4]{x^\text{E}} \bar{\psi} (\gamma^\text{E}_\mu \partial_\mu^\text{E} + m) \psi)
\end{equation}
这就是旋量场的Wick转动。相应的$\gamma$矩阵的代数需要做调整，但是旋量本身并不需要做调整（除了用$-\ii \tau$代替$t$以外）。
$\gamma$矩阵的变动意味着，$\gamma^\mu a_\mu$形式的量即$\slashed{a}$虽然看起来像是点乘，但是在Wick转动下会发生变化：$a_0^\text{E}$相比于$(a^\text{M})^0$多出来了一个$\ii$，而$\gamma_i^\text{E}$相比于$(\gamma^\text{M})^i$多出来了一个$-\ii$，再加上度规从$-+++$变成了$++++$，我们就得到
\begin{equation}
    \gamma^\text{E}_\mu a^\text{E}_\mu = \slashed{a}^\text{E} = - \ii \slashed{a}^\text{M} = -\ii {\gamma^\text{M}}^\mu a^\text{M}_\mu.
\end{equation}

以上推导都是针对相对论情况下的。非相对论情况下的理论大多都是一个相对论情况下的理论的低能有效理论，因此所有的矢量分量的Wick转动规则仍然适用。
例如，电磁场和非相对论性电子的耦合给出的拉氏量不具有洛伦兹协变性，但是电磁分量

\end{document}